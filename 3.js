function prefAirlineSelectionHandler(e, t) {
    $(e.target.parentNode).find("#carrier").val(t.item.k);
}

function originAirlineSelectionHandler(e, t) {
    var n = $(e.target), r;
    n.val() != "" && n.next().val(t.item.k).trigger("change"), r = Number(n.attr("tabIndex")), n.closest(".fieldRow").parent().find('[tabIndex="' + (r + 1) + '"]').focus();
}

function destinationAirlineSelectionHandler(e, t) {
    var n = $(e.target);
    n.val() != "" && (n.next().val(t.item.k).trigger("change"), $(".switchAirports").removeClass("faded")), tabIndex = Number(n.attr("tabIndex")), n.closest(".fieldRow").parent().find('[tabIndex="' + (tabIndex + 1) + '"]').focus();
}

function responseModifierFlight(e, t) {
    var n = [], r = 0, i = 0, s, o = [];
    return $(e).each(function(t, n) {
        n.pr || o.push(n), n.p && _.filter(e, function(e, t) {
            return e.pr === n.p && o.push(e), !0;
        });
    }), $(o).each(function(e, t) {
        n[r] = {}, $.extend(n[r], t), t.c !== s && (i = 0), t.k === "sg" && (t.v = t.k = "Did you mean?", n[r].cls = "infoTitle"), t.pr ? n[r].cls = "child" : t.c && i == 0 && (n[r].country = t.c, s = t.c, i = 1), n[r].label = t.v, n[r].value = t.k, r++;
    }), n;
}

function toEmailSelectionHandler(e, t) {
    var n = $(e.target);
    n.val(t.item.email);
}

function responseModifierToEmail(e, t) {
    var n = [], r = 0;
    return $(e).each(function(e, t) {
        n[r] = {}, $.extend(n[r], t), n[r].label = t.email, n[r].value = t.email, r++;
    }), n;
}

!function(e, t, n) {
    n[e] = t(CT.Pers, CT.settings.validators);
}("validators", function(e, t) {
    var n = $.extend(t, {});
    return n;
}, CT.settings), CT.messages = $.extend({
    air: {
        zeroResultsMsg: "Sorry, there aren't any flights available for your search",
        fiveHundredResultsMsg: "Sorry, our system is acting up",
        fourHundredResultsMsg: "Sorry, our servers are stumped with your request, please check the URL",
        filterZeroResMsg: {
            title: "We couldn't find flights to match your filters",
            btnL: "Undo last filter",
            btnLCls: "primary",
            msg: "   ",
            btnR: "Reset filter",
            cls: "filters",
            btnRCls: "button"
        },
        pastDatesResMsg: "Looks like your dates are in the the past",
        nearByairportsMsg: {
            pickedClosestAirportMsg: "We've picked an airport which closely matches your request. If this is not what you asked for, please try a fresh search",
            mainMsgNoDestination: "Oops, we couldn't find flights <from-to> <city_name>",
            mainMsgWithDestination: "We found more airports near <city_name>",
            commonNbMsg: "We found more airports for your search",
            msg: "Please uncheck the airports that do not work for you"
        },
        PriceAdvisaryMsg: "Found better fares around your travel date",
        presetFilterMsg: "Looks like you've applied some filters. <a href ='javascript:void(0)' class='weak presetFilterLink'>Reset filters</a>",
        rememberedFilterMsg: 'We have remembered your preferred filters to help you book fast. Showing <strong class="resultsCount"></strong> flights <a href ="javascript:void(0)" class="weak presetFilterLink">(Show all flights)</a>',
        sameDayRTFilterMsg: 'We have pre-applied departure time filters to help you book fast . Showing <strong class="resultsCount"></strong> flights <a href ="javascript:void(0)" class="weak presetFilterLink">(Show all flights)</a>',
        minStopFilterMsg: 'We are showing you flights with minimum stops - showing <strong class="resultsCount"></strong> flights <a href ="javascript:void(0)" class="weak presetFilterLink minStopFilterOff">(Show all flights)</a>',
        sameDayInternationalSearchMsg: "Only Flights departing after 8 hours from now are shown",
        zeroResultsSameDayInternationalSearchMsg: "Sorry, we can't find international flights at such short notice",
        NoBaggageMsg: "Baggage information unavailable for this flight",
        GetPriceAvl: "Getting prices and availability...",
        GetFlightDet: "Getting flight details...",
        somethingCropped: "Hmm looks like something crapped out",
        onSelectLoose: "On selecting this, you might loose your ",
        infoUnavailable: "info unavailable",
        baggageRecheck: "You may need to change terminals and re-check in your baggage.<br/>The baggage allowance might be lower on this connection.",
        combinationNotfound: "<div class='flushMessage comboError'><p><i class='ugly'></i><strong class='ugly'>No flight combination found.</strong></p></div>",
        combinationNotAvl: "<div class='flushMessage comboError'><p><i class='ugly'></i><strong class='ugly'>This combination is not available. Please select another flight</strong></p></div>",
        airportTravelTax: "Airport Arrival Tax",
        buttonSelect: "Select",
        buttonBook: "Book",
        mmtFare: "MMT Fare",
        MakeLastMinPlan: "Making last minute plans?",
        flashUpsellText: "Find last minute flights in a flash with the Cleartrip app",
        LookForDealFlight: "Looking for a deal on flight bookings?",
        getBestOfferDeals: "Get the best offers on flights and hotels with Cleartrip Mobile.",
        undoFilter: "Undo last filter",
        moreOption: " more option",
        OptPlural: "s",
        atsamePrice: " at same price",
        modPackageButton: "View packages",
        modKnowButton: "Know more â†’",
        buttonFresh: "Try a fresh search",
        flightAvlDiffDay: "<h6>Try changing your dates</h6><p><small class='weak'>There might be flights available on different day</small></p>",
        baggageInfoNote: "<p><small><strong>Please note:</strong> Airlines typically permit 23 KG baggage weight per piece.</small></p>",
        TimeBucketAny: "Any time",
        BucketEarly: "Early Morning : Before 8am",
        BucketMorng: "Morning : 8am to 12pm",
        BucketAftrn: "Afternoon : 12pm to 4pm",
        BucketEve: "Evening : 4pm to 8pm",
        BucketNight: "Night : After 8pm",
        HeadPrice: "Price",
        OWHeadPrice: "One-way price",
        validationSameCity: "Looks like you've picked the same city",
        CitySuggestion: "Please pick a city from the list of suggestions",
        DateInformat: "Please enter the date in DD/MM/YYYY format or pick a date from the date picker",
        DateIsPast: "Please enter the date which is not past",
        cantFindIntFlight: "Sorry, we can't find international flights at such short notice",
        cantFindDomFlight: "Sorry, we can't find domestic flights at such short notice",
        differentDest: "Please choose a destination that is different from your origin.",
        AirportSuggestion: "Please pick an airport from the list of suggestions",
        showRefundFare: "Show only refundable fares",
        showCorpFare: "Show only corporate fares",
        RTDiscounts: "Round trip discounts",
        saveSpclRTFare: "Save money on flights with special round trip fares.",
        KnowFlight: "Know your flight",
        GlanceIdentifyFlight: "Just one glance to identify flights with a short or long layover, red-eye flights, number of seats left at this price, and more",
        FlighttDetails: "Flight details",
        CompltFlightDetails: "Complete flight details, including change and cancellation fees",
        FlexiDates: "Flexible with dates?",
        SnapofMonth: "Snapshot of fares this month. Search on a different date with just one click",
        NonstopFlight: "Non-stop flights",
        OnlyNonStopFlight: "See only non-stop flights with just one click",
        SwitchCalView: "Switch to calendar view",
        seeFullMonthFare: "See fares for an entire month, book on the cheapest date",
        newExperience: "Welcome to a brand new Cleartrip experience",
        getBuses: "Get all the buses you'll ever need with just one search",
        IntroducingPkg: "Introducing Packages",
        Buses: "Buses",
        Mobile: "Mobile",
        getMobile: "Book Hotels, Flights & Trains. Your travel agent in your pocket.",
        bookFlightHotelTogether: "Book a flight and hotel together for your <destination> trip and save upto 40%",
        fareAlerts: "Fare Alerts",
        trackAirlinesAndSave: "Track airfares before you buy and save BIG.",
        oneTouchBook: "Introducing 1-touch flight bookings",
        ExpWay: "Expressway",
        BizCabin: "Business",
        EcoCabin: "Economy",
        FCCabin: "First class",
        PECabin: "Premium economy",
        Refundable: "Refundable",
        nonRefundable: "NON Refundable",
        filterPriceTitle: "Price",
        filterStopsTitle: "Stops",
        filterAirTitle: "Airlines",
        filterTripDurTitle: "Trip duration",
        filterFareTitle: "Fare options",
        filterDepartTimeTitle: "Departure time",
        filterRetTimeTitle: "Return time",
        filterLaypDurTitle: "Layover duration",
        BSfilter: "Bs Filter",
        layoverAirport: "Layover airports",
        refFare: "Refundable fare",
        filterCorpFare: "Corporate fare",
        filterNearbyAirportOrigin: "Origin Nearby airports",
        filterNearbyAirportDest: "Destination Nearby airports",
        filterPolicyComplaint: "Show policy compliant flights",
        OptAtSamePrice: " at same price",
        ArrivesNextDay: "Arrives next day",
        Arrives: "Arrives ",
        Day: " day",
        Later: " later",
        ArrivesPrevDay: "Arrives previos day",
        MulCarriers: "Multiple carriers",
        Stops: " stops",
        Stop: " stop",
        NonStop: "non-stop",
        Seat: " seat",
        splRTMsg: '<p class="warn" style="">Cancellation or change of only onward journey is not allowed. <br>Cancellation or change of return journey is allowed only if onward journey is over.</p>',
        B2B: {
            AG: {
                customerCareNumber: {
                    DOM: 'For any assitance please call 022 - 4055 4955 / 1860 233 5000 & press Option 1 on IVR or mail to <a href="mailto:agencysupport@cleartrip.com">agencysupport@cleartrip.com</a> & <a href="mailto:agentbox.help@cleartrip.com">agentbox.help@cleartrip.com</a>.',
                    INTL: 'For any assitance please call 022 - 4055 4955 / 1860 233 5000 & press Option 1 on IVR or mail to <a href="mailto:agencysupport@cleartrip.com">agencysupport@cleartrip.com</a> & <a href="mailto:agentbox.help@cleartrip.com">agentbox.help@cleartrip.com</a>.'
                }
            }
        }
    }
}, CT.messages || {}), !function(e, t, n) {
    n[e] = t(CT.settings.validators);
}("searchForm", function(e) {
    return {
        update: function() {},
        addValidations: function() {
            var e = this;
            (function(e) {
                var t = {}, n = e.find("#ToTag"), r = e.find("#FromTag");
                n && (t.elem = n, t.mess = CT.messages.air.validationSameCity, t.condition = function(e) {
                    return n.next().val() != "" && r.next().val() !== "" && n.next().val() === r.next().val() ? !1 : !0;
                }, n.get(0).validatorObjects || (n.get(0).validatorObjects = []), n.get(0).validatorObjects.push(t));
            })(this.$el), CT.app == "dp" && (function(e) {
                var t = {}, n = e.find("#ToTag");
                $destCode = e.find("#dest_code"), n && (t.elem = n, t.mess = CT.messages.air.CitySuggestion, t.condition = function(e) {
                    return $destCode.val() == "" ? !1 : !0;
                }, n.get(0).validatorObjects || (n.get(0).validatorObjects = []), n.get(0).validatorObjects.push(t));
            }(this.$el), function(e) {
                var t = {}, n = e.find("#FromTag"), r = e.find("#from");
                n && (t.elem = n, t.mess = CT.messages.air.CitySuggestion, t.condition = function(e) {
                    return r.val() == "" ? !1 : !0;
                }, n.get(0).validatorObjects || (n.get(0).validatorObjects = []), n.get(0).validatorObjects.push(t));
            }(this.$el)), function(e) {
                function t(e) {
                    var t = /[0-9]+\/[0-9]+\/([0-9][0-9][0-9][0-9])+/;
                    return t.test(e);
                }
                function n(e) {
                    if (t(e)) {
                        var n = !0, r, i, s, o, u = e, a = "/", f = u.indexOf(a), l = u.lastIndexOf(a);
                        return i = parseInt(u.substring(0, f), 10), r = parseInt(u.substring(f + 1, l), 10) - 1, s = parseInt(u.substring(l + 1), 10), o = new Date(s, r, i), o.getDate() == i ? o.getMonth() == r ? !o.getFullYear() == s && (n = !1) : n = !1 : n = !1, n;
                    }
                    return !1;
                }
                _.each(e.find(".depart_date, .return_date"), function(e) {
                    var t = {}, n, r = $(e);
                    r.attr("validate") || r.attr("validate", "true"), t.elem = r, t.mess = CT.messages.air.DateInformat, t.condition = function(e) {
                        try {
                            if (r.attr("disabled")) return !0;
                            var t = r.nextAll("input"), n;
                            return t.val() == "" && t.val(r.val()), n = t.val(), moment(n, "DD/MM/YYYY", !0).isValid() ? !0 : moment(n, "ddd, DD MMM, YYYY").isValid() ? (t.val(moment(n, "ddd, DD MMM, YYYY").format("DD/MM/YYYY")), !0) : !1;
                        } catch (i) {
                            return !0;
                        }
                    }, r.get(0).validatorObjects || (r.get(0).validatorObjects = []), r.get(0).validatorObjects.push(t);
                });
            }(this.$el), function(e) {
                _.each(e.find(".depart_date, .return_date"), function(e) {
                    var t = {}, n, r = $(e);
                    r.attr("validate") || r.attr("validate", "true"), t.elem = r, t.mess = CT.messages.air.DateIsPast, t.condition = function(e) {
                        try {
                            if (r.attr("disabled")) return !0;
                            var t = r.nextAll("input"), n;
                            t.val() == "" && t.val(r.val()), n = t.val();
                            var i = moment(window.serverCurrentDate).format("MM/DD/YYYY");
                            return n = moment(n, "DD/MM/YYYY").format("MM/DD/YYYY"), (new Date(i)).getTime() <= (new Date(n)).getTime() ? !0 : !1;
                        } catch (s) {
                            return !0;
                        }
                    }, r.get(0).validatorObjects || (r.get(0).validatorObjects = []), r.get(0).validatorObjects.push(t);
                });
            }(this.$el), function(e) {
                var t = {}, n, r, i, i, s = e.find(".depart_date"), o = moment().format("MM/DD/YYYY");
                s.attr("validate") || s.attr("validate", "true"), s && (t.elem = s, t.mess = CT.messages.air.cantFindIntFlight, t.condition = function(u) {
                    n = e.find("#FromTag").val(), $from = e.find("#FromTag").next().val(), r = e.find("#ToTag").val(), $to = e.find("#ToTag").next().val();
                    if (CT.app == "dp") {
                        var a = e.find("#Country").val();
                        return $from && n && n.indexOf(", IN - ") > 0 && $to && a && a == "IN" ? t.mess = CT.messages.air.cantFindDomFlight : t.mess = CT.messages.air.cantFindIntFlight, i = moment(s.nextAll("input").val(), "DD/MM/YYYY").format("MM/DD/YYYY"), i = new Date(i), i.setDate(i.getDate()), _.datesDuration(o, i) >= window.intlSearchToBookDays;
                    }
                    return $from && n && n.indexOf(", IN - ") < 0 || $to && r && r.indexOf(", IN - ") < 0 ? (i = moment(s.nextAll("input").val(), "DD/MM/YYYY").format("MM/DD/YYYY"), i = new Date(i), i.setDate(i.getDate()), _.datesDuration(o, i) >= window.intlSearchToBookDays) : !0;
                }, s.get(0).validatorObjects || (s.get(0).validatorObjects = []), s.get(0).validatorObjects.push(t));
            }(this.$el), this.$el.length > 0 && ((el = this.$el.get(0)).validatesuccess || (el.validatesuccess = this.validateSuccess), el.id === "SearchForm" && (el.validateerror = this.validateerror)), this.$el.get(0).beforevalidate = function() {
                var t = $("#FromTag3") && $("#FromTag3").parents(".searchBox").find("input[type=text]"), n = $("#FromTag4") && $("#FromTag4").parents(".searchBox").find("input[type=text]"), r = $("#FromTag5") && $("#FromTag5").parents(".searchBox").find("input[type=text]");
                t.removeClass("required"), n.removeClass("required"), r.removeClass("required"), _.each([ t, n, r ], function(e) {
                    _.filter(e, function(e, t) {
                        return CT.widgets.validator.getConditions(".required")(e);
                    }).length > 0 && _.each(e, function(e, t) {
                        CT.widgets.validator.getConditions(".required")(e) || $(e).addClass("required");
                    });
                }), e.submitAirForm();
            };
        },
        switchAirports: function(e) {
            var t = $(e.target), n = this.$el.find("#FromTag"), r = this.$el.find("#ToTag"), i = this.$el.find("#From"), s = this.$el.find("#To"), o = n.val(), u = r.val(), a = i.val(), f = s.val();
            o != "" && u != "" && o != n.attr("placeholder") && u != r.attr("placeholder") && (n.parent().addClass("goToRight"), r.parent().addClass("goToLeft"), t.addClass("rotateMe"), window.setTimeout(function() {
                r.val(o), n.val(u), i.val(f), s.val(a), t.removeClass("rotateMe");
            }, 500), window.setTimeout(function() {
                n.parent().removeClass("goToRight"), r.parent().removeClass("goToLeft");
            }, 700));
        },
        getParamsForStaticCall: function(e) {
            function n() {
                var e = "";
                return t.$el[0].id == "SearchForm" ? e = _.filter(t.$el[0].trip_type, function(e) {
                    if (e.checked) return e;
                })[0].value : e = t.$el[0].srpReturnDate.value && t.$el[0].srpReturnDate.value != $(t.$el[0].srpReturnDate).attr("placeholder") ? "RoundTrip" : "OneWay", {
                    from: t.$el[0].from.value,
                    to: t.$el[0].to.value,
                    trip_type: e
                };
            }
            var t = this, r = n();
            return r.to && r.from && r.trip_type && r.trip_type != "MultiCity" ? r : null;
        },
        validateSuccess: function(t) {
            t.preventDefault();
            var n = this, r, s = $(this), o = !0, u = [], a = function(e) {
                $("body").removeClass("roundTrip multiCity splitScreen"), e.intl === "n" && e.trip_type === "MultiCity" && $(".modify.searchBox").hide();
            }, f = function(t) {
                var n = _.deserialize(t);
                $.browser.msie || a(n);
                var r = [ "formatDate" ];
                _.each(r, function(t) {
                    e[t](n);
                });
                if (n.origin) n.intl = _.isUndefined(n.origin.split(",")[1]) || _.isUndefined(n.destination.split(",")[1]) ? "n" : n.origin.split(",")[1].split("-")[0].trim() !== "IN" || n.destination.split(",")[1].split("-")[0].trim() !== "IN" ? "y" : "n"; else {
                    n.intl = "n";
                    for (var i = 1; i < n.num_legs + 1; i++) if (n["origin" + i] && n["origin" + i].split(",")[1].split("-")[0].trim() !== "IN" || n["destination" + i] && n["destination" + i].split(",")[1].split("-")[0].trim() !== "IN") {
                        n.intl = "y";
                        break;
                    }
                }
                return n;
            }, l = function() {
                var e = $("#ToTag");
                return e && s.find('input[name="trip_type"]:checked').val() != "MultiCity" && e.next().val() != "" && $("#FromTag").next().val() !== "" && e.next().val() === $("#FromTag").next().val() && (c(e, CT.messages.air.differentDest), o = !1), o;
            }, c = function(e, t) {
                var n = [];
                n.push({
                    elem: e.get(0),
                    mess: t,
                    name: "custom"
                }), CT.widgets.validator.showErrors(s, n);
            }, h = function(e, t) {
                u.push(e);
                if (u.length === t && u.indexOf(!1) === -1 && l()) {
                    CT.widgets.placeholder.removeLabels(s[0]), $("#SearchBtn").addClass("loading formIsValid"), CT.utils.genericBlocks && CT.utils.genericBlocks.hideLanguagePrefToolTip && CT.utils.genericBlocks.hideLanguagePrefToolTip(), CT.settings.currentTab;
                    var n = f(s.serialize().replace(/&/g, CT.utils.urlDelimiter));
                    if (window.isWL) {
                        var r = CT.settings.routes;
                        CT.utils.helperFunctions.getSEMParams(window.location.search.substring(1), n);
                        var o = r.cleanURLParams($.extend({}, n));
                        o = r.cleanURLParams($.extend({}, n), [ "ver", "type", "trip_type", "srpDepartDate", "srpReturnDate" ]), o = r.cleanURLParams(o, function() {
                            _.each(this, function(e, t, n) {});
                        }), o.rnd_one = n.trip_type == "OneWay" ? "O" : "R", window.location.href = "/flights/search?" + _.serialize(o);
                        return;
                    }
                    window.scrollTo && window.scrollTo(0, 0), CT.fire("recent.update", [ n ]), CT.fire("url.update", [ n ]);
                    try {
                        CT.utils.helperFunctions.trackGAEvent("Flights_TR", "click", "FlightSearchSubmit", "1"), CT.utils.helperFunctions.trackFlightMoengageOnSearch && CT.utils.helperFunctions.trackFlightMoengageOnSearch("fsc", n);
                        var a = n.trip_type == "MultiCity" ? "Multi-city" : n.trip_type == "RoundTrip" ? "RoundTrip" : "One-way";
                        if (a == "Multi-city") {
                            var c = [];
                            for (i = 1; i <= parseInt(n.num_legs); i++) c.push(n["from" + i] + "-" + n["to" + i]);
                        } else var c = [ n.from + "-" + n.to ];
                        var h = CT.utils.helperFunctions.tpTrack({
                            tp: "clevertap",
                            category: "Air_UI_Action",
                            values: {
                                last_event_type: -1,
                                last_page_name: -1,
                                current_page: "flights_home",
                                action_type: "Button",
                                action_name: "search_home",
                                action_value: a,
                                action_value2: c.join(","),
                                is_logged_in: CT.utils.readCTAuthCookie() ? "yes" : "no",
                                source: "web"
                            }
                        });
                    } catch (p) {
                        window.console && console.log(p);
                    }
                }
            }, p = s.find("#AirlineAutocomplete"), d = s.find("#carrier");
            d && d.length > 0 && d.get(0).value === "" && (p.get(0).value = "");
            var v = s.find(".ui-autocomplete-input.keyValue").length;
            s.find(".ui-autocomplete-input.keyValue").each(function(t, n) {
                $inpEle = $(n), $inpEle.val() !== "" && $inpEle.val() !== $inpEle.attr("placeholder") && $inpEle.next().val() === "" || $inpEle.val() === $inpEle.next().val() ? function(t) {
                    e.checkForCityAvailability(t.val()).done(function(n) {
                        e.isValidCity(t, n) || (c(t, CT.messages.air.AirportSuggestion), o = !1), h(o, v);
                    });
                }($inpEle) : h(o, v);
            });
        },
        validateerror: function(e) {
            CT.utils.UILogger && CT.utils.UILogger.setFormErrors(e);
        },
        modifyInfantsDropdowns: function() {
            var e = this.$el.find("#Adults").val(), t = this.$el.find("#Childrens").val(), n = this.$el.find("#Infants").val(), r, i;
            this.$el.find("#Childrens").children().remove(), this.$el.find("#Infants").children().remove();
            for (r = 0; r <= e; r++) i = $("<option/>", {
                value: r,
                text: r
            }), n == r && i.attr("selected", "selected"), this.$el.find("#Infants").append(i);
            for (r = 0; r < 10 - e; r++) i = $("<option/>", {
                value: r,
                text: r
            }), t == r && i.attr("selected", "selected"), this.$el.find("#Childrens").append(i);
        }
    };
}, CT.settings), !function(e) {
    e();
}(function() {
    $.extend(CT.settings || {}, {
        air: {
            showFirstRun: !1,
            rcntSearchTrigger: 3,
            refreshTimeout: 18e5,
            dlEnabled: $.browser.msie && parseInt($.browser.version, 10) <= 8 ? !1 : window.dlEnabled != null ? window.dlEnabled : !0,
            dlCallCounts: 10,
            dlCallCountsIntl: 10,
            dateLessEnabled: !0,
            dlTimeout: 25e3,
            dateCallTimeout: 25e3,
            showFareCalendar: !0,
            runVmoTesting: !1,
            filterApplied: !1,
            newGdsSplrtFare: !0,
            saveFilter: window.enablePersistentFilter ? !0 : !1,
            responseVer: "V2",
            isStickyUI: !0,
            urls: {
                domesticSearch: "/flights/results/airjson",
                intlSearch: "/flights/results/intlairjson",
                multiCitySearch: "/flights/results/mcairjson",
                searchDynLoader: CT.settings.localhost ? "/flightstatic/json/search1.json" : "/flights/results/airjson",
                staticCall: CT.settings.localhost ? "/flightstatic/json/search1.json" : "/flights/results/airjson",
                filterPreference: CT.settings.localhost ? "/flightstatic/json/filterpref.json" : "/filterDetails",
                rSearch: "/{fromCity}-to-{toCity}?{params}",
                pers: "/flightstatic/json/pers-all.json",
                resultsJs: (CT.langUrlPrefix || "") + "/javascripts/_" + window.language + "/search/air.results.min" + window.air_results_min_js_ver + ".js",
                mJsonWk: "/javascripts/_" + window.language + "/search/mJson.wk.min" + window.mJson_wk_min_js_ver + ".js",
                fltSrtWk: "/javascripts/_" + window.language + "/search/fltSrt.wk.min" + window.fltSrt_wk_min_js_ver + ".js",
                miniRule: CT.settings.localhost ? "/flightstatic/json/mini_rule.json" : "/flights/getminirule",
                transitVisa: CT.settings.localhost ? "/flightstatic/json/transit_visa.json" : " /flights/transitvisa",
                baggage: CT.settings.localhost ? "/flightstatic/json/baggage.json" : "/flights/baggageinfo",
                calendarFare: CT.settings.localhost ? "/flightstatic/json/calendar/calendarstub.json" : "/flights/calendar/calendarstub.json",
                checkHoldBookingUrl: "/checkHoldBookingCount"
            },
            searchParamKeys: [ "from", "to", "depart_date", "return_date", "adults", "childs", "infants", "class", "airline", "carrier" ],
            departFilters: [ "0_8", "8_12", "12_16", "16_20", "20_24" ],
            departFiltersConfig: {
                "0_8": {
                    order: 1,
                    text: "Early Morning",
                    time: "12am - 8am"
                },
                "8_12": {
                    order: 2,
                    text: "Morning",
                    time: "8am - 12pm"
                },
                "12_16": {
                    order: 3,
                    text: "Mid-Day",
                    time: "12pm - 4pm"
                },
                "16_20": {
                    order: 4,
                    text: "Evening",
                    time: "4pm - 8pm"
                },
                "20_24": {
                    order: 5,
                    text: "Night",
                    time: "8pm - 12am"
                }
            },
            filter: {
                price: {
                    title: CT.messages.air.filterPriceTitle,
                    hintCheckBoxLabel: CT.messages.air.showRefundFare,
                    hintCheckBoxClass: "refundable",
                    hintCheckBoxCheckAll: !1,
                    priceLockCheckBox: !0,
                    priceLockCheckBoxLabel: window.showPriceLockFilterName,
                    priceLockCheckBoxClass: "pricelock",
                    priceLockCheckBoxCheckAll: !1,
                    corpFareCheckBoxLabel: CT.messages.air.showCorpFare,
                    corpFareCheckBoxClass: "corpFare",
                    corpFareCheckBoxCheckAll: !1,
                    staticRange: !0
                },
                stops: {
                    title: CT.messages.air.filterStopsTitle,
                    inline: "inline",
                    checkAll: !0,
                    elements: []
                },
                airlines: {
                    title: CT.messages.air.filterAirTitle,
                    showAll: !0,
                    checkAll: !0
                },
                fareoptions: {
                    title: CT.messages.air.filterFareTitle,
                    showAll: !0,
                    checkAll: !0
                },
                tripDuration: {
                    title: CT.messages.air.filterTripDurTitle,
                    min: 10,
                    max: 20
                },
                departureTime: {
                    title: CT.messages.air.filterDepartTimeTitle,
                    min: 0,
                    max: 24,
                    step: .25,
                    staticRange: !1
                },
                arrivalTime: {
                    title: CT.messages.air.filterRetTimeTitle,
                    min: 0,
                    max: 24,
                    step: .25,
                    staticRange: !1
                },
                layoverDuration: {
                    title: CT.messages.air.filterLaypDurTitle,
                    min: 10,
                    max: 20
                },
                bsfl: {
                    title: CT.messages.air.BSfilter,
                    checkAll: !1
                },
                layoverairports: {
                    title: CT.messages.air.layoverAirport,
                    showAll: !0
                },
                refundableFare: {
                    title: CT.messages.air.refFare,
                    showAll: !1
                },
                corporateFare: {
                    title: CT.messages.air.filterCorpFare,
                    showAll: !1
                },
                nearbyairportsOrigin: {
                    title: CT.messages.air.filterNearbyAirportOrigin,
                    checkAll: !0
                },
                nearbyairportsDest: {
                    title: CT.messages.air.filterNearbyAirportDest,
                    checkAll: !0
                },
                policyCompliant: {
                    title: CT.messages.airfilterPolicyComplaint,
                    checkAll: !1
                }
            },
            ignoreFilters: {
                dom: {
                    rt: {
                        "0": [ "arrivalTime" ],
                        "1": [ "departureTime" ]
                    },
                    ow: {},
                    mc: {}
                },
                intl: {}
            },
            filterTypes: {
                chkBox: [ {
                    id: "stops",
                    el: ".stops"
                }, {
                    id: "refundable",
                    el: ".refundable",
                    isChkBox: !0
                }, {
                    id: "corpFare",
                    el: ".corpFare",
                    isChkBox: !0
                }, {
                    id: "nearbyairportsOrigin",
                    el: ".nearbyairportsOrigin"
                }, {
                    id: "nearbyairportsDest",
                    el: ".nearbyairportsDest"
                }, {
                    id: "airlines",
                    el: ".airlines"
                }, {
                    id: "bsfl",
                    el: ".bsfl"
                }, {
                    id: "policyCompliant",
                    el: ".policyCompliant"
                }, {
                    id: "pricelock",
                    el: ".pricelock",
                    isChkBox: !0
                }, {
                    id: "fareoptions",
                    el: ".fareoptions",
                    isChkBox: !0
                } ],
                slider: [ {
                    id: "price",
                    el: ".price.rangeSlider"
                }, {
                    id: "tripDuration",
                    el: ".tripDuration.rangeSlider"
                }, {
                    id: "layoverDuration",
                    el: ".layoverDuration.rangeSlider"
                }, {
                    id: "departureTime",
                    el: ".departureTime.rangeSlider"
                }, {
                    id: "arrivalTime",
                    el: ".arrivalTime.rangeSlider"
                } ]
            },
            filterParamList: [ "price", "corpFare", "refundable", "stops", "airlines", "departureTime", "fareoptions", "arrivalTime", "tripDuration", "layoverDuration", "bsfl", "policyCompliant", "pricelock" ],
            sorterParamList: [ "sortType{{idx}}", "sortOrder{{idx}}" ],
            filterHashModifiers: [ "stops", "airlines", "fareoptions", "corpFare", "refundable", "price", "departureTime", "arrivalTime", "nearbyairportsOrigin", "nearbyairportsDest", "topbarClassFilters", "tripDuration", "layoverDuration", "bsfl", "policyCompliant" ],
            cabinTypesMap: {
                B: CT.messages.air.BizCabin,
                E: CT.messages.air.EcoCabin,
                F: CT.messages.air.FCCabin,
                P: CT.messages.air.PECabin
            },
            refundableMap: {
                R: CT.messages.air.Refundable,
                N: CT.messages.air.nonRefundable
            },
            refundableClassMap: {
                R: "refund",
                N: "nonRefund"
            },
            placesUri: "/places/airports/search?string=",
            paramsKeyMapper: {
                abp: "adult_base",
                adtbp: "per_adult_base_price",
                bp: "base_price",
                mi_oadtbp: "out_per_adult_base_price",
                mi_radtbp: "ret_per_adult_base_price",
                mi_obp: "out_base_price",
                mi_rbp: "ret_base_price",
                bundledFareCategory: "bfc",
                ds: "disc",
                fk: "fare_key",
                pr: "price",
                t: "taxes",
                no_legs: "no_legs",
                fare_subtype: "fare_subtype",
                legMapper: {
                    ac: "aircode",
                    oa: "airline",
                    a: "arrives",
                    ad: "arrives_date",
                    ct: "cabin_type",
                    dp: "departs",
                    dpd: "departs_date",
                    fb: "fare_basis",
                    fc: "fare_class",
                    fn: "flt_num",
                    fr: "from",
                    r: "refundable",
                    s: "stops",
                    to: "to",
                    v: "via",
                    arp: "toAirportName",
                    arpc: "toCityName"
                }
            },
            priceAdvisery: {
                duration: 10,
                percentage: 5,
                range: 3,
                pricethreshold: {
                    dom: 5,
                    intl: 10
                }
            },
            firstRunObj: [ {
                comboTabs: {
                    direction: "N",
                    mainHeading: CT.messages.air.RTDiscounts,
                    subHeading: CT.messages.air.saveSpclRTFare,
                    className: "combo"
                }
            }, {
                vIndicator: {
                    direction: "S",
                    mainHeading: CT.messages.air.KnowFlight,
                    subHeading: CT.messages.air.GlanceIdentifyFlight,
                    className: "vi",
                    ele: "vi"
                }
            }, {
                detailsLink: {
                    direction: "E",
                    mainHeading: CT.messages.air.FlighttDetails,
                    subHeading: CT.messages.air.CompltFlightDetails,
                    className: "flightInfo"
                }
            }, {
                miniCalendar: {
                    direction: "E",
                    mainHeading: CT.messages.air.FlexiDates,
                    subHeading: CT.messages.air.SnapofMonth,
                    className: "calendar"
                }
            }, {
                convenientFlights: {
                    mainHeading: CT.messages.air.NonstopFlight,
                    direction: "N",
                    subHeading: CT.messages.air.OnlyNonStopFlight,
                    className: "convenient"
                }
            }, {
                calendarViewLink: {
                    mainHeading: CT.messages.air.SwitchCalView,
                    direction: "N",
                    subHeading: CT.messages.air.seeFullMonthFare,
                    className: "calendar"
                }
            }, {
                primaryBar: {
                    mainHeading: CT.messages.air.newExperience,
                    direction: "N",
                    subHeading: "",
                    takeTour: !0
                }
            } ],
            firstRunEle: [ "comboTabs", "vIndicator", "detailsLink", "miniCalendar", "convenientFlights", "calendarViewLink", "primaryBar" ],
            ignoreCCAirlineCheck: [ "SG", "6E" ],
            splrtLCCAirlineCheck: [ "SG", "6E" ],
            miniRuleUIDevDomain: [ "uidev.cleartrip.com", "dev.cleartrip.com", "manit.cleartripforbusiness.com" ]
        },
        filters: {
            ids: "ids",
            or: [ "stops", "airline" ],
            and: [],
            range: [ "price", "dep", "ret" ],
            attrMap: {
                stops: "data-stops",
                airline: "data-airline",
                fareoption: "data-fareoption",
                price: "data-price",
                dep: "data-dep",
                ret: "data-arr"
            },
            constants: {
                airlineCombinations: {
                    "9W-K": [ "9W-K", "S2" ]
                },
                timeRange: {
                    "1": [ 0, 800 ],
                    "2": [ 801, 1200 ],
                    "3": [ 1201, 1600 ],
                    "4": [ 1601, 2e3 ],
                    "5": [ 2001, 2400 ]
                },
                starAlliance: [ "JP", "AC", "CA", "NZ", "NH", "OZ", "OS", "KF", "BD", "SN", "CO", "OU", "MS", "LO", "LH", "SK", "FM", "SQ", "SA", "JK", "LX", "TP", "TG", "TK", "UA", "US" ],
                skyTeam: [ "SU", "AM", "UX", "AF", "AZ", "CZ", "OK", "DL", "KQ", "KL", "KE" ],
                oneWorld: [ "AA", "BA", "CX", "AY", "IB", "JL", "LA", "MA", "QF", "RJ", "MX" ]
            }
        },
        dates: {
            shortNames: {
                months: [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ],
                days: [ "Sun", "Mon", "Tue", "Wed", "Thr", "Fri", "Sat" ]
            }
        },
        upsell: {
            domestic: [ {
                title: CT.messages.air.Mobile,
                desc: CT.messages.air.getMobile,
                link: "http://www.cleartrip.com/mobile"
            }, {
                title: CT.messages.air.IntroducingPkg,
                desc: CT.messages.air.bookFlightHotelTogether,
                link: "/packages"
            } ],
            intl: [ {
                title: CT.messages.air.Mobile,
                desc: CT.messages.air.getMobile,
                link: "http://www.cleartrip.com/mobile"
            }, {
                title: CT.messages.air.IntroducingPkg,
                desc: CT.messages.air.bookFlightHotelTogether,
                link: "/packages"
            } ],
            AE: [ {
                title: CT.messages.air.fareAlerts,
                desc: CT.messages.air.trackAirlinesAndSave,
                link: "http://www.cleartrip.com/alerts/?ref=SRP"
            }, {
                title: CT.messages.air.IntroducingPkg,
                desc: CT.messages.air.bookFlightHotelTogether,
                link: "/packages"
            } ],
            ME: [ {
                title: CT.messages.air.fareAlerts,
                desc: CT.messages.air.trackAirlinesAndSave,
                link: "http://www.cleartrip.com/alerts/?ref=SRP"
            }, {
                title: CT.messages.air.ExpWay,
                desc: CT.messages.air.oneTouchBook,
                link: "/expressway/?ref=SRP"
            } ]
        },
        urlDelimiter: "&"
    });
    try {
        CT.settings.air.isStickyUI && (CT.settings.air.filter.stops = {
            title: CT.messages.air.filterStopsTitle,
            inline: "inline",
            checkAll: !1,
            elements: [],
            addAltFiltersClass: !0,
            altFiltersClass: "smartFilters horizontal",
            smartFilterCheckBox: 1
        }, CT.settings.air.filter.departureTime = {
            title: CT.messages.air.filterDepartTimeTitle,
            masterValues: {},
            inline: "inline",
            checkAll: !1,
            elements: [],
            addAltFiltersClass: !0,
            altFiltersClass: "smartFilters vertical",
            smartFilterCheckBox: 1
        }, CT.settings.air.filter.arrivalTime = {
            title: CT.messages.air.filterRetTimeTitle,
            masterValues: {},
            inline: "inline",
            checkAll: !1,
            elements: [],
            addAltFiltersClass: !0,
            altFiltersClass: "smartFilters vertical",
            smartFilterCheckBox: 1
        }, _.each(CT.settings.air.departFiltersConfig, function(e, t) {
            e.html = e.text + '<span class="fRight">' + e.time + "</span>", CT.settings.air.filter.departureTime.masterValues[t] = CT.settings.air.filter.arrivalTime.masterValues[t] = e;
        }), CT.settings.air.filterTypes.chkBox.push({
            id: "departureTime",
            el: ".departureTime"
        }), CT.settings.air.filterTypes.chkBox.push({
            id: "arrivalTime",
            el: ".arrivalTime"
        }), CT.settings.air.filterTypes.slider.splice(3, 2), window.sessionStorage && (window.sessionStorage.stickyFilter = 1));
    } catch (e) {
        window.console && console.log("sticky filter error:" + e.message);
    }
}), CT = function(e) {
    function s(e) {
        var t = {
            adults: 1,
            childs: 0,
            infants: 0,
            ver: "V2",
            type: "json",
            "class": "Economy",
            airline: "",
            carrier: "",
            search_ver: "V2",
            dls: "y"
        };
        return window.productCode === "CP" && (t.source = "CORP"), _.extend({}, e, t);
    }
    function o(e) {
        return e.from + "_" + e.to + "_" + e.trip_type;
    }
    function u(e, o) {
        e = s(e), window.companyId && (e.companyid = window.companyId), n || (n = CT.settings[CT.app].urls.staticCall), $.ajax({
            url: n,
            data: e
        }).done(function(e) {
            var n = _.indexOf(i, o);
            n != -1 && i.splice(n, 1);
            if (e !== "" && e !== null && e !== undefined && typeof e == "string") try {
                e = JSON.parse(e), e.mJson && (e.isIntl != null && (e.mJson.jsons.searchType.isIntl = e.isIntl), e = e.mJson), e.jsons && e.jsons.intlSearchToBookDays != null ? window.intlSearchToBookDays = e.jsons.intlSearchToBookDays : e.intlSearchToBookDays != null && (window.intlSearchToBookDays = e.intlSearchToBookDays);
            } catch (s) {
                e = "";
            }
            e && _.keys(e.mapping).length > 0 && (t[o] = e, _.each(r, function(e) {
                o == e.key && e.onGetData(t[o]);
            }));
        });
    }
    function f(e) {
        function t() {
            setTimeout(function() {
                if (_.indexOf(e.mandateElements, document.activeElement) == -1) {
                    var t = e.getParams();
                    t && t.from != t.to && a.fetch(t);
                }
            }, 10);
        }
        CT.settings[CT.app].dateLessEnabled && ($(e.$el.find("input[type='text'], input[type='radio'], select")).blur(t), $(e.$el.find("input[type='radio']")).change(t));
    }
    function l(e) {}
    var t = {}, n = "", r = [], i = [], a = {
        initialize: function() {},
        fetch: function(e) {
            var n = o(e);
            !t[n] && _.indexOf(i, n) == -1 ? (i.push(n), u(e, n)) : t[n], clearTimeout(this.fetchFilterPreferenceTimer), this.fetchFilterPreferenceTimer = setTimeout(function() {
                CT.fire("fetchFilterPreference");
            }, 1e3);
        },
        getData: function(e, n) {
            var i = o(e), s = t[i];
            s ? n(s) : (r = [], r.push({
                key: i,
                onGetData: n
            }));
        },
        getCache: function() {
            return t;
        }
    };
    return e.StaticResultsModel = a, e.StaticResultsView = {
        bind: f,
        unbind: l
    }, e;
}(CT || {}), !function(e) {
    e(CT.settings.searchForm, CT.View, Mustache, CT.Store, CT.Pers);
}(function(e, t, n, r, i) {
    var s, o = function() {
        s = CT.cache.views.searchForm = t({
            $el: $("#SearchForm"),
            initialize: function() {
                var e = this;
                this.addValidations(), $("body").removeClass("srp").addClass("home");
                var t = {
                    $el: e.$el,
                    mandateElements: [ e.$el[0].origin, e.$el[0].destination ].concat(_.map(e.$el[0].trip_type, function(e) {
                        return e;
                    })),
                    getParams: e.getParamsForStaticCall
                };
                window.location.search.indexOf("ui=v3") != -1 && !_.find(this.$el.elements, function(e) {
                    return e.name == "ui";
                }) && this.$el.prepend('<input type="hidden" name="ui" value="v3" />'), $("#FromTag").attr("name", "origin"), $("#ToTag").attr("name", "destination"), $('<input id="From" type="hidden" name="from" value="">').insertAfter("#FromTag"), $('<input id="To" type="hidden" name="to" value="">').insertAfter("#ToTag"), $('<input type="hidden" name="intl" />').insertBefore(this.$el.find('[type="submit"]')), $("#DepartDate, #ReturnDate").removeAttr("name"), $('<input type="hidden" class="dateField" name="depart_date" id="FromDate" />').insertAfter("#DepartDate"), $('<input type="hidden" class="dateField" name="return_date" id="ToDate" />').insertAfter("#ReturnDate"), CT.StaticResultsView.bind(t), this.$elViewController = this.$el.parents(".viewController");
            },
            subscriptions: {
                "searchForm.update": "renderSearchForm"
            },
            render: function() {
                $("#Result, #Interstitial").hide(), $("#Home, #GlobalNav, footer").show(), $(".srpOverlay,#srpOverlayWarning").hide(), $("body").removeClass("calendarView srp").addClass("home"), CT.widgets.placeholder.parseDomTree(this.$el);
                try {
                    CT.utils && CT.utils.trackers && CT.utils.trackers.page_count(window.pageName == "home" ? {
                        n: "ho",
                        p: "ad"
                    } : {
                        n: "si",
                        p: "ad"
                    }), CT.utils.trackers.ctanalyticsTrackingData("Flights_TS", "Page_Viewed", "Home_Page_Loaded", {}, "page_load"), CT.utils.helperFunctions.tpTrack({
                        tp: "clevertap",
                        category: "Air_PageLoad",
                        values: {
                            last_event_type: -1,
                            last_page_name: -1,
                            page_name: "flights_home",
                            source: "web",
                            page_load_time: (new Date).getTime() - window.pageLoadStartTime
                        }
                    });
                } catch (e) {}
            },
            events: {
                "click .tripType": "makeSelectedTrip",
                "click .switchFields": "switchAirports",
                "click #McAddMore": "addMoremultiCity",
                "change #Adults": "modifyInfantsDropdowns",
                "putSelectedDate input.dateField": "putSelectedDate",
                "click #MoreOptionsLink": "ToggleMoreOptions",
                "click .removeRow a": "removeMCSearchField",
                updateTabIndices: "updateTabIndices",
                "blur #AirlineAutocomplete": "updateAirlineField"
            },
            updateTabIndices: function() {
                var e = 0;
                return this.$("input, select").not('[type="hidden"], :hidden').map(function() {
                    $(this).attr("tabindex", ++e);
                }), this;
            },
            removeMCSearchField: function(e) {
                return $target = $(e.target), $target.parents("section.row").remove(), curMaxMcField = that.$el.find("#MultiTrip").find("section.row"), curMaxMcField.length > 2 && $(curMaxMcField[curMaxMcField.length - 1]).append('<div class="col col1 removeRow"><a href="javascript:void(0);"><i class="remove"></i></a><div class="col col6 removeRow">'), curMaxMcField.length <= 5 && this.$el.find(".addMcRow").show(), this.alterFormHeight(), !1;
            },
            ToggleMoreOptions: function(e) {
                var t, n = this.$el.find("#moreOptions"), r = e.target.tagName.toLowerCase() === "a" ? $(e.target) : $(e.target).parents("a");
                r.find("i").hasClass("dArrow") ? r.find("i").removeClass("dArrow").addClass("rArrow") : r.find("i").removeClass("rArrow").addClass("dArrow"), n.toggle(), this.$el.trigger("updateTabIndices"), this.alterFormHeight();
            },
            submitAirForm: function() {
                window.airjsonXhr ? window.airjsonXhr.abort() : "", this.$el.find("#OneWay").attr("checked") == "checked" && ($retDateObj = this.$el.find("#ReturnDate"), $retDateObj.attr("disabled", "disabled"));
                if (this.$el.find("#MultiCity").attr("checked") == "checked") {
                    var e, t = this.$el.find("#McNumLegs");
                    $mcDiv = this.$el.find("#MultiTrip"), $dpd = $mcDiv.find(".depart_date"), e = _.filter($dpd, function(e) {
                        return $(e).val() != "" && $(e).val() !== $(e).attr("placeholder");
                    }).length, t[0] || this.$el.append(t = $('<input type="hidden" name="num_legs" id="McNumLegs" />')), t.val(e);
                }
            },
            updateAirlineField: function(e) {
                e.target.value.length === 0 && $(e.target).next().val("");
            },
            changeTrip: function() {
                this.$el.find("#RoundTrip").trigger("click");
            },
            addMoremultiCity: function() {
                that = this, this.addMultiCityRow(that.$el.find("#MultiTrip").find("section.row").length + 1), CT.widgets.placeholder ? CT.widgets.placeholder.parseDomTree(that.$el.find("#MultiTrip").find("section.row").last()) : null, that.alterFormHeight(), this.$el.trigger("updateTabIndices");
            },
            renderOneWay: function(e) {
                this.$el.find(e.toDate).parents("dl").addClass("faded").end().attr("disabled", "disabled"), this.$el.find(e.retTime).parents("dl").hide(), this.$el.find(e.retDate).attr("tabindex", -1).parents("dl").hide(), this.$el.find(e.moreOptions).show(), this.$el.find(e.retDate).val(""), this.$el.find("#PaxBlock").find("div.mulField").addClass("andAhalf"), this.$el.find("#PaxBlock").find("#multiFlClass").addClass("col13"), this.$el.trigger("updateTabIndices");
            },
            renderRoundTrip: function(e) {
                var t = Number($(e.pdDate).attr("tabindex"));
                this.$el.find(e.toDate).removeAttr("disabled", "disabled").parents("dl").removeClass("faded").end(), this.$el.find(e.retTime).parents("dl").show(), this.$el.find(e.retDate).attr("tabindex", ++t).parents("dl").show(), this.$el.find(e.moreOptions).show(), this.$el.find("#PaxBlock").find("div.mulField").addClass("andAhalf").end().find("multiFlClass").addClass("col13");
                var n = this.$el.find(e.pdDate), r = this.$el.find(e.fromDate);
                n.val() != "" && (this.$el.find(e.retDate).datepicker("option", "minDate", n.val()), this.$el.find(e.retDate).val(n.val()), this.$el.find(e.toDate).val(r.val()), CT.widgets.placeholder ? CT.widgets.placeholder.setLabel(this.$el.find(e.retDate)[0]) : null), this.$el.trigger("updateTabIndices");
            },
            prefillMultiCityFromField: function(e) {
                that = this, $currSection = that.$el.find("#MultiTrip").find("section.row")[e - 1], $fromField = $($currSection).find("input")[0], $($fromField).on("focus", function() {
                    $prevSection = $(this).parents("section.row").prev();
                    if ($prevSection) {
                        $prevToField = $($prevSection.find("input")[2]);
                        if ($(this).get(0).value === "" || $(this).get(0).value === $(this).attr("placeholder")) $(this).val($prevToField.val()), CT.widgets.placeholder ? CT.widgets.placeholder.setLabel(this) : null, $(this).next().val($prevToField.next().val());
                    }
                }), that.$el.find("#PaxBlock").find("select").removeAttr("tabindex"), that.$el.find("#PaxBlock").find("div.andAhalf").removeClass("andAhalf").addClass("mulField"), that.$el.find("#PaxBlock").find("#multiFlClass").removeClass("col13");
            },
            addMultiCityRow: function(e, t) {
                var n, r = this, t = t || "", i = "";
                n = r.$el.find("#MultiTrip").find("section.row"), n.length > 1 && n.length === e - 1 && ($(n[n.length - 1]).find(".removeRow").remove(), i = "<a href='javascript:void(0);'><i class='remove'></i></a>"), mcHtml = CT.to_html("MCSearchField", {
                    idx: e,
                    cls: t,
                    removeBtnHTML: i
                }), r.$el.find("#MultiTrip .addMcRow").before(mcHtml);
                var s = r.$el.find("#MultiTrip").find("#DepartDate" + (e - 1)), o = r.$el.find("#MultiTrip").find("#DepartDate" + e);
                o.ctdatepicker(), r.$el.find("#MultiTrip").find("#FromTag" + e).autocomplete(), r.$el.find("#MultiTrip").find("#ToTag" + e).autocomplete(), n.length > 1 && n.length === e - 1 && setTimeout(function() {
                    o && o.datepicker("option", "minDate", s.val());
                }, 500), e > 1 && r.prefillMultiCityFromField(e);
                if (n.length >= 5) return this.$el.find(".addMcRow").hide(), !1;
            },
            renderMultiCity: function(e) {
                this.$el.find(e.owRet).hide(), this.$el.find(e.multi).show(), this.$el.find("#MultiTrip").find(".searchBox").length === 0 && (this.addMultiCityRow(1, "required"), this.addMultiCityRow(2, "required"), this.addMultiCityRow(3, "")), CT.widgets.placeholder ? CT.widgets.placeholder.parseDomTree(that.$el.find("#MultiTrip")) : null, $flClassDiv = this.$el.find(e.flClass).clone(), $flClassDiv.removeClass("col8").addClass("col6").attr("id", "multiFlClass"), this.$el.find(e.paxBlock).append($flClassDiv), this.$el.find(e.moreOptions).hide(), this.resetElements(this.$el.find(e.owRet), !0), this.resetElements(this.$el.find(e.moreOptions), !0), this.resetElements(this.$el.find(e.multi), !1), this.$el.find("#PaxBlock").find("select").removeAttr("tabindex"), this.$el.find("#PaxBlock").find("div.andAhalf").removeClass("andAhalf").addClass("mulField"), this.$el.find("#PaxBlock").find("#multiFlClass").removeClass("col13"), this.$el.trigger("updateTabIndices");
            },
            renderPackages: function() {
                window.location.href = "/packages";
            },
            makeSelectedTrip: function(e) {
                var t = e && $(e.target).closest("label").attr("for") || "OneWay", n = this, r = {
                    owRet: "#ORtrip",
                    multi: "#MultiTrip",
                    toDate: "#ToDate",
                    fromDate: "#FromDate",
                    retTime: "#RetTime",
                    origin: "#FromTag",
                    destination: "#ToTag",
                    airSwitch: ".switchFields",
                    retDate: "#ReturnDate",
                    pdDate: "#DepartDate",
                    flClass: "#FlClass",
                    paxBlock: "#PaxBlock",
                    moreOptions: "#MoreOptionsDiv"
                }, i;
                e && t === "MultiCity" && window.location.pathname.indexOf("results") == -1 ? CT.utils.helperFunctions.trackGAEvent("Flights_TS", "click", "MultiCity", 100) : e && t == "RoundTrip" && window.location.pathname.indexOf("results") == -1 ? CT.utils.helperFunctions.trackGAEvent("Flights_TS", "click", "RoundTrip", 100) : e && t == "OneWay" && window.location.pathname.indexOf("results") == -1 ? CT.utils.helperFunctions.trackGAEvent("Flights_TS", "click", "OneWay", 100) : e && t == "Packages" && window.location.pathname.indexOf("results") == -1 && CT.utils.helperFunctions.trackGAEvent("Flights_TS", "click", "Packages", 100), n.$el.find(r.owRet).show(), n.$el.find(r.multi).hide(), n.resetElements(n.$el.find(r.owRet), !1), n.resetElements(n.$el.find(r.moreOptions), !1), n.resetElements(n.$el.find(r.multi), !0), n.$el.find("#multiFlClass") && n.$el.find("#multiFlClass").remove(), n.$el.find("#" + t).attr("checked", "checked"), n.$el.find(r.airSwitch).removeClass("faded"), n["render" + t](r), n.alterFormHeight(), e && e.stopPropagation();
            },
            alterFormHeight: function() {},
            resetElements: function(e, t) {
                e.find("INPUT, SELECT, TEXTAREA").each(function(e, n) {
                    $(n).attr("disabled", t);
                });
            },
            putSelectedDate: function(e) {
                var t = $(e.target).val(), n = $(e.target).prevAll("input");
                n.parent("dl").hasClass("faded") && n.parent("dl").removeClass("faded"), t && $.datepicker._setDateDatepicker(n.get(0), moment(t, "DD/MM/YYYY").format("ddd, DD MMM, YYYY")), n.attr("id") === "ReturnDate" && n.attr("tabindex", 8);
            },
            renderOptionalField: function(e) {
                sForm = this.$el.get(0);
                var t = !1;
                $([ "class", "airline", "carrier" ]).each(function(n, r) {
                    e[r] !== "Economy" && e[r] !== "" && e[r] !== undefined && (t = !0);
                }), t && $("#MoreOptionsLink").trigger("click");
            },
            renderSearchForm: function(e) {
                var t, n, i = this, s, o, u = (new Date).getTime(), a = [ "origin", "destination", "from", "to" ], f = this.$el.get(0), t = r("Recents").get("lastFormSearch" + (CT.langUrlPrefix || ""));
                if (typeof t == "undefined") return i.makeSelectedTrip(), !1;
                t.length > 0 && (t = _.first(t));
                if (window.product != "B2B") {
                    var l = t.depart_date && new Date(CT.utils.tweakDate(t.depart_date)) < new Date(moment().format("MM/DD/YYYY"));
                    a = a.concat([ "adults", "childs", "infants", "class", "airline" ]);
                } else var l = (t.sd && u - t.sd) > 36e5;
                if (t.trip_type !== "MultiCity" && l) return $("#" + t.trip_type).trigger("click"), _.each(a, function(e) {
                    $(document.activeElement).is(f[e]) || (f[e].value = t[e]);
                }), this.renderOptionalField(t), !1;
                if (t.trip_type === "MultiCity" && new Date(moment().format("MM/DD/YYYY")) > new Date(moment(t.sd).format("MM/DD/YYYY"))) return i.makeSelectedTrip(), !1;
                _.deserialize(window.location.search.substring(1)).l == "ar" || CT.utils.cookies.read("lp") == "ar" ? (t.depart_date = "", t.return_date = "") : _(t).map(function(e, n) {
                    n === "depart_date" && new Date(CT.utils.tweakDate(e)) < new Date(moment().format("MM/DD/YYYY")) && (t.depart_date = "", t.return_date = "");
                }), e && $("#" + t.trip_type).trigger("click"), o = Number(t.num_legs), o > 3 && _.times(o, function(e) {
                    e += 1, e > 3 && i.addMultiCityRow(e, "");
                }), _.each(t, function(e, t) {
                    f[t] && ($(document.activeElement).is(f[t]) || (f[t].value = e, $(f[t]).trigger("putSelectedDate"))), t == "adults" && i.modifyInfantsDropdowns();
                }), this.renderOptionalField(t), CT.widgets.placeholder.parseDomTree(i.$el);
            },
            _fetchFilterPreference: function(e) {
                try {
                    if (window.airFilterPersonalize) {
                        e = _.deserialize($(this.$el).serialize());
                        if (!window.localStorage) return;
                        var t = $(this.$el).find("#DepartDate");
                        if (!t.length || t.prop("placeholder") == t.val()) return;
                        var r = $(this.$el).find("#ReturnDate");
                        if (e.trip_type == "RoundTrip" && (!r.length || r.prop("placeholder") == r.val())) return;
                        if (!e.depart_date || e.trip_type == "RoundTrip" && !e.return_date) return;
                        var i = e.depart_date + (e.trip_type == "RoundTrip" ? "_" + e.return_date : ""), s = e.from + "_" + e.to;
                        if (n[s + "-" + i]) return;
                        $.ajax({
                            url: CT.settings[CT.app].urls.filterPreference,
                            type: "POST",
                            data: JSON.stringify(e),
                            contentType: "application/json; charset=utf-8",
                            dataType: "json"
                        }).done(function(e) {
                            typeof e.abShow == undefined ? e.show = !0 : e.show = e.abShow, o = e;
                            if (window.localStorage.airFilters) {
                                var t = JSON.parse(window.localStorage.airFilters);
                                if (t.sectors && t.sectors[s] && t.sectors[s].sd && t.sectors[s].sd[i]) return !1;
                            }
                            e.enabled && !$.isEmptyObject(e.filters) && (n[s + "-" + i] = e.filters);
                        });
                    }
                } catch (u) {
                    L(u);
                }
            }
        }, e), s.fire("searchForm.update", [ new i ]), window.location.href.indexOf("results") < 0 && s.render();
        if (window.product != "B2B" && !window.isWL) {
            var n = {}, o = {};
            CT.subscribe("fetchFilterPreference", s._fetchFilterPreference), CT.fire("fetchFilterPreference"), CT.subscribe("getFilterPreference", function(e, t) {
                t(n[e], o);
            });
        }
    };
    return $.isReady ? o() : $(o), s;
});;try{if(_cleartrip["air.form"]) _cleartrip["air.form"]()	} catch(e){_cleartrip.alert({ fileName : "air.form" + ".min.js", error : e })}preCT.destroy();window.CT=window.CT||{},CT.utils=CT.utils||{},CT.utils=$.extend(CT.utils,{fasterDOMInsert:function(e,t,n){var r=document.createDocumentFragment(),i=document.createElement("div"),s;i.innerHTML=e;while(s=i.firstChild)r.appendChild(s);t&&(n||((t.get?t.get(0):t).innerHTML=""),t.appendChild(r)),r=null},abTest:function(){var e=$("body");(e.hasClass("air")||e.hasClass("hotel"))&&(e.hasClass("home")||e.hasClass("srp"))&&$.ajax({url:"/ctanalytics/getabtestconfig",type:"GET",success:function(){},error:function(){}})},getAbTestCookie:function(e){try{var t=CT.utils.cookies.read("ct-ab");t&&(t=JSON.parse(decodeURIComponent(t)),e&&(t=t[e]))}catch(n){var t=null}return t},reset:function(e,t){var n=Object.prototype.toString;return t=t||[],n.call(e)==="[object Array]"?e.length=0:n.call(e)==="[object Object]"&&_.each(e,function(n,r){e.hasOwnProperty(r)&&t.indexOf(r)===-1&&delete e[r]}),e},getRetinaImage:function(){return CT.retinaSupported=window.devicePixelRatio>1,function(e){return CT.retinaSupported?e+"2x":e}}(),getRandomNumberArray:function(){var e=[];while(e.length<8){var t=Math.ceil(Math.random()*8),n=!1;for(var r=0;r<e.length;r++)if(e[r]==t){n=!0;break}n||(e[e.length]=t)}return e},createCollectionsUpSell:function(e,t,n){var r=$.extend({limit:4},n||{});if(e!="static"){var t=t||$("#collectionUpsellSection");if(!t[0])return!1;$.ajax({url:"/smallworld/random_collections"}).done(function(e){try{var n=JSON.parse(e),i=t.find(".collectionAssets"),s="";for(var o=0;o<r.limit;o++){var u=n[o];document.location.href.indexOf("collections")!=-1?s+='<li class="col '+(r.limit==4?"col6":"col8")+'"><a href="'+u.url+"\" onclick=\"CT.utils.helperFunctions.trackGAEvent('collections_referral', 'Collections', '"+u.url+'\');" ><h2 class="theSans">'+u.name+'</h2><img src="'+u.image+'"></a></li>':s+='<li class="col '+(r.limit==4?"col6":"col8")+'"><a href="'+u.url+"\" onclick=\"CT.utils.helperFunctions.trackGAEvent('collections_referral', 'account', '"+u.url+'\');" ><h2 class="theSans">'+u.name+'</h2><img src="'+u.image+'"></a></li>'}i.html(s),t.show()}catch(a){}})}else if(e=="static"){var i='<div class="collectionUpsell" style="display:none;"><h3>Wondering where to go?<small> Get inspired by Collections </small></h3><a href="'+(window.productCode=="CP"?"http://www.cleartrip.com/collections":"/collections")+"\" onclick= \"CT.utils.helperFunctions.trackGAEvent('collections_referral', 'account ', '"+window.location.protocol+"//"+window.location.host+'/collections\');" target="_blank">'+'<span class="collectionUpsellPoweredby"></span>'+' <ul id="collectionUpsellTileList" ></ul>'+"</a>"+"</div>",s=this.getRandomNumberArray(),o="";_.each(s,function(e){o+='<li><img src="/images/collections/assets/'+e+'.jpg"></li>'}),t.find(".collectionUpsell")[0]||t.append(i),t.find(".collectionUpsell").find("#collectionUpsellTileList").html(o).end().show(),$("#collectionUpsellTileList li").each(function(e,t){var n=Math.random()-.5,r=Math.random()-.5;$(t).css({top:n*30,left:r*30}).addClass("animateTile").bind("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",function(e){$(this).css("margin-top","0")})})}},wallet:{getUserWalletBallance:function(e,t,n){try{var r=$.Deferred();return $.ajax({url:"/effectivePricingDetails",data:{intl:e.intl},type:"get",timeout:e.timeout||1e4,dataType:"json",success:function(e){CT.cache.userWalletBalance=0,CT.cache.showUserWalletBalanceBanner=!1,e.enabled&&(e.isLoggedIn&&e.wallet_balance>=1?(CT.cache.userWalletBalanceInDisableState=e.wallet_balance,CT.cache.userWalletBalance=e.wallet_balance,e.show===!1&&delete CT.cache.userWalletBalance):!e.isLoggedIn&&e.hasBalance&&e.wallet_balance>=1&&(CT.cache.showUserWalletBalanceBannerInDisableState=e.hasBalance,CT.cache.showUserWalletBalanceBanner=e.hasBalance,e.show===!1&&delete CT.cache.showUserWalletBalanceBanner)),t(e)},error:function(e){n?n(e):!1}}).always(function(e){r.resolve()}),r}catch(i){return n(i),$.Deferred().resolve()}},applyWalletBalance:function(e,t){return t?e-t<0?e:t:0},setWalletObject:function(e,t){this.getUserWalletBallance({},function(n){e.progress=!1,e=$.extend(e,n),e.enabled=e.enabled&&(e.hasBalance||CT.cache.userWalletBalance>0),e.hasBalance=CT.cache.userWalletBalance>0,t?t(e):!1},function(n){e.progress=!1,t?t(e):!1})},debitWalletBalance:function(e,t,n,r,i){var s=0,o=n&&n.hasBalance&&n.enabled,u=!0;if(o){var a=n.wallet_balance;r&&i&&(a/=i),e>a?(e-=a,n.wallet_balance<=450&&(u=!1),t+=a,s=0):e<=a&&(n.wallet_balance<=450&&(u=!1),t+=e,s=a-e,e=0)}return{total:e,discount:t,remainingWalletBalance:s,walletEnabled:o,hideSaving:u}},createWalletMarkup:function(e,t){if(e&&e.enabled&&e.isLoggedIn){if(!e.hidePopup){var n=CT.to_html("walletBannerTpl",e);$("body").prepend(n),setTimeout(function(){$(".js-walletSideBanner").toggleClass("is-showing")},1e3),$(".walletBanner__close").on("click",function(t){e.hidePopup=!0,$(".js-walletSideBanner").remove()})}}else if(t){var n=CT.to_html("walletBannerTpl",e),r=$(".hotelsList ul li.listItem");r.length===1?$(r[0]).after(n):$(r[1]).after(n)}}},serviceWorker:{init:function(e,t){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){window.__serviceWorkerInitialized=!0,e(CT.utils.serviceWorker.sendMessageToServiceWorker(t))})},sendMessageToServiceWorker:function(e){function t(e){return new Promise(function(t,n){var r=new MessageChannel;r.port1.onmessage=function(e){e.data.error?n(e.data.error):t(e.data)},navigator.serviceWorker.controller?navigator.serviceWorker.controller.postMessage(e,[r.port2]):console.warn("Unable to pre-cache")})}if(!!window.__serviceWorkerInitialized)return t(e);if(window.Promise)return new Promise(function(t,n){CT.utils.serviceWorker.init(t,e)})}},helperFunctions:{disableRightClickOnElement:function(e){e!==undefined&&(e instanceof jQuery||(e=$(e)),e.bind("contextmenu",function(e){return!1}))},trackScroll:function(){if(window.mixpanel&&$scroll_count!=0){var e="";window.location.pathname.indexOf("/results")==-1&&(window.location.pathname.indexOf("/details")!=-1?e="H_Details_Scrolled":window.location.pathname.indexOf("/itinerary")==-1&&(window.location.pathname.indexOf("/confirmation")!=-1?e="H_Confirmation_Scrolled":e="Hotel_HomePage_Scrolled")),CT.utils.helperFunctions.trackMixpanelEvent(e,{timesScrolled:$scroll_count}),$scroll_count=0}},queryToObj:function(e){var t=unescape(e),n=t.split("&"),r={},i;try{for(i in n)if(n[i]&&n[i].split("=")){var s=n[i].split("=");s[0]&&(r[s[0]]=s[1])}}catch(o){}return r},disableForm:function(e,t){if(t){var n=t.form;$(n.elements).each(function(t,n){e==1?(n.ctEnableState=n.disabled,n.disabled=!0):n.disabled=n.ctEnableState})}},urlContainsScriptTag:function(){return(new RegExp(/<script>/)).test(decodeURIComponent(window.location.href))},loadHeapTracking:function(){window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t;var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r);for(var i=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},s=["clearEventProperties","identify","setEventProperties","track","unsetEventProperty"],o=0;o<s.length;o++)heap[s[o]]=i(s[o])}},animateTotalFare:function(e,t,n,r){function i(){if($(e).length>0){var i=$(e).find("span#counter");n?(i.each(function(e){var n=$(this)[0];if(isNaN(n.innerHTML)||n.innerHTML==" "||$.trim(n.innerHTML)=="")n.innerHTML=0;totalFx=new CashRegister(n,r),totalFx.start(t)}),i.addClass("highlightMe"),setTimeout(function(){i.hasClass("highlightMe")&&i.removeClass("highlightMe")},1e3)):i.html(CT.stringFormatting.formatForCurrency(t,"",!0))}CT.utils.helperFunctions.convertCurrency&&CT.utils.helperFunctions.convertCurrency(t)}i()},imageToDiv:function(e,t,n,r,i){var s=$("<div></div>"),t=$(t),e=$(e);i||(i={},i.width=t.width(),i.height=t.height());for(var o=0,u=n.length;o<u;o++)s.attr(n[o],t.attr(n[o]));var a=t.attr("src").replace("(","\\(").replace(")","\\)");s.css({"background-image":"url("+a+")"}),s.addClass("imgPlaceHolder"),e.append(s),t.remove(),s.css("opacity",0).animate({opacity:1,visibility:"visible"},.5)},setupBoldChatOnLoad:function(){window._bcvma=window._bcvma||[],_bcvma.push(["setAccountID","172076787582913969"]),_bcvma.push(["setParameter","WebsiteID","171271469539519529"]),_bcvma.push(["setParameter","InvitationID","171271469951842927"]),_bcvma.push(["pageViewed",document.location.href,document.referrer]);var e=function(){if(window.bcLoaded)return;window.bcLoaded=!0;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://":"http://")+"vmss.boldchat.com/aid/172076787582913969/bc.vms4/vms.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)};window.pageViewer&&pageViewer.load?pageViewer.load():document.readyState=="complete"?e():window.addEventListener?window.addEventListener("load",e,!1):window.attachEvent("onload",e)},calTimeDiff:function(e,t){function r(e,t){var n=new Date;return n.setDate(e[0]||1),n.setMonth(parseInt(e[1])-1||1),n.setYear(e[2]||1910),n.setHours(t[0]||0),n.setMinutes(t[1]||0),n.setSeconds(t[2]||0),n}var n={},i=(new Date).getTime(),s=r(e,t),o=(s.getTime()-i)/1e3;if(o>0){var u=o/60,a=u/60,f="";if(a>=24){var l=a/24,c=(l-Math.floor(l))*24;Math.floor(c*60)!=0?(f=Math.floor(a/24)+"d ",c<1?f+=Math.floor(c*60)+"min":f+=Math.floor(c)+"h "):f=Math.floor(l)+"d "}else{var h=Math.floor((a-Math.floor(a))*60);a<1?f=h+"min":h!=0?f=Math.floor(a)+"h "+h+"min":f=Math.floor(a)+"h "}window.shwFlashSaletag=!0,n.rstring=f}return n},showFlashSaleTag:function(){var e=$("#flashSaleEl"),t=parseInt(window.random_number_one_to_six),n='<i class="trustMarkers trust'+window.random_number_one_to_six+'"></i>';if(e.length>0&&e.attr("data-date")!=""){var r=e.attr("href"),i="<a href="+r+' target="_blank"><i class="trustMarkers thrillingThursdays"></i></a>',s=e.attr("data-date").split(","),o=s[0].split("/"),u=s[1].split(":"),a=(new Date).getDay(),f=CT.utils.helperFunctions.calTimeDiff(o,u);f&&f.rstring?(e.find("small").html(f.rstring),e.find("small").show(),e.show(),CT&&CT.app&&CT.app=="hotel"&&window.countryCode=="in"&&a=="4"?$("#Home .searchForm").prepend(i):CT&&CT.app&&CT.app=="hotel"&&window.countryCode=="in"&&$("#Home .searchForm").prepend(n)):(e.removeClass("tagWithTime"),e.hide(),CT&&CT.app&&CT.app=="hotel"&&window.countryCode=="in"&&$("#Home .searchForm").prepend(n))}else e.length>0?(e.removeClass("tagWithTime"),e.show()):CT&&CT.app&&CT.app=="hotel"&&window.countryCode=="in"&&$("#Home .searchForm").prepend(n)},showFlashSaleTag_v2:function(e){var t=e.FLASHSALEACTIVE=="Y",n=e.PRODUCT&&e.PRODUCT.toLowerCase(),r=$("#flashSaleEl-"+n),i=parseInt(window.random_number_one_to_six),s='<i class="trustMarkers trust'+window.random_number_one_to_six+'"></i>';if(r.length>0&&t){var o="<a href="+e.OFFERURL+' target="_blank"><i class="trustMarkers thrillingThursdays"></i></a>',u=(new Date).getDay();r.attr("href",e.OFFERURL),r.show(),CT&&CT.app&&CT.app=="hotel"&&CT.app==n&&window.countryCode=="in"&&u=="4"&&(s=o)}else t||(r.removeClass("tagWithTime"),r.hide());CT&&CT.app&&CT.app=="hotel"&&($("#Home .searchForm .trustMarkers").remove(),$("#Home .searchForm").prepend(s))},setUrlParamsInView:function(e){e=e||CT.cache[CT.settings.currentTab].searchParams.all,L("updating classes - in seturlparamsinview function of helperfunctions"),e.view&&e.view=="map"?($("body").addClass("mapView disablePageScroll"),$("html").addClass("disablePageScroll")):($("body").removeClass("mapView disablePageScroll"),$("html").removeClass("disablePageScroll"))},addQueryParamsToURL:function(e,t,n,r){var i=e.indexOf("#"),s=i===-1?"":e.substr(i);e=i===-1?e:e.substr(0,i);var o=new RegExp("([?&])"+t+"=.*?(&|$)","i"),u=e.indexOf("?")!==-1?"&":"?";return e.match(o)?e=e.replace(o,"$1"+t+"="+n+"$2"):e=e+u+t+"="+n,e+s},isTouchDevice:function(){return"ontouchstart"in window||"onmsgesturechange"in window},trackMixpanelEvent:function(e,t){if(window.mixpanelswitch&&window.mixpanel){var t=$.extend({},CT.utils.trackers.mixpanelTrackingData,t);mixpanel.track(e,t)}},trackClaverTapEvtHotel:function(e,t){if(window.cleverTapEnabled&&window.cleverTapAccId){var n=$.extend({},CT.utils.trackers.clevertapGlobleData,t);CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:e,values:n})}},trackGAEvent:function(e,t,n,r,i){parseInt(r,10),timer=r||3e3;try{_gaq.push(["_trackEvent",e,t,n])}catch(s){}if(window.product!="B2B"&&(CT.app=="hotel"||CT.app=="air")){window.loadSegmentIOJS&&t&&window.analytics&&analytics.track(t,{category:e,label:n});if(!CT.utils.postParams){var o=window.location.pathname.indexOf("hotels")!=-1?"hotel":CT.app=="hotel"?"hotel":"flight";CT.utils.postParams={emailID:CT.utils.cookies.read("userid")?decodeURIComponent(CT.utils.cookies.read("userid")).split("|")[0]:"N/A",product:o,eventType:"normal",userID:CT.utils.cookies.read("userid")?decodeURIComponent(CT.utils.cookies.read("userid")).split("|").slice(-1).pop():"N/A",apacheCookie:CT.utils.cookies.read("Apache")?CT.utils.cookies.read("Apache"):"N/A",searchInstance:CT.cache&&CT.settings&&CT.cache[CT.settings.currentTab]&&CT.cache[CT.settings.currentTab].sid?CT.cache[CT.settings.currentTab].sid:window.ctsid?window.ctsid:"N/A",category:e,events:[]}}e&&CT.utils.postParams.category!=e&&CT.utils.postParams.events.length>=0&&(CT.utils.postParams.events.length>0&&CT.utils.helperFunctions.postAnalyticsDataViaAJAX(),CT.utils.postParams.category=e,CT.utils.postParams.emailID=CT.utils.cookies.read("userid")?decodeURIComponent(CT.utils.cookies.read("userid")).split("|")[0]:"N/A");if(!CT.utils.postParams.searchInstance||CT.utils.postParams.searchInstance=="N/A")CT.utils.postParams.searchInstance=CT.cache&&CT.settings&&CT.cache[CT.settings.currentTab]&&CT.cache[CT.settings.currentTab].sid?CT.cache[CT.settings.currentTab].sid:window.ctsid?window.ctsid:"N/A";t&&n&&t!==""&&n!==""&&CT.utils.postParams.events.push({action:t,element:""+n,time:(new Date).getTime()}),typeof window.navigator.sendBeacon!="function"?CT.utils.helperFunctions.postAnalyticsDataViaAJAX():(CT.utils.postParams.events.length>=5||i=="instant")&&CT.utils.helperFunctions.postAnalyticsDataViaAJAX()}},trackGAUrl:function(e,t){timer=t||3e3,setTimeout(function(){try{_gaq.push(["_trackEvent",e])}catch(t){}},timer)},postAnalyticsDataViaAJAX:function(e){var t="",n=window.logUiEvtTimeOut?parseInt(window.logUiEvtTimeOut):1e3;!e&&CT.utils.postParams&&CT.utils.postParams.events.length>0?(t=JSON.stringify(CT.utils.postParams),CT.utils.postParams.events=[]):e&&JSON.parse(e).category!="Bus"&&(t=e);var r=window.analyticsHost?window.analyticsHost:"",i=window.explorerAnalyticsSwitch=="true"?!0:!1,s={"Content-type":"application/json",dataType:"json"};r&&(s={"Content-Type":"application/x-www-form-urlencoded"});if(t)if(i&&r&&$.browser.msie&&window.XDomainRequest&&($.browser.version==="9.0"||$.browser.version==="8.0")){var o=new XDomainRequest;o.open("post",r+"/ctanalytics/loguievent"),o.onload=function(){},o.onprogress=function(){},o.ontimeout=function(){},o.onerror=function(){},o.timeout=n,setTimeout(function(){o.send(t)},0)}else $.ajax({url:r+"/ctanalytics/loguievent",type:"POST",headers:s,data:t,success:function(e){},error:function(){},timeout:n})},postAnalyticsDataViaImage:function(){if(CT.utils.postParams&&CT.utils.postParams.events.length>0){var e=new Image;e.src="/ctanalytics/loguievent?events="+encodeURIComponent(JSON.stringify(CT.utils.postParams))}CT.utils.postParams.events=[]},postAnalyticsDataViaBeacon:function(){var e=window.analyticsHost?window.analyticsHost:"",t=e+"/ctanalytics/loguievent";CT.utils.postParams&&CT.utils.postParams.events.length>0&&window.navigator.sendBeacon&&window.navigator.sendBeacon(t,JSON.stringify(CT.utils.postParams)),CT.utils.postParams.events=[]},trackNanigan:function(e){var t="",n="",r="",i=window.location.protocol;for(var s in e)t+=s+"="+e[s]+"&";t=t.replace(/&$/,""),n=CT.utils.cookies.read("userid"),n!==null&&(n=n.split("||")[2]),n?r=i+"//api.nanigans.com/event.php?app_id=90781&user_id="+n+"&":r=i+"//api.nanigans.com/event.php?app_id=90781&";var o=new Image;o.src=r+t+"&_="+(new Date).getTime(),o.onload=function(){}},adjustHeight:function(){var e=$("#Home").find("aside").first().outerHeight(),t=$("#Home").find("aside").last().outerHeight(),n=$(window).outerHeight(),r=$("#homeUpsellBanner").outerHeight(),r=r?r:"0",i=Math.max(e,t,n-100-r);$(".viewController").css("min-height",i+"px")},paidAffiliateTracker:function(e){var t=document.createElement("a");t.href=parent.document.referrer;var n=window.affiliateutmExpiryDays?parseInt(window.affiliateutmExpiryDays):30,r=!0;if(r&&(CT.cache&&CT.settings&&CT.settings.currentTab&&CT.cache[CT.settings.currentTab]||e)){var i=e?e:CT.cache&&CT.settings&&CT.settings.currentTab&&CT.cache[CT.settings.currentTab]?CT.cache[CT.settings.currentTab].searchParams.all:{},s=i.tduid?i.tduid:i.utm_source,o=i.utm_campaign,u=i.utm_medium,a=i.utm_term,f=i.uid,l=CT.utils.cookies.read("affiliate_expdate");l?window.lastStepAttribution&&c():(c(),CT.utils.cookies.create("affiliate_expdate",(new Date).toDateString(),n));function c(){s&&CT.utils.cookies.create("source_affiliatefirstsource",s,n),o&&CT.utils.cookies.create("campaign_affiliatefirstsource",o,n),u&&CT.utils.cookies.create("medium_affiliatefirstsource",u,n),a&&CT.utils.cookies.create("term_affiliatefirstsource",a,n),f&&CT.utils.cookies.create("uid_affiliatefirstsource",f,n)}}},paidChannelTracker:function(e){var t=document.createElement("a");t.href=parent.document.referrer;if(t.host.indexOf("cleartrip")==-1&&(CT.cache[CT.settings.currentTab]||e)){var n=e||CT.cache[CT.settings.currentTab].searchParams.all,r=n.utm_source,i=n.utm_campaign,s=n.utm_medium,o=n.utm_content,u=["source_firstpaidsource","medium_firstpaidsource","campaign_firstpaidsource","content_firstpaidsource","lastchannel"],a=CT.utils.cookies.read("source_firstsource");if(!a){r&&CT.utils.cookies.create("source_firstsource",r,30),i&&CT.utils.cookies.create("campaign_firstsource",i,30),s&&CT.utils.cookies.create("medium_firstsource",s,30),o&&CT.utils.cookies.create("content_firstsource",o,30);for(var f=0;f<u.length;f++)CT.utils.cookies.erase(u[f])}r&&CT.utils.cookies.create("source_firstpaidsource",r),s&&CT.utils.cookies.create("medium_firstpaidsource",s),i&&CT.utils.cookies.create("campaign_firstpaidsource",i),o&&CT.utils.cookies.create("content_firstpaidsource",o),CT.utils.cookies.create("noncleartrip","true")}else CT.utils.cookies.read("noncleartrip")||CT.utils.cookies.create("noncleartrip","false")},newUserIdTracker:function(e,t){e=parseInt(e),isNaN(e)||$.get("/partial/account/tc/"+e,function(e){try{typeof e=="string"&&(e=JSON.parse(e));var n=!1,r=parseInt(e.D)+parseInt(e.I)+parseInt(e.H);r===0?(n=!0,CT.utils.cookies.create("nu",1,.5/24)):CT.utils.cookies.erase("nu"),t&&t(n)}catch(i){}})},store:function(){var e={setItem:function(e,t){this.db?this.db.setItem(e,t):CT.utils.cookies.create(e,t)},getItem:function(e){return this.db?this.db.getItem(e):CT.utils.cookies.read(e)},removeItem:function(e){this.db?this.db.removeItem(e):CT.utils.cookies.erase(e)},db:window.localStorage};return e},initLogger:function(e){var t=function(){CT.utils.postParams&&CT.utils.postParams.events.length>0&&CT.utils.helperFunctions.postAnalyticsDataViaBeacon()};$(window).bind("unload",t)},setGAProperties:function(){try{var e=document.location.host.split("."),t=window.CT&&window.CT.cookies?CT.cookies:window.CT&&window.CT.utils.cookies?CT.utils.cookies:ct.cookies;if(window.isGaPropertiesSet)return;e[0]==="www"&&e[2]==="com"?(window._gaq.push(["_setAccount","UA-8292447-1"]),window._gaq.push(["_setDomainName",".cleartrip.com"])):e[0]==="om"&&e[2]==="com"?t.read("lp")=="ar"?window._gaq.push(["_setAccount","UA-16109308-12"]):window._gaq.push(["_setAccount","UA-16109308-2"]):e[0]==="qa"&&e[2]==="com"?t.read("lp")=="ar"?window._gaq.push(["_setAccount","UA-16109308-13"]):window._gaq.push(["_setAccount","UA-16109308-4"]):e[0]==="bh"&&e[2]==="com"?t.read("lp")=="ar"?window._gaq.push(["_setAccount","UA-16109308-10"]):window._gaq.push(["_setAccount","UA-16109308-3"]):e[0]==="kw"&&e[2]==="com"?t.read("lp")=="ar"?window._gaq.push(["_setAccount","UA-16109308-11"]):window._gaq.push(["_setAccount","UA-16109308-5"]):e[0]==="www"&&e[2]==="sa"?t.read("lp")=="ar"?window._gaq.push(["_setAccount","UA-16109308-14"]):window._gaq.push(["_setAccount","UA-16109308-8"]):e[0]==="www"&&e[2]==="ae"?t.read("lp")=="ar"?window._gaq.push(["_setAccount","UA-16109308-9"]):window._gaq.push(["_setAccount","UA-16109308-1"]):e[2]==="com"&&window._gaq.push(["_setAccount","UA-16109308-3"]),window._gaq.push(["_trackPageview"]),window.isGaPropertiesSet=!0}catch(n){}},ipadCloseFilter:function(e,t){t.find(".filters").removeClass("filterPopOver"),$(".tempFiltersButton").closest("li").removeClass("current"),t.find(".viewController").css("display","block")},ipadChanges:function(e,t){var n=navigator.userAgent.match(/iPad/i)!=null;$(e.target.parentNode).toggleClass("current"),t.find(".filters").toggleClass("filterPopOver"),t.find(".filters").hasClass("filterPopOver")==1&&n==0?t.find(".viewController").css("display","none"):t.find(".viewController").css("display","block"),e.stopPropagation();var r=function(e){if($(e.target).is(".filterPopOver, .filterPopOver *"))return;$(document).off("click",r),t.find(".filters").removeClass("filterPopOver"),$(".tempFiltersButton").closest("li").removeClass("current"),t.find(".viewController").css("display","block")};$(document).on("click",r)},includeGAjs:function(){var e=(new Date).getTime(),t=document.createElement("script");t.type="text/javascript";var n=window.hotelBaseLink||window.airBaseLink||window.staticBaseLink||"";!!window.productCode&&window.productCode!="B2C"||window.countryCode!="in"&&window.countryCode!="ae"?t.src=n+"/javascripts/ga.v"+e+".js":t.src=n+"/javascripts/dc.v"+e+".js",$("body")[0].appendChild(t),window._gaq=window._gaq||[],CT.utils.helperFunctions.setGAProperties();if(CT.app=="hotel"&&window.loadSegmentIOJS){var r=r||[];(function(){var e=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group"],t=function(e){return function(){r.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var n=0;n<e.length;n++)r[e[n]]=t(e[n])})(),r.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+e+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},r.load("dreyq342iw")}},includeGATagManager:function(){(function(e,t,n,r,i){e[r]=e[r]||[],e[r].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var s=r!="dataLayer"?"&l="+r:"",o="//www.googletagmanager.com/gtm.js?id="+i+s;$.getScript(o,function(){window.location.pathname.indexOf("/confirmation")!=-1&&$.ajax({type:"GET",url:"/googltmsuccess",success:function(e){},error:function(e){}})})})(window,document,"script","dataLayer","GTM-T9S432")},triggerFunnelCall:function(){$.ajax({url:"/common/funnelTracking",success:function(e){}})},includeComScoreTracking:function(){window._comscore=window._comscore||[],window._comscore.push({c1:"2",c2:"7561529"});var e=document.createElement("script"),t=document.getElementsByTagName("script")[0],n=window.hotelBaseLink||window.airBaseLink||window.staticBaseLink||"";e.src=n+"/javascripts/trackers/comscore_beacon.js?v=1",t.parentNode.insertBefore(e,t)},inspectLetJsForBranchIo:function(){(function(e,t,n,r,i,s,o,u,a,f){if(!e[r]||!e[r]._q){for(;u<o.length;)i(s,o[u++]);a=t.createElement(n),a.async=1,a.src="https://cdn.branch.io/branch-latest.min.js",f=t.getElementsByTagName(n)[0],f.parentNode.insertBefore(a,f),e[r]=s}})(window,document,"script","branch",function(e,t){e[t]=function(){e._q.push([t,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode".split(" "),0),branch.init("key_live_cgeDODFZsneCcLhrQ9wxGomiEqkFtGo9")},inspectLetJsForRT:function(){window.__insp=window.__insp||[],__insp.push(["wid",2042725865]),function(){function e(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.id="inspsync",e.src=("https:"==document.location.protocol?"https":"http")+"://cdn.inspectlet.com/inspectlet.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}e()}()},inspectLetJsForHotels:function(){window.__insp=window.__insp||[],__insp.push(["wid",1283069909]),function(){function e(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.id="inspsync",e.src=("https:"==document.location.protocol?"https":"http")+"://cdn.inspectlet.com/inspectlet.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}document.readyState!="complete"?window.attachEvent?window.attachEvent("onload",e):window.addEventListener("load",e,!1):e()}()},inspectForGoogleAnalatics:function(){(function(e,t,n,r,i,s){e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:390809,hjsv:5},i=t.getElementsByTagName("head")[0],s=t.createElement("script"),s.async=1,s.src=n+e._hjSettings.hjid+r+e._hjSettings.hjsv,i.appendChild(s)})(window,document,"//static.hotjar.com/c/hotjar-",".js?sv=")},inspectLetJsForHotelsBookFlow:function(){window.__insp=window.__insp||[],__insp.push(["wid",680622208]),function(){function e(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.id="inspsync",e.src=("https:"==document.location.protocol?"https":"http")+"://cdn.inspectlet.com/inspectlet.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}document.readyState!="complete"?window.attachEvent?window.attachEvent("onload",e):window.addEventListener("load",e,!1):e()}()},inspectLetJsForCancellation:function(){window.__insp=window.__insp||[],__insp.push(["wid",545080575]),function(){function e(){if(typeof window.__inspld!="undefined")return;window.__inspld=1;var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.id="inspsync",e.src=("https:"==document.location.protocol?"https":"http")+"://cdn.inspectlet.com/inspectlet.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}setTimeout(e,500),document.readyState!="complete"?window.attachEvent?window.attachEvent("onload",e):window.addEventListener("load",e,!1):e()}()},includeCheckmein:function(){try{if(window.productCode!="CP"&&window.productCode!="AG"&&window.productCode!="WL"){function e(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,$("body")[0].appendChild(t)}e("https://s3-us-west-2.amazonaws.com/cmi-static/js/jquery.jplayer.min.js"),e("https://s3-us-west-2.amazonaws.com/cmi-static/js/6fc1383ab00f5445a0c22b961d6e71be.js"),$('<div id="cmi_signature_player"></div>').appendTo($("body"))}}catch(t){}},getHotelModalUrl:function(e){var t=[],n="/hotels/info/"+e+"/modal",r=CT.masterJson.getHotel(e);return r.priceInfo&&_.forEach(r.priceInfo.rms,function(e){t.push(e.rmtc)}),t.length>0?n+="?&rr="+t.join("&rr="):n+="?",CT.app=="hotel"&&(n+="&tux=1"),n},getHotelAmenities:function(e,t){var n,r,i;t=t||!1,n=t?CT.settings.general.roomAmenitiesMap:window.amenitiesMap?window.amenitiesMap:CT.settings.general.amenitiesMap,r=(t?"0000000000000":"000000000000000000")+parseInt(e,16).toString(2),r=r.substring(r.length-(t?12:17)),t||(r=r.split("").reverse().join("")),i={},i.activeAmenities=[],i.shwName=shwName?!0:!1;for(var s=0;s<r.length;s++){var o;$.browser.msie?o=r.split("")[s]:o=r[s],o=="1"&&(i[n[s]["class"]]=!0,i.activeAmenities.push(n[s].title))}return i},calDiscountPercent:function(e,t){return(e/(t+e)*100).toFixed(3)},truncateText:function(e,t,n,r){var i=e.text().trim(),s="";t=t?window.Int?Int(t):200:200,r=r||function(e){e.attr("data-type")=="more"?(e.siblings(".originalContent").show(),e.siblings(".displayText").hide(),e.attr("data-type","less").html("less")):(e.siblings(".originalContent").hide(),e.siblings(".displayText").show(),e.attr("data-type","more").html("more"))},n&&_.forEach(n,function(e,t){s+=t+"="+e+" "}),i.length>t&&(originalContent=e.html(),displayText=i.substring(0,t),e.html('<div class="originalContent" style="display:none">'+originalContent+"</div>"),e.append('<span class="displayText">'+displayText+" ... </span>"),e.append('<a href="#" class="truncateToggle weak" '+s+' data-type="more">more</a>'),e.find(".truncateToggle").click(function(e){r($(e.target))}))},logToServer:function(e,t,n){try{parameters=n||{},CT.ajax("trackcode"+Math.random(),"/urltrack/"+e+"_"+t,"get",{data:parameters,success:function(e){}})}catch(r){}try{_gaq.push(["_trackEvent",e,t,Hash.toQueryParams(n||{})])}catch(r){}},getDistanceFromLatLonInKm:function(e,t,n,r){if(e&&t&&n&&r){var i=function(e){return e*(Math.PI/180)},s=6371,o=i(n-e),u=i(r-t),a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(i(e))*Math.cos(i(n))*Math.sin(u/2)*Math.sin(u/2),f=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),l=s*f;return l}return-1},setUserLocationCookie:function(){try{var e,t="";CT.getScript("//maps.googleapis.com/maps/api/js?key=AIzaSyBICejdTstEMJamaR3_1yVvohjIhLikbCM&sensor=false",function(){n()});var n=function(){var n=n?n:!1;e=new google.maps.Geocoder,successFunction=function(e){var t=e.coords.latitude,n=e.coords.longitude;i(t,n)},errorFunction=function(){window.console&&console.log("Geocoder failed"),r("","","")},navigator.geolocation&&navigator.geolocation.getCurrentPosition(successFunction,errorFunction);var r=function(e,t,n){CT&&CT.utils&&CT.utils.cookies&&(e||(e=""),t||(t=""),n||(n=""),CT.utils.cookies.create("userLatitude",t,1/24),CT.utils.cookies.create("userLongitude",n,1/24),CT.utils.cookies.create("userLocation",e,1/24),CT.utils.cookies.create("userCity",e,1/24))},i=function(n,i){var s=new google.maps.LatLng(n,i);e.geocode({latLng:s},function(e,s){if(s==google.maps.GeocoderStatus.OK){window.console&&console.log(e);if(e[0]){for(var o=0;o<e[0].address_components.length;o++)for(var u=0;u<e[0].address_components[o].types.length;u++)if(e[0].address_components[o].types[u]=="sublocality_level_1"){locality=e[0].address_components[o];break}t=locality.long_name,r(t,n,i)}else window.console&&console.log("No results found"),r(t,n,i)}else window.console&&console.log("Geocoder failed due to: "+s),r(t,n,i)})}}}catch(r){}},setUserHomeCity:function(){try{var e,t=function(){successFunction=function(e){var t=e.coords.latitude,r=e.coords.longitude;n(t,r)},errorFunction=function(e){console.error("Geocoder failed",e.message)},navigator.geolocation&&navigator.geolocation.getCurrentPosition(successFunction,errorFunction,{timeout:1e4});var t=function(e){var t=e.lat+","+e.lng,n={};e.lat=e.lat.toString(),e.lng=e.lng.toString(),n.searchData=e;if(CT&&CT.utils&&CT.utils.cookies)if(CT.utils.cookies.read("userHomeLatLng")&&CT.utils.cookies.read("userHomeCity")){var r=CT.utils.cookies.read("userHomeLatLng"),i=r.split(",")[0],s=r.split(",")[1],o=CT.utils.helperFunctions.getDistanceFromLatLonInKm(i,s,e.lat,e.lng);o>=50&&(CT.utils.cookies.create("userHomeLatLng",t,365),CT.utils.cookies.create("userHomeCity",e.city,365),e.state&&CT.utils.cookies.create("userHomeState",e.state,365),CT.utils.trackers.ctanalyticsTrackingData("N/A","logLocation","location",n,"location"))}else CT.utils.cookies.create("userHomeLatLng",t,365),CT.utils.cookies.create("userHomeCity",e.city,365),e.state&&CT.utils.cookies.create("userHomeState",e.state,365),CT.utils.trackers.ctanalyticsTrackingData("N/A","logLocation","location",n,"location")},n=function(e,n){var r={},i="/local/api/v1/getCity?latitude="+e+"&longitude="+n;$.ajax({url:i,type:"GET",success:function(i){i.hasOwnProperty("city")?(r.city=i.city,r.state=i.state,r.lat=e,r.lng=n,r.locality="",t(r)):console.error("Empty Response from getCity")},error:function(e){console.error(e)}})},r=function(n,r){var i=new google.maps.LatLng(n,r),s={};e.geocode({latLng:i},function(e,i){i==google.maps.GeocoderStatus.OK?e[0]?(_.find(e[0].address_components,function(e){if(_.contains(e.types,"sublocality_level_1"))return s.locality=e.long_name,!0}),_.find(e[0].address_components,function(e){if(_.contains(e.types,"locality")||_.contains(e.types,"administrative_area_level_2"))return s.city=e.long_name,s.lat=n,s.lng=r,!0}),t(s)):window.console&&console.log("No results found"):window.console&&console.log("Geocoder failed due to: "+i)})}};t()}catch(n){}},tpTrack:function(e){try{function t(e){_.each(e,function(t,n){try{if(t)switch(n){case"departure_date":case"return_date":case"price_lock_exp_date":case"date of journey":case"date of return":var r=!1;_.isArray(t)||(t=[t]);var r=[],i=!1;_.each(t,function(e){typeof e=="string"&&(e=e.split("/"),i=e.length==3?(new Date(e[1]+"/"+e[0]+"/"+e[2])).getTime():!1,i&&r.push(i))}),r.length>0?(r.length=1,e[n]=new Date(r[0])):delete e[n];break;case"airline":e[n]=e[n].split(":").map(function(e){return e.split("-")[0]}).join(",");break;case"last_event_type":t==-1&&(e[n]=window.clevertapLastEventType||window.localStorage&&window.localStorage.CLVR_LE||null),e[n]==null&&delete e[n];break;case"last_page_name":t==-1&&(e[n]=window.clevertapLastPage||window.localStorage&&window.localStorage.CLVR_LP||null),e[n]==null&&delete e[n];break;default:}}catch(s){window.console&&console.log(s)}})}if(e.tp=="clevertap"){if(!window.cleverTapEnabled)return window.console&&console.warn("CleverTap Not Enabled");CT.utils.initCleverTap();if(e.logout){window.clevertap.clear(),window.clevertap.logout();return}var n={};if(CT.utils.cookies.read("userid")){var r=decodeURIComponent(CT.utils.cookies.read("userid"));r=r.split("|");if(!clevertap.profile.getAttribute||clevertap.profile.getAttribute("Email")!==r[0]){n={Email:r[0],Identity:r[4],Name:(window.userFullName?window.userFullName:"")+(r[1]?" ("+r[1]+")":"")};if(r[2]=="M"||r[2]=="F")n.Gender=r[2];r[3]&&r[3]!=""&&(n.Photo="https://"+window.location.host+"/profile/photos/"+r[3]),window.FB&&FB.api&&FB.api("/me",{fields:"id,name,email,birthday,gender,education,work"},function(e){clevertap.profile.push({Facebook:e})})}}var i=CT.utils.cookies.read("Apache");if(!clevertap.profile.getAttribute||clevertap.profile.getAttribute("apache_cookie")!==i)n.apache_cookie=i;var s=CT.utils.cookies.read("ct-ab");if(!window.__clevertapABTestPassed&&s){var o={};s&&(s=JSON.parse(unescape(s)),typeof s=="object"&&_.each(s,function(e,t){o["ab_"+t]=e})),n=_.extend(n||{},o),window.__clevertapABTestPassed=!0}clevertap.profile.push({Site:n}),e.values&&CT.app!="hotel"?(e.values.domain=window.location.host,e.values.language=window.CT.langUrlPrefix?window.CT.langUrlPrefix.substr(1):"en"):e.values&&CT.app==="hotel"&&(e.values.domainName=window.location.host),t(e.values),window.clevertapLastEventType=e.category,window.localStorage&&(window.localStorage.CLVR_LE=e.category,e.values&&e.values.page_name&&(window.localStorage.CLVR_LP=e.values.page_name,window.clevertapLastPage=e.values.page_name)),window.clevertap.event.push(e.category,e.values)}if(e.tp=="moengage"){if(!window.moengageEnabled)return window.console&&console.warn("Moengage not Enabled");if(!window.moengageId)return window.console&&console.warn("Moengage id not available");if(window.moengageEnabled&&window.moengageId){function u(){window.Moengage=moe({app_id:window.moengageId,debug_logs:window.moengageDebugLogs?window.moengageDebugLogs:0})}window.Moengage||u();if(e.logout){Moengage.destroy_session();return}if(window.CT&&window.CT.utils&&window.CT.utils.cookies&&window.CT.utils.cookies.read("usermisc")&&window.CT.utils.cookies.read("usermisc").match("SIGNED_IN")){var r=decodeURIComponent(CT.utils.cookies.read("userid"));r=r.split("|"),Moengage.add_unique_user_id(r[4]),Moengage.add_email(r[0]),Moengage.add_gender(r[2])}e.category&&e.values&&Moengage.track_event(e.category,e.values)}}if(e.tp=="fb"&&window.B2cProductEnabled){function a(e){window._fbqInit||(!function(e,t,n,r,i,s,o){if(e.fbq)return;i=e.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)},e._fbq||(e._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.queue=[],s=t.createElement(n),s.async=!0,s.src=r,o=t.getElementsByTagName(n)[0],o.parentNode.insertBefore(s,o)}(window,document,"script","//connect.facebook.net/en_US/fbevents.js"),fbq("init","288042424732696"),window._fbqInit=!0),typeof e=="function"&&e()}a(function(){fbq("track",e.category,e.values||null)})}}catch(f){window.console&&console.log(f)}},trackLinkClick:function(e){try{_gaq.push(["_trackEvent",e.attr("trackerCategory"),"click",e.attr("tracker")])}catch(t){}},trackViewsRender:function(e,t){try{_gaq.push(["_trackEvent",e,"render",t])}catch(n){}},forceHttpsLinks:function(e){try{e=e||$(document.body);var t=window.location.pathname.indexOf("/account")==0;document.location.protocol==="https:"&&(e.find("a.forceHttp").each(function(e,n){if(!t||!$(n).attr("appref"))this.href=this.href.replace("https:","http:")}),e.find("form.forceHttp").each(function(e,t){this.action=this.action.replace("https:","http:")})),document.location.protocol==="http:"&&(e.find("a.forceHttps").each(function(e,n){if(!t||!$(n).attr("appref"))this.href=this.href.replace("http:","https:")}),e.find("form.forceHttps").each(function(e,t){this.action=this.action.replace("http:","https:")}))}catch(n){}},forceLanguagePrefix:function(e){try{function t(e,t){var n=e;return n.split("/")[0]!=t&&(n=t+e),n}function n(e){try{var t=new URL(e);return t.hostname!=window.location.hostname?!0:!1}catch(n){return!1}}function r(e){return e.indexOf(window.CT.langUrlPrefix+"/")!=-1}var i,s=[{tag:"a",attr:"pathname"},{tag:"form",attr:"action"}];i=window.CT.langUrlPrefix,e=e||$(document.body);if(i){var o=s.length;for(var u=0;u<o;u++){var a=s[u],f=e.find(a.tag),l=f.length,c=a.tag=="a"?"href":"action";for(var h=0;h<l;h++){var p=f[h],d=$(p),v="";p[a.attr]!="javascript:void(0)"&&p[a.attr]!="#"&&p[a.attr]!=""&&!n(p[c])&&!r(p[a.attr])&&d.attr("langlink")!="true"&&(v=a.attr=="pathname"?p[a.attr]:(new URL(p[a.attr])).pathname,p[a.attr]=t(v,i))}}}}catch(m){window.console&&console.log("Error in executing Fn:forcelanguagePrefix")}},createOfferBand:function(){try{if(window.search_offers){var e=$("<div id='Flash' style='display:none' ></div>"),t=$("<p></p>");if(search_offers.NODISPLAY)return!1;var n=search_offers.HEADING,r=search_offers.DESC1,i=search_offers.LINK1,s=search_offers.CLASS1,o=search_offers.HASTRACKER,u=search_offers.TRACKER,a=search_offers.TRACKERCAT;t.html("<strong>"+n+"</strong>"+r);var f=$("<a title='"+n+"' href='"+i+"' target='_blank' >Know more &gt;&gt; </a>");t.append(f),o=="Y",$("#offerDisplay").append(e.addClass(s).append(t));var l=navigator.userAgent.indexOf("MSIE 6")>=0?!0:!1;l?e.attr("className",s+" "+"clearfix"):e.attr("className",s)}}catch(c){}},storeUserReferer:function(){var e=[],t=function(){CT.utils.cookies.create("pagerf",document.referrer||"direct"),CT.utils.cookies.create("pageprm",window.location.search.substr(1)||"NA")};return function(){e[e.length-1]!=window.location.href&&(t(),e.push(window.location.href))}}(),storePaidChannelSource:function(){var e=!1;return function(){if(e)return;var t,n;e=!0,n=window.location.search.substring(1),n.indexOf("&")==0&&(n=n.substring(1)),n?(t=JSON.parse('{"'+decodeURI(n).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),t.gclid?CT.utils.cookies.create("paidchnl","googlesem",1):t.utm_source?CT.utils.cookies.create("paidchnl",t.utm_source,1):(!CT.utils.cookies.read("paidchnl")||CT.utils.cookies.read("paidchnl")==="NA")&&CT.utils.cookies.create("paidchnl","NA",1)):CT.utils.cookies.read("paidchnl")||CT.utils.cookies.create("paidchnl","NA",1)}}(),spotNonCleartripReferrer:function(e,t){try{var n=window.location.hostname;n=n.substr(n.indexOf("."));if(t)var r=_.deserialize(window.location.search.substring(1));var i=document.createElement("a");i.href=e&&parent.document.referrer?parent.document.referrer:document.referrer!=""?document.referrer:r&&r.utm_source&&r.utm_source!=""?t:"";var s=30/1440;CT.utils.cookies.create("r_referer",encodeURIComponent(i.href),s,n),r&&r.gclid?(r.utm_source||(r.utm_source="googlesem"),CT.utils.cookies.create("r_params",encodeURIComponent(_.serialize(r)),s,n)):CT.utils.cookies.read("utm_source")&&CT.utils.cookies.read("utm_source").toLowerCase()!="googlesem"&&(e&&parent.document.referrer?CT.utils.cookies.create("r_params",encodeURIComponent(parent.window.location.search.substr(1)),s,n):document.referrer?CT.utils.cookies.create("r_params",encodeURIComponent(window.location.search.substr(1)),s,n):r&&r.utm_source&&r.utm_source!=""&&CT.utils.cookies.create("r_params",encodeURIComponent(window.location.search.substr(1)),s,n))}catch(o){}}},checkUnConfirmedUser:function(){return CT.utils.cookies.read("unconfirmed-email")!=undefined},readCTAuthCookie:function(){return CT.settings=CT.settings||{},CT.settings.ctAuthCookieName=CT.settings.ctAuthCookieName||(/dp\.cleartirp\.com|vegas\.cleartrip\.com/.test(window.location.hostname)?"dev-usermisc":"usermisc"),CT.utils.cookies.read(CT.settings.ctAuthCookieName)&&unescape(CT.utils.cookies.read(CT.settings.ctAuthCookieName)).split("|")[0]=="SIGNED_IN"?!0:!1},cookies:{create:function(e,t,n,r){var i,s;if(n){var o=new Date;o.setTime(o.getTime()+n*24*60*60*1e3),i="; expires="+o.toGMTString()}else i="";r?s="; domain="+r:s="",document.cookie=e+"="+t+i+s+"; path=/"},read:function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},erase:function(e,t){CT.utils.cookies.create(e,"",-1,t)}},merchandisingBanner:{templates:{appUpsell:function(){var e='<div id="appDownloadBanner" class="row"><table width="100%"><tbody><tr><td><i class="AppDownloadIcon"></i></td><td><a id="floatingBanner" class="<%=class1%>" href="<%=link%>" target="_blank" onClick="<%=onclickEve%>" rel="nofollow"><strong class="<%=class1%>"><%=heading%></strong><%=text%></a></td><td><a href="<%=link%>" target="_blank" class="downloadBtn">Download</a></td></tr></tbody></table></div>';return e},offer:function(){var e='<div class="mobileOffer"><a href="<%=link%>" onClick="<%=onclickEve%>" target="_blank"><i class="i24 offerIcon"></i><span><strong><%=heading%></strong><%=text%></span></div>';return e}},createMarkup:function(e,t){try{var n=e[0],r={heading:n.HEADING&&n.HEADING.trim()!="."?n.HEADING:"",text:n.DESC1?n.DESC1:"",link:n.LINK1?n.LINK1:"",class1:n.CLASS1?n.CLASS1:"",onclickEve:""};if(n.TRACKERCAT&&n.TRACKERCAT!=null||n.TRACKER&&n.TRACKER!=null){var i=n.TRACKERCAT&&n.TRACKERCAT!=null?n.TRACKERCAT:"",s=n.TRACKER&&n.TRACKER!=null?n.TRACKER:"";r.onclickEve="_gaq.push(['_trackEvent', '"+i+"', '"+s+"']);"}var o=CT.utils.merchandisingBanner.templates[t](),u=_.template(o,r);return u}catch(a){return!1}},create:function(e,t,n){var n=n||"offer";try{$.ajax({url:e,type:"GET",success:function(e){var r=CT.utils.merchandisingBanner.createMarkup(e,n);r&&$.each(t,function(e,t){$(t)&&$(t).length&&$(t).html(r)})},error:function(){return!1}})}catch(r){return!1}}},trackers:{page_count:function(e){try{e=e||window.ct_ct_track;if(e){var t="/common/ctct",n="ct_ct",r=CT.utils.cookies.read(n)?CT.utils.cookies.read(n):"",i=CT.utils.cookies.read("Apache")?CT.utils.cookies.read("Apache"):"",s={n:e.n,p:e.p,bd:e.bd,sr:"y"};r&&$.browser.msie!=1&&CT.utils.cookies.erase(n,"."+window.location.hostname),$.ajax({url:t,type:"POST",headers:{Pragma:"no-cache","Cache-Control":"no-cache",Expires:"0"},data:s,success:function(t){if(t){typeof t=="string"&&(t=JSON.parse(t));var n=e.p==="ad"||e.p==="ai"?"air":"hotel",r=t[e.p];CT.Yoptima_searchcount=0,CT.Yoptima_bookcount=0,r.ct&&(CT[n+"_dropoff"]=r.ct),r.sr&&(CT[n+"_searchcount"]=r.sr),r.c&&(CT[n+"_bookcount"]=r.c),r.sd&&(CT[n+"_lastsearchdate"]=r.sd),r.cd&&(CT[n+"_lastbookdate"]=r.cd),n=="air"&&(t.ad&&t.ad.sr&&(CT.Yoptima_searchcount=t.ad.sr),t.ai&&t.ai.sr&&(CT.Yoptima_searchcount=CT.Yoptima_searchcount+t.ai.sr),t.ad&&t.ad.c&&(CT.Yoptima_bookcount=t.ad.c),t.ai&&t.ai.c&&(CT.Yoptima_bookcount=CT.Yoptima_bookcount+t.ai.c))}},error:function(){}})}}catch(o){}},mixpanelTrackingData:{},clevertapGlobleData:{},ctanalyticsTrackingobj:{},ctAnalyticsPageViewLogging:function(){var e=[];return function(t,n,r,i,s){var o;if(e[e.length-1]==window.location.href||CT.app=="air"||CT.app=="hotel")return;e.push(window.location.href),arguments.length==0?(t="generic",n="Page_Viewed",s="page_load",o="generic",r=window.location.path):o=window.location.pathname.indexOf("hotels")!=-1?"hotel":CT.app=="hotel"?"hotel":"flight";var u={emailID:CT.utils.cookies.read("userid")?decodeURIComponent(CT.utils.cookies.read("userid")).split("|")[0]:"N/A",product:o,eventType:s,userID:CT.utils.cookies.read("userid")?decodeURIComponent(CT.utils.cookies.read("userid")).split("|").slice(-1).pop():"N/A",apacheCookie:CT.utils.cookies.read("Apache")?CT.utils.cookies.read("Apache"):"N/A",searchInstance:CT.cache&&CT.settings&&CT.cache[CT.settings.currentTab]&&CT.cache[CT.settings.currentTab].sid?CT.cache[CT.settings.currentTab].sid:window.ctsid?window.ctsid:"N/A",category:t,events:[{action:"Page_Viewed",element:window.location.path,time:(new Date).getTime()}],searchData:{}};$.each(["pageprm","pagerf","paidchnl"],function(e){CT.utils.cookies.read(e)&&(logingParams.searchData[e]=CT.utils.cookies.read(e))}),CT.utils.helperFunctions.postAnalyticsDataViaAJAX(u)}}(),ctanalyticsTrackingData:function(e,t,n,r,i){function s(e){CT.utils.helperFunctions.storeUserReferer(),CT.utils.helperFunctions.storePaidChannelSource(),e.searchData=e.searchData||{},$.each(["pageprm","pagerf","paidchnl"],function(t,n){CT.utils.cookies.read(n)&&(e.searchData[n]=CT.utils.cookies.read(n))})}var o=window.location.pathname.indexOf("hotels")!=-1?"hotel":CT.app=="hotel"?"hotel":"flight",u={emailID:CT.utils.cookies.read("userid")?decodeURIComponent(CT.utils.cookies.read("userid")).split("|")[0]:"N/A",product:o,eventType:i,userID:CT.utils.cookies.read("userid")?decodeURIComponent(CT.utils.cookies.read("userid")).split("|").slice(-1).pop():"N/A",apacheCookie:CT.utils.cookies.read("Apache")?CT.utils.cookies.read("Apache"):"N/A",searchInstance:CT.cache&&CT.settings&&CT.cache[CT.settings.currentTab]&&CT.cache[CT.settings.currentTab].sid?CT.cache[CT.settings.currentTab].sid:window.ctsid?window.ctsid:"N/A",category:e,events:[]};u.events.push({action:t,element:n,time:(new Date).getTime()});var a=$.extend(!0,{},u,r);i=="page_load"&&s(a),a=JSON.stringify(a),r&&r.searchData&&$.each(r.searchData,function(e,t){typeof t!="string"&&window.console&&console.error&&console.error("Value for "+e+": must be a string. Developer needs to fix it")}),CT.utils.helperFunctions.postAnalyticsDataViaAJAX(a)},includeMixPanel:function(){(function(e,t){if(!t.__SV){var n,r,i,s;window.mixpanel=t,t._i=[],t.init=function(e,n,r){function o(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var u=t;"undefined"!=typeof r?u=t[r]=[]:r="mixpanel",u.people=u.people||[],u.toString=function(e){var t="mixpanel";return"mixpanel"!==r&&(t+="."+r),e||(t+=" (stub)"),t},u.people.toString=function(){return u.toString(1)+".people (stub)"},i="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");for(s=0;s<i.length;s++)o(u,i[s]);t._i.push([e,n,r])},t.__SV=1.2;var o=function(){var e=document,t=e.createElement("script");t.type="text/javascript",t.async=!0,t.src="undefined"!=typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js",r=e.getElementsByTagName("script")[0],r.parentNode.insertBefore(t,r)};$.isLoaded==1?o():$(window).load(o)}})(document,window.mixpanel||[]);if(window.mixpanelid){function e(e,t){t=t.replace(/[[]/,"[").replace(/[]]/,"]");var n="[?&]"+t+"=([^&#]*)",r=new RegExp(n),i=r.exec(e);return i===null||i&&typeof i[1]!="string"&&i[1].length?"":decodeURIComponent(i[1]).replace(/\W/gi," ")}function t(){var t="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),n="",r={},i={},s;for(s=0;s<t.length;++s)n=e(document.URL,t[s]),n.length&&(r[t[s]+" [last touch]"]=n);for(s=0;s<t.length;++s)n=e(document.URL,t[s]),n.length&&(i[t[s]+" [first touch]"]=n)}if(window.mixpanelid==="0a226de2b3e76e79238ac2bd0905b2ee"||window.mixpanelid==="2c9ab7852e081744050665054208dc1d")CT.utils.cookies.read("mp_2c9ab7852e081744050665054208dc1d_mixpanel")!=null&&CT.utils.cookies.erase("mp_2c9ab7852e081744050665054208dc1d_mixpanel",".cleartrip.com"),CT.utils.cookies.read("mp_1179ebc820df9415ed9b68de9d9fcffc_mixpanel")!=null&&CT.utils.cookies.erase("mp_1179ebc820df9415ed9b68de9d9fcffc_mixpanel",".cleartrip.com"),CT.utils.cookies.read("mp_0a226de2b3e76e79238ac2bd0905b2ee_mixpanel")!=null&&CT.utils.cookies.erase("mp_0a226de2b3e76e79238ac2bd0905b2ee_mixpanel",".cleartrip.com");mixpanel.init(mixpanelid,{upgrade:!0,persistence:"localStorage",cross_subdomain_cookie:!1}),t()}}},imgAdjust:function(e){var t=$(this),n=t.parent();if(t.attr("src")==""||t.css("visibility")=="visible")return!1;n.hasClass("loader")&&n.removeClass("loader"),t.css("position","relative");if(e===undefined||e===!1)if(t.width()<=t.height()){t.css("width","100%");if(t.height()>n.height()){var r="-"+(t.height()-n.height())/4+"px";t.css("top",r)}}else{t.css("height","100%");if(t.width()>n.width()){var i=(n.width()-t.width())/2+"px";t.css("left",i)}if(t.width()<n.width()){t.css("width","100%"),t.css("height","auto");var r="-"+(t.height()-n.height())/4+"px";t.css("top",r)}}return t.css("opacity",0).animate({opacity:1,visibility:"visible"},.5),this},add:function(e,t){return e+t},subtract:function(e,t){return e-t},getType:function(e){return Object.prototype.toString.call(e)},openPopup:function(e){this.showModalDialog(e.url,e.width,e.height,!0,!0)},showModalDialog:function(e,t,n,r,s,o,u,a,f,l,c,h,p){function k(e,t){htm=window.top.document.getElementsByTagName("html")[0],body=window.top.document.getElementsByTagName("body")[0],htm.style.height=e,$(body).hasClass("mapView")!=1&&(htm.style.overflow=t),body.style.height=e,$(body).hasClass("mapView")!=1&&(body.style.overflow=t)}function L(e){selects=window.top.document.getElementsByTagName("select");for(i=0;i<selects.length;i++)selects[i].style.visibility=e}function A(){if(!window.isMobileUA)try{$.browser.msie?$("#TranslucentLayer").css({height:H+"px"}):$("#TranslucentLayer").css({height:document.body.offsetHeight>H?document.body.offsetHeight+"px":H+"px"})}catch(e){}E.css({left:(document.body.offsetWidth-E.offsetWidth)/2+"px"}),E.css({top:(H-P)*100/(2*H)+"%"})}function O(e){var t=c==undefined?!0:c();if(t===!0){window.top.scrollTo(0,y),window.isMobileUA||k("auto","auto"),L("visible"),$(document,window.frames.modal_window).unbind("keyup.meals_modal_window click.meals_modal_window"),window.isMobileUA||($(document,window.frames.modal_window).unbind("DOMMouseScroll.meals_modal_window mousewheel.meals_modal_window keydown.meals_modal_window"),window.top.$("#TranslucentLayer").remove()),window.isMobileUA&&window.top.window.$("body").removeClass("noScroll"),$(window).unbind("resize.meals_modal_window",A),window.top.$("#"+u).remove();var n=window.top.document.getElementsByTagName("html")[0];$("#FBmodal")&&$("#FBmodal").remove(),CT.app=="dp"?o&&o():o&&o(y),e&&$(e.target).attr("data-callback")&&$(e.target).attr("data-callback")==="true"&&h&&h.callBackFunc&&h.callBackFunc(),CT.app=="hotel"&&CT.settings.currentTab&&CT.cache[CT.settings.currentTab].guidedNav!=null&&CT.cache[CT.settings.currentTab].guidedNav==1&&h&&h.callBackFunc&&h.callBackFunc(),$(".updatingModal").length>0&&window.parent.$(".updatingModal").hide()}}e.search("refund-policy")!=-1&&CT.utils.helperFunctions.trackGAEvent("Flights_TR","click","RefundPolicy","100");if(s){var d=screen.availWidth/2-parseInt(t)/2,v=screen.availHeight/2-parseInt(n)/2,m=r?0:1,g="height="+n+",width="+t+",left="+d+",top="+v+"screenX="+d+",screenY="+v+",status=yes,toolbar=no,scrollbars="+m+",menubar=no,location=no,resizable=yes";return window.open(e,"window",g),!1}var y,b=window.pageYOffset||document.documentElement.scrollTop||0,w=$("<div/>",{id:"TranslucentLayer"});u==undefined&&(u="ModalFrame"),h===undefined||h.callBackAttr==undefined?closeAttrCallback=!1:closeAttrCallback=h.callBackAttr;var E=$("<div/>",{id:u}),S=$("<div/>");if(l!==undefined&&l===!0){var x=$("<span/>",{"class":"stickyPin"});S.append(x)}var T=$("<a/>",{id:"close","data-callback":closeAttrCallback,title:"Close window"}),N="true",C=f==undefined?"true":f;e.search("guided-nav-modal")!=-1?y=0:self.pageYOffset?y=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?y=document.documentElement.scrollTop:document.body&&(y=document.body.scrollTop),L("hidden"),$(window).bind("resize.meals_modal_window",A),CT.utils.hideModalDialog=O,window.isMobileUA||$(document.body).append(w),w.bind("click",function(){if(C){if(/^(\/hotels\/info)/.test(E.find("iframe").attr("src"))){var e=E.find("iframe").attr("src").match(/^\/hotels\/info\/(\d+)\//),t="";e&&(t=e[1]),CT.utils.helperFunctions.trackGAEvent("Hotels_TR","H_Modal_Close",t)}window.top.CT.utils.hideModalDialog()}}),S.append(T),E.append(S),$("<iframe/>",{src:e,frameborder:0,framespacing:0,width:"100%",height:"100%",scrolling:r?"no":"auto",id:"modal_window",name:"modal_window","class":"spinnerMedium"}).appendTo(E);var M=/^\/hotels\/api\/info\/\d+\/modal/;window.CT&&window.CT.app==="hotel"&&$("body").hasClass("srp")&&e.match(M)||e.indexOf("abnb")>-1?E.addClass("hotelDetailsModalFrame"):E.css({width:t||"700px",height:n||"70%"}),$(document.body).append(E);var _=$("#"+u).find("iframe")[0];$(_).bind("load",function(){$("#FBmodal")&&$("#FBmodal").remove()}),T.bind("click.meals_modal_window",function(e){window.top.CT.utils.hideModalDialog(e)}),T.bind("mouseover.meals_modal_window",function(){T.addClass("over")}),T.bind("mouseout.meals_modal_window",function(){T.removeClass("over")});if(!(window.CT&&window.CT.app==="hotel"&&$("body").hasClass("srp")&&p)){var D=($(document.body).width()-E.width())/2+"px";E.css({left:D});var P=E.height(),H=$(window).height();E.css({top:(H-P)*100/(2*H)+"%"})}window.isMobileUA||($.browser.msie?w.css({height:H+"px"}):w.css({height:document.body.offsetHeight>H?document.body.offsetHeight+"px":H+"px"})),this.bindModalEvents(N),window.isMobileUA||this.preventParentScroll(),CT&&CT.settings&&CT.settings.currentTab&&$("#ResultContainer_"+CT.settings.currentTab).length>0&&$("#ResultContainer_"+CT.settings.currentTab).find(".filters").css({"z-index":"1"})},preventParentScroll:function(){var e=[32,33,34,35,36,37,38,39,40];$(document).bind("DOMMouseScroll.meals_modal_window mousewheel.meals_modal_window",function(e){return e.preventDefault(),!1}),$(document).bind("keydown.meals_modal_window",function(t){if(_.indexOf(e,t.keyCode)!=-1)return t.preventDefault(),!1})},bindModalEvents:function(e,t){e=e||!0,e&&(keyUpHandler=function(t){t.keyCode==27&&e&&window.top.CT.utils.hideModalDialog()},$(document).bind("keyup.meals_modal_window",keyUpHandler),(t?t:$($("#modal_window").get(0).contentWindow)).bind("keyup.meals_modal_window",keyUpHandler))},shortenID:function(e){return $.trim(e.toString()).substring(0,4)},postHotelForm:function(e,t,n,r,i,s){var o=$("#FormFields").get(0),u={HChkIn:"chk_in",HChkOut:"chk_out",HDestCode:"dest_code",HState:"state",HCountry:"country",HAreaName:"areaName",HCity:"city",HNumRooms:"num_rooms"},a=_.deserialize((window.location.search!=""?window.location.search:window.location.hash).substr(1).replace(/\+/g," "),["ca1","ca2","ca3","ca4"]),f=0,l=0;_.each(_.keys(a),function(e,t){melem=_.pascalCase("h_"+e),typeof u[melem]!="undefined"?$("#"+melem).val((typeof a[u[melem]]=="string"?a[u[melem]]:a[u[melem]][0]).replace(/\+/g," ")):e!="from"&&e!="hotelId"&&e!="loc"&&(_.isArray(a[e])?_.each(a[e],function(t){$("<input/>").attr({type:"hidden",id:_.capitalize(e),name:e,value:t}).appendTo(o)}):$("<input/>").attr({type:"hidden",id:_.capitalize(e),name:e,value:a[e]}).appendTo(o),e.indexOf("children")!=-1&&(f+=Int(a[e])),e.indexOf("adult")!=-1&&(l+=Int(a[e])))}),o.num_children.value=f,o.num_adults.value=l,o.star_rating.value=t,o.hotelid.value=e,o.bookingCode.value=n,o.roomtypecode.value=r,o.topLevelRateRules.value=window.topLevelRateRules,CT.app=="hotel"&&window.product!="B2B"&&(o.sct.value=window.countryCode.toUpperCase(),o.scr.value=window.sell_currency.code.toUpperCase()),s.emi&&(o.emiJson.value=s.emi);if(!$(o).hasClass("no-action-change"))if(i){var c=window.pHttps;if(c==undefined||c==null)c="https";window.productCode?o.action=c+"://"+location.host+"/hotelBook":o.action=c+"://"+location.host+"/hotels/multistep"}else o.action="/hotels/info/"+e;return CT.utils.helperFunctions.trackGAEvent("Hotels_TR","H_Details_Book",CT.cache[CT.settings.currentTab].paramsForGA,"100"),o.submit(),!1},updateTrustHotelRoomRates:function(e,t){var n,r=CT.cache[CT.settings.currentTab].searchParams;return t=t||CT.masterJson.getHotel(e),t.priceInfo&&t.priceInfo.tc==1&&t.priceInfo.rms&&t.priceInfo.rms.length==1&&(n=$.extend(!0,r.all,r.defaults),url=CT.Mustache.to_html(CT.settings[CT.app].urls.trust,{pm:_.serialize(n),hotelId:e}),url+="&tux=1",$.ajax({url:url,type:"GET",success:function(e){e.img&&(t.img=e.img),_.each(e.rms,function(e){t.priceInfo.rms.push(e)})},error:function(e){L("trust ajax call failed")},async:!1})),t},unCheckInsuranceBox:function(){return $("#insurance_box").attr("checked",!1).trigger("click").attr("checked",!1),$(".ageError").parents("dl.travellers").find("select").removeClass("ugly").end().end().html(""),!0},showActiveCurrMenu:function(){var e=$(".ctGlobalNav .countryMenu").find("i."+countryCode).closest("li");e.addClass("current").find("a").prepend("<i class='tickMark black'></i>");var t=$(".ctGlobalNav .currencyMenu").find("span."+CT.settings.countryCurrCode[countryCode].code).closest("li");t.addClass("current").find("a").prepend("<i class='tickMark black'></i>");var n=$(".ctGlobalNav").find(".languageMenu").find("li a"),r=$(".ctGlobalNav").find(".languageLink").attr("data-lang"),i=_.filter(n,function(e){return $(e).attr("data-lang")===r});n.each(function(e){$(e).removeClass("current").find(".tickMark").remove()}),n.removeClass("current").find(".tickMark").remove(),$(i).addClass("current").prepend("<i class='tickMark black'></i>"),CT.settings.countryCurrCode.current=CT.settings.countryCurrCode[countryCode].code},diffDates:function(e,t){var n=864e5,r=e.split("/"),i=t.split("/"),s=new Date(r[2],r[1]-1,r[0]),o=new Date(i[2],i[1]-1,i[0]),u=r[1]-1,a=i[1]-1;return _Diff=Math.ceil((o.getTime()-s.getTime())/n),_Diff},timeTo12HrFormat:function(e){var t="a";return e>=12&&(t="p"),e>12&&(e-=12),e+t},getTodayDate:function(){var e=new Date;return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},setCurrency:function(e){if(window.countryCode){var t=CT.settings.countryCurrCode[countryCode].code;window.sell_currency=window.sell_currency||{code:t,symbol:""};var n=e&&e.symbol?e.symbol:CT.settings.dispCurrency[t];window.disp_currency={code:CT.settings.countryCurrCode.current?CT.settings.countryCurrCode.current:CT.settings.countryCurrCode[countryCode].code,symbol:n},this.resetCurrency()}},resetCurrency:function(){window.disp_currency&&(CT.currentCurrency=function(){var e=null;return window.currencies&&window.currencies.all&&window.sell_currency?_.forEach(window.currencies.all,function(t){t.code===window.disp_currency.code&&(e=t)}):(e={},e.name=window.disp_currency.code,e.code=window.disp_currency.code,e.rate=1,e.symbol=window.disp_currency.symbol,window.disp_currency.ts&&window.disp_currency.ds&&window.disp_currency.gp&&(e.ts=window.disp_currency.ts,e.ds=window.disp_currency.ds,e.gp=window.disp_currency.gp)),e}());if(CT.currentCurrency==null||CT.currentCurrency==undefined)CT.currentCurrency={name:"Indian Rupees",code:"INR",rate:1,symbol:"Rs.",ts:",",ds:".",gp:"3,2"}},loadTrackers:function(e){function t(e){_.each(e,function(e,t){e()})}function n(){var n=window.hotelBaseLink||window.airBaseLink||window.staticBaseLink||"",r="";CT.app==="air"?r="airTrackers":CT.app==="dp"?r="dpTrackers":r="hotelTrackers",pageName=CT.app==="air"?pageName:"home",e=="details"?t(CT.commonTrackers.details):CT.getScript({src:n+"/javascripts/trackers/"+window.countryCode+"/"+r+(window.airTrackers_js_ver||window.hotelTrackers_js_ver||window.dpTrackers_js_ver||"")+".js"},function(){e==="results"?t(CT.trackers.results):t(CT.trackers[pageName])})}try{var r=window.hotelBaseLink||window.airBaseLink||"";if(!CT.commonTrackers){var i="";CT.app==="air"?i="commonAirTrackers":CT.app==="dp"?i="commonDpTrackers":i="commonHotelTrackers",CT.getScript({src:r+"/javascripts/trackers/common/"+i+(window.commonAirTrackers_js_ver||window.commonHotelTrackers_js_ver||"")+".js"},function(){n()})}else n();CT.utils.helperFunctions.loadHeapTracking()}catch(s){}},formatForCurrency:function(e,t,n,r,i){function d(){CT.currentCurrency.symbol&&(a=CT.currentCurrency.symbol),CT.currentCurrency.ds&&(h.ds=CT.currentCurrency.ds),CT.currentCurrency.ts&&(h.ts=CT.currentCurrency.ts),CT.currentCurrency.gp&&(h.gp=$(CT.currentCurrency.gp.split(",")).each(function(e,t){t=parseInt(t,10)})),CT.currentCurrency.rate&&(f=CT.currentCurrency.rate),window.sell_currency&&window.currencies&&window.currencies.all&&_.forEach(window.currencies.all,function(e){e.code===window.sell_currency.code&&(l=e.rate)})}i=i||{};var s="",o,u,a="Rs.",f=1,l=1,c=e,h={ds:".",ts:",",gp:[3,2]},p="";d(),l&&(CT.currentCurrency.selling_rate=l),e=e*l/f,i.adjustDisplayPrice&&(e+=i.adjustDisplayPrice);if(t){o=parseFloat(e),o=parseInt(e*100,10)/100+"",u=o.split(".").length>1?o.split(".")[1]:"",o=o.split(".")[0];while(u.length<2)u+="0";c=parseFloat(c)}else o=parseInt(Math.round(e),10)+"",c=parseInt(Math.round(c),10)+"";if(o.length>h.gp[0]){s=o.substring(o.length-h.gp[0],o.length),o=o.substring(0,o.length-h.gp[0]);while(o.length>h.gp[h.gp.length-1])s=o.substring(o.length-h.gp[h.gp.length-1],o.length)+h.ts+s,o=o.substring(0,o.length-h.gp[h.gp.length-1]);o+=h.ts+s}t&&(o+=h.ds+u),a=unescape(a.replace("\\","%"));if(r)return{symbol:a,fmtPrice:o,intPrice:c,symCode:window.disp_currency.code,display:a+o};_.contains(CT.settings.singleCurrencySymbol,window.disp_currency.code)||(p=" currencyCode");var v="<span class='"+window.disp_currency.code+p+"'  data-pr='"+c+"'>"+a+"</span>";return(n?"":v+"")+(i&&i.prWrap?'<span class="'+i.prWrapClass.join(" ")+'" '+_.map(i.attr,function(e){return e.name+'="'+e.value+'"'}).join(" ")+">"+o+"</span>":o)},hashModifiers:{ca:function(e,t){var n;return t=decodeURIComponent(t.replace(/\+/g," ")),typeof this[e]=="undefined"?n=[]:n=this[e],n.push(t),[e,n]}},duplicateKeyToArray:function(e,t){var n;return t&&(t=decodeURIComponent(t.replace(/\+/g," "))),typeof this[e]=="undefined"?n=[]:n=this[e],n.push(t),[e,n]},durToMins:function(e){if(e.indexOf("h")>=0&&e.indexOf("m")>=0){var t=e.split(" "),n=parseInt(t[0],10),r=parseInt(t[1],10);return n*60+r}if(e.indexOf("h")>=0)return parseInt(e,10)*60;if(e.indexOf("m")>=0)return parseInt(e,10)},createCurrencyConverterSelectBox:function(e){return _.forEach(currencies.top,function(t){e.DISPCURRENCY.push({optVal:t.code,title:t.name,value:t.code+" "+t.symbol+" - "+t.name})}),e.DISPCURRENCY.push({optVal:"",title:"",value:"----------"}),_.forEach(currencies.all,function(t){e.DISPCURRENCY.push({optVal:t.code,title:t.name,value:t.code+"-"+t.name})}),e},showLoader:function(e,t,n){t||CT.utils.hideModalDialog&&CT.utils.hideModalDialog();if(typeof e=="undefined")return!1;var r=$("#OverlayTpl").html(),i,s,o,u;s=t?$(".updatingModal").first().clone():$("#Overlay"),s.html(r),s.css("position","absolute"),t?i=s.find(".spinner"):i=s.find("#spinner"),i.append("<strong>Just a moment</strong><small>"+(t?CT.messages[CT.app][e]:CT.settings[CT.app].updatingMsgs[e].msg)+"</small>"),o=$(n||window).height(),u=$(n||document).width(),s[n?"appendTo":"show"](n).show(),t?i.css({position:"absolute",left:u/2-i.width()/2,top:o/2-i.height()/2}):i.css({left:u/2-i.width()/2,top:o/2-i.height()/2}),t||setTimeout(function(){s.hide()},2e3)}}),!function(e){typeof window.define!="undefined"?define("ct_utils",["vendor/mustache"],e):window.Mustache?e(Mustache):e(null)}(function(e){CT.Mustache=e,CT.utils.genericBlocks={createUserAccountNav:function(e){var t,n,r,i;e=e||$("#userAccountNav");try{e[0]&&(window.isHandlebars?t=App.templateAdapter.getTemplate("common/userAccountNav"):t=$("#userAccountNavTmpl"),n={},CT.settings=CT.settings||{},CT.settings.ctAuthCookieName=CT.settings.ctAuthCookieName||(/dp\.cleartirp\.com|vegas\.cleartrip\.com/.test(window.location.hostname)?"dev-usermisc":"usermisc"),CT.utils.cookies.read(CT.settings.ctAuthCookieName)&&unescape(CT.utils.cookies.read(CT.settings.ctAuthCookieName)).split("|")[0]=="SIGNED_IN"?(n.isSignedIn=!0,n.info=unescape(CT.utils.cookies.read("userid")).split("|"),n.screen_name=unescape(CT.utils.cookies.read("userid")||"Your account").split("|"),n.screen_name=n.screen_name[1]||n.screen_name[0],n.info[2]&&(n.info[2]=="M"?n.gender="man_24":n.gender="woman_24"),n.info[3]&&(n.profileLink=n.info[3]),CT.utils.cookies.read("ct_rt")=="E"&&(n.elite=!0)):CT.utils.cookies.read("unconfirmed-email")?(n.isUnConfirmed=!0,n.user_id=unescape(CT.utils.cookies.read("unconfirmed-email")),n.isSignedIn=!0,n.screen_name="Guest"+CT.utils.cookies.read("unconfirmed-email")?" ("+unescape(CT.utils.cookies.read("unconfirmed-email"))+")":""):n.isUnSignedIn=!0,window.countryCode=="in"&&(n.india=!0),n.show_currency_converter=window.load_currency_converter||!1,window.enableTranslation?n.showLang=window.countryCode=="ae"||window.countryCode=="sa":n.showLang=!1,n.isShortlistEnabled=!0,t.length>0&&(window.isHandlebars?e.html(t(n)):e.html(CT.Mustache.to_html(t.html(),n))),$.userNavReady=!0,CT.utils.helperFunctions.forceHttpsLinks(e),CT.app=CT.app||"global",CT.app!=null&&(r=e.find("#userAccountMenu"),i=e.find("#userAccountLink"),i[0]&&i.on("click",function(e){r.toggle(),i[(r.get(0).style.display!="none"?"add":"remove")+"Class"]("current")}),$("#global_signout").on("click",function(e){e.preventDefault();var t=decodeURIComponent(CT.utils.cookies.read("userid")).split("|")[4];window._gaq&&_gaq.push(["_trackEvent","account_users","signout",t]),window.Moengage&&Moengage.destroy_session&&Moengage.destroy_session(),window.cleverTapEnabled&&CT.utils.helperFunctions.tpTrack&&CT.utils.helperFunctions.tpTrack({tp:"clevertap",logout:!0}),CT.utils.cookies.read("fb")?FB.getLoginStatus(function(e){e.status=="connected"?FB.logout(function(e){window.location.href="/signout"}):window.location.href="/signout"}):window.location.href="/signout"})),CT.userAccountNavOnReady&&_.each(CT.userAccountNavOnReady,function(e){e()},{}))}catch(s){}},displayLanguagePrefBanner:function(){$(document.body).prepend('<div id="languagePrefBanner" class="floatingMessageContainer animated bounceInDown" ><div class="floatingMessage" style="width:510px"><div class="info relative clearFix"><a class="fRight icon close" style="display:none;"></a><h3 class="" style="text-align:center;font-size:2.0em">Choose your language &nbsp;&nbsp;<span style="font-size: 1.4em;vertical-align: text-top;">&#1575;&#1582;&#1578;&#1585; &#1604;&#1594;&#1578;&#1603;&lrm;</span></h3><p style="font-size:17px;padding-left:3.75em"></p></div><div class="actionBar"><p style="text-align:center;padding:0px;"><input type="button" class="default button" value="English" id="english_site_pref">&nbsp;&nbsp;<input type="button" class="default button" value="&#1575;&#1604;&#1593;&#1585;&#1576;&#1610;&#1577;" id="arabic_site_pref"></p></div></div></div>'),$("#languagePrefBanner").center().addClass("animated bounceInDown");var e=$(window).height(),t=$("<div/>",{id:"TranslucentLayer",style:"background-color:transparent"});$.browser.msie?t.css({height:e+"px"}):t.css({height:document.body.offsetHeight>e?document.body.offsetHeight+"px":e+"px"}),$(document.body).append(t),$("#arabic_site_pref").click(function(){CT.utils.cookies.create("lp","ar",365),window.location.href="/ar/"}),$("#english_site_pref").click(function(){CT.utils.cookies.create("lp","en",365),$("#languagePrefBanner").hide(),$("#TranslucentLayer").remove()})},displayNonArabicBanner:function(){window.CT.langUrlPrefix&&window.CT.langUrlPrefix.indexOf("ar")!=-1&&$("a").on("click",function(e){if(e.currentTarget.href&&e.currentTarget.href!="javascript:void(0)"&&e.currentTarget.href!="javascript:void(0);"&&e.currentTarget.href!="#"){var t=e.currentTarget.href;if(t.indexOf("/ar/")!=t.length-4&&t.indexOf("/flights")==-1&&t.indexOf("/account")==-1&&t.indexOf("/ticket")==-1&&t.indexOf("/faq")==-1&&t.indexOf("/support")==-1&&t.indexOf("/flight-schedule/")==-1&&t.indexOf("/flight-tickets/")==-1&&t.indexOf("/flight-booking/")==-1){var n=t;e.preventDefault(),e.stopPropagation(),$(document.body).prepend('<div id="nonArabicPageBanner" class="floatingMessageContainer animated bounceInDown" ><div class="floatingMessage" style="width:510px"><div class="info relative clearFix"><a class="fRight icon close" style="display:none;"></a><h3 class="icon32 info">Going to the English site</h3><p style="font-size:17px;padding-left:3.75em">Arabic is coming soon ...</p></div><div class="actionBar"><p><input type="button" class="default primary" value="Proceed to English site" id="nonArabicPageBannerProceed"></p></div></div></div>'),$("#nonArabicPageBanner").center().addClass("animated bounceInDown"),$("#nonArabicPageBannerProceed").click(function(){$("#nonArabicPageBanner").hide(),window.location.href=n}),setTimeout(function(){$("#nonArabicPageBanner").hide(),window.location.href=n},3e3)}}})},displayLanguagePrefToolTip:function(){if(!window.isHomePage||window.CT.countryCode!="sa")return;var e=function(){setTimeout(function(){$(".currencyMenuContainer, .countryMenuContainer, .userAccountMenuContainer").css("opacity",".3");var e=window.CT.langUrlPrefix?window.CT.langUrlPrefix.substring(1):"en";$("#langDropDownToolTip .tipsyInner."+e).show(),$("#langDropDownToolTip").fadeToggle(),$(".languageMenuContainer").addClass("highlight"),$(".languageMenuContainer .languageLink").css("font-weight","bold"),setTimeout(function(){$(".currencyMenuContainer, .countryMenuContainer, .userAccountMenuContainer").css("opacity","1")},4e3)},2e3)},t=parseInt(CT.utils.cookies.read("lp_ttc"));t?t<=5&&(CT.utils.cookies.create("lp_ttc",t+1),e()):(CT.utils.cookies.create("lp_ttc",1),e())},hideLanguagePrefToolTip:function(){$("#langDropDownToolTip")[0]&&($("#langDropDownToolTip").hide(),$(".languageMenuContainer").removeClass("highlight"),$(".languageMenuContainer .languageLink").css("font-weight","normal"))}},$.extend(CT.utils.helperFunctions||(CT.utils.helperFunctions={}),{createSlideView:function(e,t,n,r,i){function f(){_.each([{linkCls:"scrollLeft",divCls:"left",name:"prev"},{linkCls:"scrollRight",divCls:"right",name:"next"}],function(e){i.append(o[e.name]=$(CT.Mustache.to_html(s,e)))})}function l(n,r){var i=parseInt(e.css("left").replace("px",""),10);n=="left"?r=-(t*r)+a:r=t*r-a,r=i+r,e.css("left",r+"px")}function c(){f(),o.next.show(),e.css("left","0px"),o.next.on("click",function(){l("left",u),o.next.hide(),o.prev.show()}),o.prev.on("click",function(){l("right",u),o.next.show(),o.prev.hide()})}var s='<div class="disclosureFade {{divCls}}" style="display:none;"><a class="{{linkCls}}" href="javascript:void(0);"></a></div>',o={prev:{},next:{}},u=r-n,a=r==4?50:285;i=i||e,c()}}),$(document).ready(function(){try{$(document).ajaxSend(function(e){function n(){var e=document.createElement("a");e.href=t[2].url;var n=e;n.pathname.indexOf("/ar/")!=0&&(n.pathname="/ar"+n.pathname),t[2].url=n.pathname+n.search,window.console&&console.log("Altered URL >>",t[2].url)}var t=arguments;window.CT.langUrlPrefix&&window.CT.langUrlPrefix.indexOf("ar")!=-1&&n()});try{(window.isMobileUA||window.isMobileRequest)&&window.location.pathname.indexOf("hotels")>0&&CT.utils.merchandisingBanner&&typeof CT.utils.merchandisingBanner.create=="function"&&(window.enableAppBannerAutomationMob&&window.appDownloadBannerJson&&$("#merchandisingAppBanner")&&CT.utils.merchandisingBanner.create(window.appDownloadBannerJson,$("#merchandisingAppBanner"),"appUpsell"),window.enableOfferAutomationMob&&window.hotelOfferJson&&$("#itineraryOfferBanner")&&CT.utils.merchandisingBanner.create(window.hotelOfferJson,$("#itineraryOfferBanner"),"offer"))}catch(e){}try{window.location.pathname=="/"&&window.productCode!=="CP"&&window.productCode!=="AG"&&CT.utils.cookies.read("ct-auth")&&!CT.utils.cookies.read("usermisc")&&(CT.utils.cookies.erase("ct-auth","."+window.location.host.split(".").splice(1,2).join(".")),CT.utils.cookies.erase("userid","."+window.location.host.split(".").splice(1,2).join(".")),CT.utils.cookies.erase("ct-auth",window.location.host),CT.utils.cookies.erase("userid",window.location.host))}catch(e){}if(CT.app&&(CT.app==="hotel"||CT.app==="air"||CT.app==="dp"||CT.app==="bus")){var t=navigator.userAgent.match(/iPad/i)!=null;t==1&&$(".tempFilter").css("visibility")=="hidden"&&$(".tempFilter").css("visibility","visible")}CT.utils.genericBlocks.createUserAccountNav();if(CT.app&&(CT.app==="hotel"||CT.app==="air"||CT.app==="dp"||CT.app==="shortlist")&&$(".ctGlobalNav")[0]){var n=CT.settings.countryCurrCode[countryCode].symbol,r=CT.settings.countryCurrCode[countryCode].code,i="";r!==n&&(i="<span class='"+r+"'>&nbsp;"+n+"</span>"),$(".ctGlobalNav .currencyLink").html("<strong>Currency</strong>&nbsp;&nbsp;"+r+""+i),$(".ctGlobalNav .countryLink .flagIcon").text(CT.settings.countryCurrCode[countryCode].name).addClass(countryCode)}window.CT.countryCode=="sa"&&!CT.utils.cookies.read("lp")&&window.location.pathname=="/"&&window.location.search==""&&CT.utils.genericBlocks.displayLanguagePrefBanner(),CT.utils.helperFunctions.forceLanguagePrefix(),CT.utils.genericBlocks.displayNonArabicBanner(),CT.utils.helperFunctions.storeUserReferer(),CT.utils.helperFunctions.storePaidChannelSource()}catch(e){window.ct_debug&&L(e)}})}),jQuery.fn.extend(jQuery.fn,{identity:function(){return this},setLoad:function(e){function t(){$(this).closest(".loader").removeClass("loader").end().parent().css("visibility","visible").end().fadeIn("slow")}return e=e||t,this.each(function(){this.complete||this.readyState===4?e.call(this):$(this).load(e)})},showLoader:function(e,t){return this.each(function(){CT.utils.showLoader(e,t,this)})},hideLoader:function(){var e=this.find(".updatingModal");return e.length===1?e.css("display","none"):e.last().remove(),$("#Overlay").hide(),this},center:function(){return this.css("position","absolute"),this.css("top",($(window).height()-this.outerHeight())/2+$(window).scrollTop()+"px"),this.css("left",($(window).width()-this.outerWidth())/2+$(window).scrollLeft()+"px"),this}}),CT.utils.tweakDate=CT.utils.swapDayMonth,$(window).load(function(){try{$.isLoaded=!0;var e=!0;$.inArray(CT.app,["hotel","air","dp","bus","collections","local"])!=-1&&(CT.app!=="collections"&&CT.utils.helperFunctions.includeGAjs(),CT.utils.helperFunctions.includeComScoreTracking()),window.isHomePage&&window.CT.countryCode!="sa"&&CT.utils.helperFunctions.setUserHomeCity(),window.isMobileRequest&&CT.utils.helperFunctions.inspectLetJsForBranchIo(),CT.app==="hotel"&&window.location.pathname=="/hotels"&&CT.utils.helperFunctions.triggerFunnelCall(),CT.app&&(window.countryCode=="in"||window.countryCode=="ae")&&(CT.app=="air"||CT.app=="hotel")&&(function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var t=document.createElement("script");t.async=!0,t.src="//connect.facebook.net/en_US/fbds.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),e.loaded=!0}e.push(["addPixelId","551295824981249"])}(),window._fbq=window._fbq||[],window._fbq.push(["track","PixelInitialized",{}])),CT.utils.genericBlocks.displayLanguagePrefToolTip()}catch(t){window.ct_debug&&L(t)}}),$(document).ready(function(){$scroll_count=0;try{$(window).bind("scroll",function(){$scroll_count+=1})}catch(e){}}),$(window).load(function(){try{window.eventList=window.eventList||[],$("body").append('<div id="fb-root"></div>'),$.ajaxSetup({cache:!0}),$.getScript("//connect.facebook.net/en_UK/all.js",function(){typeof FB!="undefined"&&(FB.init({appId:"293814704002168"}),FB.getLoginStatus(function(e){if(e.authResponse&&typeof e.authResponse!="undefined"&&!CT.utils.cookies.read("userid")){var t=e.authResponse.userID;$.ajax({url:"/fb/auto_login",data:{caller:"fblogin",id:t,access_token:e.authResponse.accessToken,service:window.location.pathname},success:function(e){e.url&&(window.location.href=e.url)}})}else window.fbLog=!1}))}),function(){try{window.isWL&&top.location.hostname!==window.location.hostname&&(top.location.hostname=window.location.hostname)}catch(e){e.name==="SecurityError"&&window.document.write("Oops!!")}}(),window.navigator.userAgent.indexOf("iPad")==-1&&CT.app==="hotel"&&(window._gaq=window._gaq||[]),CT.utils.trackers.page_count(),CT.utils.helperFunctions.forceHttpsLinks(),window.isMobileUA!=1&&CT.utils.helperFunctions.createOfferBand(),window._errs&&(window._errs.meta={email:unescape(CT.utils.cookies.read("userid")||"un-signed-user")}),window.enableOldFlashSaleFlow&&CT.utils.helperFunctions.showFlashSaleTag();var e=CT.utils.helperFunctions.store;if(e)try{var t=e().getItem("events");t&&t.indexOf("Bus")===-1&&e().removeItem("events")}catch(n){}CT.utils.helperFunctions.initLogger(),$(document).bind("click",function(e){if($(e.target).css("display")!=="none"){e.target.id!="smallWorldApp"&&!$(".smallWorldApp").find(e.target).length&&$(".moreProducts").hide(),!$(e.target).hasClass("languageLink")&&!$(".languageLink").find(e.target).length&&($(".languageLink").removeClass("current"),$(".languageMenu").hide()),!$(e.target).hasClass("currencyLink")&&!$(".currencyLink").find(e.target).length&&($(".currencyLink").removeClass("current"),$(".currencyMenu").hide()),!$(e.target).hasClass("countryLink")&&!$(".countryLink").find(e.target).length&&($(".countryLink").removeClass("current"),$(".countryMenu").hide()),!$(e.target).hasClass("otherCharges")&&!$(".farePopover").find(e.target).length&&!$(e.target).hasClass("fareBreakUpLink")&&!$(".fareBreakUpLink").find(e.target).length&&$(".farePopover").hide(),!$(e.target).hasClass("openRateDetails")&&!$(".hotelFarePopover").find(e.target).length&&!$(e.target).hasClass("agToolTip")&&!$(".agToolTip").find(e.target).length&&$(".hotelFarePopover").hide(),!$(".baggagePopover").find(e.target).length&&!$(e.target).hasClass("baggageLink")&&!$(".baggageLink").find(e.target).length&&$(".baggagePopover").hide(),!$(".refundPopOver").find(e.target).length&&!$(e.target).hasClass("farePolicyLink")&&!$(".farePolicyLink").find(e.target).length&&$(".refundPopOver").hide();if(CT.settings&&CT.settings.currentTab){var t=$("#ResultContainer_"+CT.settings.currentTab);t&&(t.removeClass("comboTabsFirstRun"),CT.utils.cookies.create("comboTabsFirstRun",!0,1))}$AccountMenu=$("#userAccountNav").find("#userAccountMenu"),$AccountLink=$("#userAccountNav").find("#userAccountLink"),e.target.id!=="userAccountLink"&&!$AccountLink.find(e.target).length&&($AccountMenu.hide(),$AccountLink.removeClass("current")),!$(e.target).hasClass("bookingDropDown")&&!$(".bookingDropDown").find(e.target).length&&$(".bookingDropDownMenu").hide()}}),$(document).bind("keypress",function(e){e.keyCode==27&&($(".languageLink").removeClass("current"),$(".languageMenu").hide(),$(".currencyLink").removeClass("current"),$(".currencyMenu").hide(),$AccountMenu=$("#userAccountNav").find("#userAccountMenu"),$AccountLink=$("#userAccountNav").find("#userAccountLink"),$AccountMenu.hide(),$AccountLink.removeClass("current"))})}catch(n){window.ct_debug&&L(n)}}),function(){window.CT||(window.CT={}),window.CT.countryCode==undefined&&(window.CT.countryCode=function(){var e="",t=window.location.hostname;return t.match(/(.).ae$/)?e="ae":t.match(/^om((.)*).cleartrip.com$/)?e="om":t.match(/^me((.)*).cleartrip.com$/)?e="me":t.match(/^bh((.)*).cleartrip.com$/)?e="bh":t=="qa2.cleartrip.com"?e="in":t.match(/^qa((.)*).cleartrip.com$/)?e="qa":t.match(/^kw((.)*).cleartrip.com$/)?e="kw":t.match(/^sa((.)*).cleartrip.com$/)?e="sa":t.match(/(.).sa$/)?e="sa":e="in",e}())}(),function(){window.CT||(window.CT={}),window.CT.langUrlPrefix==undefined&&(window.CT.langUrlPrefix=function(){var e=["ar"],t="",n=e.length;for(var r=0;r<n;r++){var i=e[r];window.location.pathname.split("/")[1]==i&&(t="/"+i)}return t}()),window.CT.langUrlPrefix.indexOf("ar")!=-1?["ae","sa"].indexOf(window.CT.countryCode)!=-1&&CT.utils.cookies.create("lp","ar",365):window.CT.countryCode=="sa"&&(window.location.search.indexOf("utm_source=")!=-1||window.location.search.indexOf("gclid=")!=-1)&&CT.utils.cookies.create("lp","en")}(),function(){window.mixpanelswitch&&(CT&&CT.app=="hotel"||window.location.pathname.indexOf("/hotels")!=-1)&&(CT.utils.trackers.includeMixPanel(),$(window).bind("beforeunload",CT.utils.helperFunctions.trackScroll)),window.isMobileUA==1&&CT.subProd=="wg"&&(dataLayer=CT.settings.GATagManager,dataLayer[0]["Date-Search"]=moment().format("DD/MM/YYYY"),dataLayer[0]["Day-Search"]=moment().format("dddd"),CT.utils.helperFunctions.includeGATagManager()),window.moengageEnabled&&window.moengageId&&CT.utils.helperFunctions.tpTrack({tp:"moengage"})}(),function(){$.inArray(CT.app,["hotel","air","dp","bus","collections","local"])!=-1&&CT.app!=="collections"&&(window._gaq=window._gaq||[])}(),CT.utils.initCleverTap=function(){window.clevertap?!window.clevertapChromePushNotification:(window.clevertap={event:[],profile:[],account:[],onUserLogin:[],notifications:[]},window.clevertap.account.push({id:window.cleverTapAccId||"W8R-KK8-W74Z"}),window.clevertap.enablePersonalization=!0,function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://d2r1yp2w7bby2u.cloudfront.net":"http://static.clevertap.com")+"/js/a.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}())},CT.utils.initCleverTap(),CT.utils.zendeskChat={},CT.utils.zendeskChat.setName=function(e,t){zE(function(){zE.identify({name:e,email:t})})},CT.utils.zendeskChat.show=function(e,t){this.resetNotes();var n=this;window.zEmbed&&this.setName(e,t)||function(r,i){var s,o,u,a,f,l=[],c=document.createElement("iframe");window.zEmbed=function(){l.push(arguments)},window.zE=window.zE||window.zEmbed,c.src="javascript:false",c.title="",c.role="presentation",(c.frameElement||c).style.cssText="display: none",u=document.getElementsByTagName("script"),u=u[u.length-1],u.parentNode.insertBefore(c,u),a=c.contentWindow,f=a.document,n.setName(e,t);try{o=f}catch(r){s=document.domain,c.src='javascript:var d=document.open();d.domain="'+s+'";void(0);',o=f}o.open()._l=function(){var e=this.createElement("script");s&&(this.domain=s),e.id="js-iframe-async",e.src="https://assets.zendesk.com/embeddable_framework/main.js",this.t=+(new Date),this.zendeskHost="cleartripcare.zendesk.com",this.zEQueue=l,this.body.appendChild(e)},o.write('<body onload="document._l();">'),o.close()}()},CT.utils.zendeskChat.addTag=function(e){$(document).ready(function(){zE(function(){$zopim(function(){$zopim.livechat.addTags(e)})})})},CT.utils.zendeskChat.setNote=function(e){$(document).ready(function(){zE(function(){$zopim(function(){$zopim.livechat.setNotes(""),$zopim.livechat.setNotes("_________________________\n"+e+"\n_________________________\n")})})})},CT.utils.zendeskChat.resetNotes=function(){window.zE&&window.zE(function(){$zopim(function(){$zopim.livechat.setNotes("")})})},CT.utils.zendeskChat.formatJSON=function(e){return e=typeof e=="string"?e:JSON.stringify(e),e.replace(/["{}]/g,"").replace(/,/g,"\n").replace(/:/g,"->")},CT.utils.zendeskChat.showCall=function(){var e=document.createElement("div");e.id="zendeskCall",e.classList="mt10 mb10 mr20 ml20 icon phone",e.setAttribute("style","position:fixed;bottom:0;left:0;width: 48px;height: 48px;background:rgb(100,255,100);z-index:999998;border-radius:100%;cursor:pointer;");var t=document.createElement("div");t.setAttribute("style","position:absolute;background:rgb(255,255,0);top: -70px;left: 50px;font-size: 1.2em;border:1px solid black;");var n=document.createElement("div");n.innerHTML="Name";var r=document.createElement("input"),i=document.createElement("div");i.innerHTML="Phone-Number";var s=document.createElement("input"),o=document.createElement("button");o.classList="mt10 mb10 mr10 ml10",o.setAttribute("style","border:1px solid black;"),o.innerText="Push To Zendesk",t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(s),t.appendChild(o),t.hidden=!0,e.appendChild(t),document.body.appendChild(e),e.addEventListener("click",function(){t.hidden=!t.hidden}),t.addEventListener("click",function(e){e.stopPropagation()}),o.addEventListener("click",function(){$.ajax({url:"https://cleartripcare.zendesk.com/api/v2/tickets.json",contentType:"application/json",type:"POST",data:JSON.stringify({ticket:{subject:"Please call me back on"+s.innerText,comment:{body:"hi"}}})}).done(function(e){window.console&&console.log(e.ticket)})})},CT.utils.zendeskChat.hideChat=function(){$(document).ready(function(){$(".zopim").is(":visible")&&zE(function(){$zopim(function(){$zopim.livechat.hideAll()})})})},CT.utils.zendeskChat.removeTag=function(e){$(document).ready(function(){window.zE&&window.zE(function(){$zopim(function(){$zopim.livechat.removeTags(e)})})})},CT.utils.zendeskChat.clevertapOnWidgetShown=function(e){$(document).ready(function(){zE(function(){$zopim(function(){$zopim.livechat.setOnConnected(function(){setTimeout(function(){$(".zopim").is(":visible")&&CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"Chat widget shown",values:e})},2e3)})})})})},CT.utils.zendeskChat.clevertapOnClick=function(e){$(document).ready(function(){zE(function(){$zopim(function(){$zopim.livechat.window.onShow(function(){CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"Chat icon clicked",values:e})})})})})},CT.utils.zendeskChat.clevertapOnMinimize=function(e){$(document).ready(function(){zE(function(){$zopim(function(){$zopim.livechat.window.onHide(function(){CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"Chat window minimized",values:e})})})})})},CT.utils.zendeskChat.hideOnAllAgentsBusy=function(){$(document).ready(function(){zE(function(){$zopim(function(){$zopim.livechat.setOnConnected(function(){var e="Trip Support";$zopim.livechat.departments.setVisitorDepartment(e);var t=$zopim.livechat.departments.getDepartment(e);t.status=="offline"?$zopim.livechat.hideAll():$zopim.livechat.isChatting()?window.zE.activate():$zopim.livechat.button.show()})})})})},!function(e){e()}(function(){var e={};return CT.masterJson={get:function(){return e[CT.settings.currentTab]},set:function(t,n){var r=CT.settings.currentTab;return e[r]=t,t},update:function(t,n){for(var r in t.ht)e[CT.settings.currentTab].ht.push(t.ht[r]);return t},setFlightRank:function(){try{var t=this;setTimeout(function(){var n=_.clone(e[CT.settings.currentTab].mapping);_.each(n,function(e,n){var r=1;t.flightRanks[n]=[],e=_.sortBy(e,function(e){return Number(e.content[0].dp.replace(":",""))}),e=_.sortBy(e,function(e){if(e.fare[e.fare.dfd])return e.fare[e.fare.dfd].pr;if(e.fare.SPLRT)return e.fare.SPLRT[0][e.fare.SPLRT[0].dfd].pr});var i;_.each(e,function(e){i&&i.fare[i.fare.dfd]&&e.fare[e.fare.dfd]&&i.fare[i.fare.dfd].pr==e.fare[e.fare.dfd].pr?(r--,r+=.01):r=Math.floor(r),e.priceRank=r.toFixed(2),i=e,r++,t.flightRanks[n].push(e.priceRank)})})},1e3)}catch(n){window.ct_debug&&window.console.log(n)}},flightRanks:{}}}),!function(e,t,n){n[e]=t(CT.View,Mustache)}("searchTab",function(e,t){var n=e({$el:$(".recentTabs"),tabId:0,template:null,events:{"click li":"onClick"},initialize:function(){CT.cache.tabsMap={}},pickDepartDate:function(e){return e.depart_date?e.depart_date:e.depart_date_1},pickCities:function(e){return e.trip_type==="MultiCity"?e.origin1.split(",")[0]+" - "+e["destination"+e.num_legs].split(",")[0]:e.origin.split(",")[0]+" - "+e.destination.split(",")[0]},getTabHTMLData:function(e){var t=/air|bus|train/.test(CT.app),n=t?!e.return_date:!1;r={};var r={chk_in:e.chk_in?moment(CT.utils.swapDayMonth(t?this.pickDepartDate(e):e.chk_in)).format("D MMM"):"",has_ret_date:t?n?!1:!0:!0};r.chk_in.indexOf("NaN")>-1&&(r.chk_in="");if(t){var i=["",""];r.from=i[0].trim(),r.to=i[1].trim()}else r.city=e.city;return r.has_ret_date&&(r.chk_out=e.chk_out?moment(CT.utils.swapDayMonth(t?this.pickDepartDate(e):e.chk_out)).format("D MMM"):"",r.chk_out.indexOf("NaN")>-1&&(r.chk_out="")),t&&(r.dir=n?"â†’":"â‡„"),r},createTab:function(e,t){var n=this.$(".current").removeClass("current").end().find("ul").append(CT.to_html("RecentTabsTpl",t)).end().find("li.current").attr("id","RecentTab_"+e);return e<=1&&this.$el.hide(),n},updateTabHTML:function(e,t){return e.html(CT.to_html("RecentTabsTpl",t)),this},toggleTab:function(e){e.siblings().removeClass("current").end().addClass("current")},createSubTabId:function(e){var t=e.split("_"),n=Int(t[1])+1;return t[0]+"_"+n},onClick:function(e){e.preventDefault();var t=$(e.target),n,r;t.is("li")||(t=t.closest("li"));if(t.hasClass("current"))return this;r=t.attr("data-currid"),this.toggleTab(t),n=this.getData(r),CT.settings.currentTab=r,CT.fire("results.old",[_.pick(n,CT.settings[CT.app].searchParamKeys),r])},getData:function(e){return CT.cache.tabsMap[e]},setData:function(e,t){return CT.cache.tabsMap=CT.cache.tabsMap||{},CT.cache.tabsMap[e]=t},replaceExistingTab:function(e,t,n){var r=this.getTabHTMLData(t),i=$(e.node),s=this.getData(i.attr("data-currid"));return this.toggleTab(i),typeof n=="undefined"&&(CT.settings.currentTab=s.hasOwnProperty("chk_in")&&s.chk_in===""?e.tabId:this.createSubTabId($(e.node).attr("data-currid"))),this.setData(CT.settings.currentTab,t),i.attr("data-currid",CT.settings.currentTab),this},openNewTabWith:function(e){var t=++this.tabId,n,r=this.getTabHTMLData(e);n=this.createTab(t,r),CT.settings.currentTab=t+"_1",this.setData(CT.settings.currentTab,e),n.attr("data-currid",CT.settings.currentTab)},getCurrentTab:function(e,t){t=t||CT.settings[CT.app].searchParamKeys;var n={},r=this,i=_.pick(e,t),s=CT.cache.tabsMap;return _.each(s,function(e,s){var o=_.pick(e,t);e.hasOwnProperty("chk_in")&&!e.chk&&!e.chk_out&&(o.chk_in=i.chk_in,o.chk_out=i.chk_out);if(_.isEqual(i,o))return n.tabId=s,n.node=r.$("#RecentTab_"+s.split("_")[0])[0],!1}),n},openTab:function(e,t,n){var r=this.getCurrentTab(e,t);return $.isEmptyObject(r)?this.openNewTabWith(e):this.replaceExistingTab(r,e,n),this}});return CT.subscribe("tab.init",function(e,t,r){n.openTab(e,t,r)}),n},CT.cache.views),!function(e){e(CT.Pers)}(function(e,t){var n={recent:function(e,t){var n={tt:e.trip_type,ftg:e.origin,fr:e.from,ttg:e.destination,to:e.to,dt:e.depart_date,rt:e.return_date,ad:e.adults,cd:e.childs,inf:e.infants,intl:e.intl,sd:moment().format("MM/DD/YYYY"),fl:{al:e.airline,carr:e.carrier,cot:e["class"]},lng:CT.langUrlPrefix};return n},shortlisted:function(e,t){var n={},r={},i=e.cid?e.cid+"-"+e.cod:"-";return r[i]=e.hids,n[e.name]=r,n},last_booked:function(e,t){return e},filter_applied:function(e,t){return e},guided_nav:function(){},bookflow_dropoff:function(){},upcoming_trips:function(){},default_pref:function(){},last_refund_up:function(e,t){return e},last_completed:function(e){return e},filters:function(){},threshold:function(){}},r={recent:function(e,t,n){return e.unshift(t),e.length>10&&(e.length=10),_(e).uniq(function(e){return _.serialize(e)}).value()},shortlisted:function(e,t,n){var r=e[0],i=typeof r[t.name]!="undefined"?r[t.name]:r;return $.extend(i,t),e[0]=r,e},last_booked:function(e,t,n){return e},filter_applied:function(e,t,n){return e.unshift(t),e.length>10&&(e.length=10),_(e).uniq(function(e){return _.serialize(e)}).value()}},i={},s={recent:function(e){var n;return e.dt&&(n=+(new Date)>+(new Date(CT.utils.swapDayMonth(e.dt)))+86399e3),n?t:e},filter_applied:function(e){return e}};return _.each(n,function(t,n){e.add(n,t)}),_.each(r,function(t,n){e.add(n,t,"array")}),_.each(i,function(t,n){e.add(n,t,"expires")}),_.each(s,function(t,n){e.add(n,t,"expiryCheck")}),e}),!function(e,t,n){n[e]=t(CT.View,Mustache,CT.Store,CT.Pers)}("searchRecent",function(e,t,n,r){var i=e({$el:$(".recentSearches"),initialize:function(){$(".recentSearches").find(".cancelRecent").bind("click",this.cancelRecentFn)},update:function(e){},hideRecent:function(){this.$el.hide()},cancelRecentFn:function(e){var t=new r,n=$(".recentSearches").find(".cancelRecent");t.clear("recent"),$(".tipsy").remove(),this.$el.fadeOut()},shcPrMinVal:function(e,t,n,r,i){var s=new Array;for(var o=0;o<e.length;o++)ct.dates.diffDates(r,"15/04/2012")>=0?s.push(e[o].pr*(parseInt(t)+parseInt(n))):i=="Y"?s.push(e[o].pr*(parseInt(t)+parseInt(n))):(e[o].al!="IT"||e[o].al!="IT-RED")&&s.push(e[o].pr*(parseInt(t)+parseInt(n)));var u=s.sort();return u=u.uniq(),u.min()},minPriceCal:function(e,t,n){return _.each(e,function(r,i){e.pr=Number(e.pr)*(Number(t)+Number(n))}),_.pick(_.min(e,function(e){return Number(e.pr)}),"pr")},getCheapPrice:function(e,t){var n,r,i={},s=t.dt,o=t.rt,u=t.ad,a=t.inf,f=Number(t.spr),l=t.sd,c=0,h=-1,p=0;return outJsonArr=e.onward?e.onward:e,n=outJsonArr[moment(s,"DD/MM/YYYY").format("YYYYMMDD")],owPriceObj=n&&n.length>0&&this.minPriceCal(n,u,a),owPriceObj&&(p=Number(owPriceObj.pr)),e.rturn&&(r=e.rturn[moment(o,"DD/MM/YYYY").format("YYYYMMDD")],retPriceObj=r&&r.length>0&&this.minPriceCal(r,u,a),retPriceObj?p+=Number(retPriceObj.pr):p=0),f&&f<p?_.datesDuration(new Date,new Date(l))>0&&(c=Math.abs(f-Number(p)),h=1):f&&f>p&&_.datesDuration(new Date,new Date(l))>0&&(c=Math.abs(Number(p)-f),h=0),i.pr=p,i.diffPr=parseInt(c),i.searchDate=e.ctms,i.status=h,i},render:function(e){var t=this,n=_.filter(e,function(e){return CT.langUrlPrefix?e.lng==CT.langUrlPrefix:!e.lng});if(n&&n.length<1)return this.$el.hide();CT.utils.helperFunctions.trackGAUrl("/recentSearches_flight",100),n=_.filter(n,function(e){return e.tt!=="MultiCity"}),filterRecentData=[];var r=function(e,t){var n=e.fr==t.fr&&e.to==t.to&&e.dt==t.dt;return e.rt||t.rt?n&&e.rt==t.rt:n};return _.each(n,function(e,t){t==0?filterRecentData.push(e):_.filter(filterRecentData,function(t){return r(t,e)}).length===0&&filterRecentData.push(e)}),filterRecentData=filterRecentData.length===1?filterRecentData:_(filterRecentData).first(CT.settings[CT.app].rcntSearchTrigger).value(),t=this,this.filterRecentTab(filterRecentData,function(e){$liList=t.$el.find("li"),_.each(e,function(e){e.status!==-1&&e.diffPr>0?(e.priceStatus=e.status?"Up ":"Down ",e.cls=e.status?"bad":"good ",e.title=e.status?"Up by ":"Dropped by ",e.diffPr=CT.utils.formatForCurrency(Number(e.diffPr),!1,null,!1)):e.priceStatus=0,e.pr>0&&(e.pr=CT.utils.formatForCurrency(Number(e.pr),!1,null,!1),$($liList[e.idx]).find(".price").html(CT.to_html("PriceTmpl",e)))})}),CT.utils.helperFunctions.forceLanguagePrefix&&CT.utils.helperFunctions.forceLanguagePrefix(t.$el),this},events:{"click #RecentSearch li":"recentSearchClick"},recentSearchClick:function(e){var t=$.inArray(e.currentTarget,$(e.currentTarget).parent().children())+1;t+=":"+$(e.currentTarget).find("a strong").text(),t+=":"+$(e.currentTarget).find("a").attr("href"),CT.utils.helperFunctions.trackGAEvent("Flights_TS","Recent_Searches",t,"100")},getCalendarJson:function(e,t,n,r,i,s,o,u){var a=e[0],f=this,l=i.rt?"RoundTrip":"oneWay",c="";if(l==="RoundTrip"&&i.intl==="y"){var h=(new Date(CT.utils.swapDayMonth(i.dt))).getTime(),p=(new Date(CT.utils.swapDayMonth(i.rt))).getTime(),d=_.datesDuration(h,p);c=d.length>0?"&return_after="+d:""}$.ajax({type:"GET",url:CT.settings[CT.app].urls.calendarFare,data:a+c,contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){if(typeof a=="string")try{a=JSON.parse(a)}catch(c){a=a}if(e.length>1)e.shift(),o.onward=a.calendar_json,f.getCalendarJson(e,t,n,r,i,s,o,u);else{var h=CT.settings.countryCurrCode[countryCode].code;n===!1&&l=="RoundTrip"?(o.rturn=a.calendar_json,a.sell_currency_json.code=CT.settings.countryCurrCode[a.sell_currency_json.code.toLowerCase()].code,window.disp_currency=a.sell_currency_json,window.sell_currency=window.sell_currency||{code:h,symbol:""}):(o=a.calendar_json,a.sell_currency_json.code=CT.settings.countryCurrCode[a.sell_currency_json.code.toLowerCase()].code,window.disp_currency=a.sell_currency_json,window.sell_currency=window.sell_currency||{code:h,symbol:""}),CT.utils.resetCurrency(),function(e,n,r){priceObj=f.getCheapPrice(e,n),priceObj.idx=r,u.push(priceObj),u.length==t&&s(u)}(o,i,r)}}})},filterRecentTab:function(e,t){var n,r,i,s,o,u,a=e.length,f=[],l=this,c=[],h=[];_.each(e,function(e,i){var p,d,v=0,m=[];if(!e.dt)return!1;n=e.ftg?e.ftg.split(",")[0]:e.fr,r=e.ttg?e.ttg.split(",")[0]:e.to,e.dpd=moment(e.dt,"DD/MM/YYYY").format("DD MMM"),e.rt&&(e.rd=moment(e.rt,"DD/MM/YYYY").format("DD MMM")),s=e.ad+" Adult"+(e.ad>1?"s":""),o=e.cd>0?e.cd+" Child"+(e.cd>1?"s":""):"",u=e.inf>0?e.inf+" Infant"+(e.inf>1?"s":""):"",e.paxInfo=s+(o?", "+o:"")+(u?", "+u:""),e.arclass=e.fl.cot,d=" â‡„ ",$.browser.msie&&parseInt($.browser.version,10)<9&&(d=" &ndash; "),e.sector=n+(e.rt?d:" â†’ ")+r,p=[],p.push("/flights/"+(e.intl=="y"?"international/":"")+"results?"),p.push("from="+e.fr),p.push("&to="+e.to),p.push("&depart_date="+e.dt),e.rt&&p.push("&return_date="+e.rt),p.push("&adults="+e.ad),p.push("&childs="+e.cd),p.push("&infants="+e.inf),p.push("&class="+(e.fl.cot?e.fl.cot:"")),p.push("&airline="+(e.fl.al?e.fl.al:"")),p.push("&carrier="+(e.fl.carr?e.fl.carr:"")),p.push("&intl="+(e.intl||"")),e.searchUrl=p.join("");var g={recent:e};h.push(CT.to_html("RecentSearchTmpl",g)),isIntl=e.intl==="y"?!0:!1,owReqData=[],owReqData.push("from="+e.fr),owReqData.push("&to="+e.to),owReqData.push("&start_date="+moment(e.dt,"DD/MM/YYYY").format("YYYYMMDD")),owReqData.push("&end_date="+moment(e.dt,"DD/MM/YYYY").format("YYYYMMDD")),e.rt&&isIntl&&(v=_.datesDuration(new Date(CT.utils.swapDayMonth(e.dt)),new Date(CT.utils.swapDayMonth(e.rt))),owReqData.push("&return_after="+Number(v))),owReqData=owReqData.join(""),m.push(owReqData),isIntl===!1&&e.rt&&(retReqData=[],retReqData.push("from="+e.to),retReqData.push("&to="+e.fr),retReqData.push("&start_date="+moment(e.dt,"DD/MM/YYYY").format("YYYYMMDD")),retReqData.push("&end_date="+moment(e.rt,"DD/MM/YYYY").format("YYYYMMDD")),retReqData=retReqData.join(""),m.push(retReqData)),$(window).load(function(){CT.settings[CT.app].showFareCalendar&&l.getCalendarJson(m,a,isIntl,i,e,t,c,f)})}),h.length>0&&this.$el.css("display","block"),$("#RecentSearch").html("").append(h.join("").trim())}});return CT.subscribe("recent.update",function(e){try{if(e){var t=new r;t.set("recent",e),e.sd=(new Date).getTime(),n("Recents").set("lastFormSearch"+(CT.langUrlPrefix||""),e)}}catch(i){}}),i},CT.cache.views),!function(e,t,n){window.define?define("common/smartHomePage",["vendor/mustache","vendor/moment.min"],t):n[e]=t(Mustache)}("smartHomePage",function(e){var t={$el:$("#smartHomePageTrip"),render:function(){function t(t){var t=t;return t.isFlight=t.trip_type==e.flight?!0:!1,t.isHotel=t.trip_type==e.hotel?!0:!1,t.isTrain=t.trip_type==e.train?!0:!1,t.bookin_type="",t.isFlight?t.bookin_type="plane":t.isHotel?t.bookin_type="hotel":t.isTrain&&(t.bookin_type="train"),t.tripTitle=f(t),t.trip_date=n(t.trip_date),t.travellerMsg=u(t.travellers),t}function n(e){var e=moment(e).startOf("day"),t=moment(window.serverCurrentDate).startOf("day"),n=e.diff(t,"days");switch(n){case 0:return"Today";case 1:return"Tomorrow";default:return moment(e).format("MMM DD")}}function r(e){var t=moment(e).startOf("day"),n=moment(window.serverCurrentDate).startOf("day"),r=t.diff(n,"days");switch(r){case 0:return"today, "+moment(e).format("hA");case 1:return"tomorrow, "+moment(e).format("hA");default:return moment(e).format("ddd, DD MMM")}}function i(t){var t=t,n={};switch(t.trip_type){case e.flight:n=s(t);break;case e.hotel:n=t.hotels[0].refund_details[0];break;case e.train:n=t.trains[0].refund_details[0];break;default:}return n}function s(e){var t={},n=e.journey_type.toUpperCase();switch(n){case"OW":t=e.flights[0].refund_details[0],t.tripCancellationMsg=h(t,e.partial_cancellation);break;case"RT":t=o(e);break;case"MC":t=o(e);break;default:}return t}function o(e){var t={},n=function(e,t){return e.refund_details.length==0&&t.refund_details.length==0?-1:e.refund_details.length==0?1:t.refund_details.length==0?-1:(e=moment(e.refund_details[0].cancelled_time).valueOf(),t=moment(t.refund_details[0].cancelled_time).valueOf(),t-e)};e.flights=e.flights.sort(n);var r=moment(e.flights[0].refund_details[0].cancelled_time).valueOf(),i=e.flights.length,s=_.filter(e.flights,function(e){return e.refund_details.length!=0&&r==moment(e.refund_details[0].cancelled_time).valueOf()}),o=s[0].refund_details[0].cancelled_travellers_names.toString(),u=s.length,a=_.filter(s,function(e){return o==e.refund_details[0].cancelled_travellers_names.toString()}),f=0;f=e.travellers.ADT?f+e.travellers.ADT:f,f=e.travellers.CHD?f+e.travellers.CHD:f,f=e.travellers.INF?f+e.travellers.INF:f;var l=a.length,c="";if(!e.partial_cancellation)c="Trip cancelled on "+moment(s[0].refund_details[0].cancelled_time).format("ddd DD MMM");else if(l==u)if(l==1)if(a[0].refund_details[0].cancelled_travellers_names.length==f)c=a[0].from+"â†’"+a[0].to+" cancelled on "+moment(a[0].refund_details[0].cancelled_time).format("ddd DD MMM");else{var h=a[0].refund_details[0].cancelled_travellers_names;c+=a[0].from+"â†’"+a[0].to+" cancelled for ",c+=_.reduce(h,function(e,t,n,r){return e+((n>0?n==r.length-1?" and ":", ":"")+t)},""),c+=" on "+moment(a[0].refund_details[0].cancelled_time).format("ddd DD MMM")}else if(u==i){var p=a[0].refund_details[0].cancelled_travellers_names.toString(),d=_.filter(a,function(e){return p==e.refund_details[0].cancelled_travellers_names.toString()}).length;if(d==l){var h=a[0].refund_details[0].cancelled_travellers_names;c+="Trip cancelled for ",c+=_.reduce(h,function(e,t,n,r){return e+((n>0?n==r.length-1?" and ":", ":"")+t)},""),c+=" on "+moment(a[0].refund_details[0].cancelled_time).format("ddd DD MMM")}else c+="Part of this trip cancelled on "+moment(s[0].refund_details[0].cancelled_time).format("ddd DD MMM")}else c+="Part of this trip cancelled on "+moment(s[0].refund_details[0].cancelled_time).format("ddd DD MMM");else c+="Part of this trip cancelled on "+moment(s[0].refund_details[0].cancelled_time).format("ddd DD MMM");var v;return e.sp_rt_fare?v=s[0].refund_details[0].refund_amount:v=_.reduce(s,function(e,t){return e+Number(t.refund_details[0].refund_amount)},0),t={step:s[0].refund_details[0].step,refund_status:s[0].refund_details[0].refund_status,cancelled_time:s[0].refund_details[0].cancelled_time,refund_not_recieved_url:s[0].refund_details[0].refund_not_recieved_url,refund_amount:v,refund_currency:e.currency,sla:s[0].refund_details[0].sla,tripCancellationMsg:c},t}function u(e){var t="",n=e.ADT==undefined?0:e.ADT,r=e.CHD==undefined?0:e.CHD,i=e.INF==undefined?0:e.INF;return t+=n>0?n+(n>1?" Adults":" Adult"):"",t+=r>0?(n>0?", ":"")+r+(r>1?" Childs":" Child"):"",t+=i>0?(n>0||r>0?", ":"")+i+(i>1?" Infants":" Infant"):"",t}function a(e,t){var n="";switch(t.toUpperCase()){case"OW":n=e[0].from+" â†’ "+e[e.length-1].to;break;case"RT":n=e[0].from+" â‡„ "+e[0].to;break;case"MC":n=e[0].from,n+=_.reduce(e,function(e,t){return e+" â†’ "+t.to},"");break;default:}return n}function f(t){var n="";switch(t.trip_type){case e.flight:n=a(t.flights,t.journey_type);break;case e.hotel:n=t.hotels[0].name;break;case e.train:n=t.trains[0].from_station+"  â†’ "+t.trains[0].to_station;break;default:}return n}function l(e){switch(e.toUpperCase()){case"INR":return"Rs.";default:return e}}function c(e){var t=moment(window.serverCurrentDate),n=_.filter(e,function(e){return moment(e.departure_date_time).diff(t,"milliseconds")>=0});return n[0]}function h(e,t){var n="";if(t){var r=e.cancelled_travellers_names;n+="Trip cancelled for ",n+=_.reduce(r,function(e,t,n,r){return e+((n>0?n==r.length-1?" and ":", ":"")+t)},""),n+=" on "+moment(e.cancelled_time).format("ddd DD MMM")}else n+="Trip cancelled on "+moment(e.cancelled_time).format("ddd DD MMM");return n}function p(e){var t="",n=moment(window.serverCurrentDate),i=moment(e.sla).diff(n,"milliseconds")<0,s=parseFloat(e.refund_amount),o="There is no refund applicable for this trip";switch(e.step){case"1":t+=i?"We are sorry as we couldn't update you with refund amount in time. We'll keep you updated.":"We will update you with the refund amount by "+r(e.sla);break;case"2":s<=0?t+=o:t+=i?"We are sorry as we couldn't start the transfer of "+l(e.refund_currency)+" "+e.refund_amount+" to your payment method by "+r(e.sla)+". We'll keep you updated about the progress.":"We will start the transfer of "+l(e.refund_currency)+" "+e.refund_amount+" to your payment method by "+r(e.sla);break;case"3":s<=0?t+=o:t+=l(e.refund_currency)+" "+e.refund_amount+" should be credited in your original payment method by "+r(e.sla);break;default:}return t}function d(e){var e=e;e=t(e),e.isTripDateShow=!0,e.isFlight&&(e.flights=c(e.flights),e.journey_type!="OW"&&(e.isTripDateShow=!1,e.flights.mostUpcomingTripMSg="Flight from "+e.flights.from+" on "+moment(e.flights.departure_date_time).format("ddd, DD MMM")),e.flights.departure_date_time=moment(e.flights.departure_date_time).format("HH:mm")+"hrs");if(e.isHotel){e.hotels=e.hotels[0];var n=e.hotels.full_city_name.split(",");e.hotels.cityName=n[0],e.hotels.country=n[2],e.hotels.check_in_time=moment(e.hotels.check_in_date).format("HH:mm")+"hrs",e.hotels.hotel_location_url="/hotels/details/"+e.hotels.hotel_id+"?c=&r=&mapOnly=#location",e.hotels.isRoom=e.hotels.room_count>1?!1:!0}return e.isTrain&&(e.trains=e.trains[0]),e.isAmendAvailable=window.countryCode.toLowerCase()=="in"?!0:!1,e}function v(e){var e=e;return e=t(e),e.pending_payment_details.payment_due_date=moment(e.pending_payment_details.payment_due_date).format("Do MMM, YYYY"),e.pending_payment_details.disp_currency=l(e.pending_payment_details.currency),e.pending_payment_details.payment_url="https://"+window.location.host+e.pending_payment_details.payment_url,e}function m(e){var e=e;e=t(e),e.refund_details=i(e),e.refund_details.is_step_one=e.refund_details.step=="1"?!0:!1,e.refund_details.is_step_two=e.refund_details.step=="2"?!0:!1,e.refund_details.is_step_three=e.refund_details.step=="3"?!0:!1,e.isFlight||(e.refund_details.tripCancellationMsg=h(e.refund_details,e.partial_cancellation)),e.refund_details.refund_currency=e.currency,e.refund_details.message=p(e.refund_details);var n=parseFloat(e.refund_details.refund_amount);return e.refund_details.is_refund_not_recieved_link_show=n<=0?!1:!0,e}function g(){$("#smartHomePageTrip a[appref='true']").bind("click",function(e){$(e.target).attr("target")!="_blank"&&(e.preventDefault(),setTimeout(function(){window.location.href=e.target.href},200))})}function y(){if(CT.utils.cookies.read("booking")||CT.utils.cookies.read("bookedFlight"))$(".toolsFlight").css("display","block"),window._gaq=window._gaq||[],_gaq.push(["_trackEvent","account","trip_tools_load","flights"]),CT.utils.helperFunctions.adjustHeight();if(CT.utils.cookies.read("booking")||CT.utils.cookies.read("bookedHotel"))$(".toolsHotel").css("display","block"),window._gaq=window._gaq||[],_gaq.push(["_trackEvent","account","trip_tools_load","hotels"]),CT.utils.helperFunctions.adjustHeight()}function b(t){var n="",r="";switch(t){case e.flight:n="AIR";break;case e.hotel:n="HOTEL";break;case e.train:n="TRAIN";break;default:}r="SHP_"+n+"_LOADED",window._gaq&&_gaq.push(["_trackEvent","account",r,window.location.pathname])}var e={flight:"1",hotel:"2",train:"4"};if(window.product!="B2B"){var w=CT.utils.readCTAuthCookie();if(w&&window.smartHomePage){var E=this,S=15e3,x="/partial/account/trips/priority?source=shp&t="+(new Date).getTime();$.ajax({url:x,type:"GET",timeout:S,success:function(e){var e=typeof e=="string"?JSON.parse(e):e;if(e&&Object.keys(e).length>0){switch(e.type.toLowerCase()){case"upcoming trips":var t=d(e),n=CT.to_html("smartHomePageUpcomingTrip",t);E.$el.html(n).show();break;case"refunds":var r=m(e),n=CT.to_html("smartHomePageCancelTrip",r);E.$el.html(n).show();break;case"part payment":var i=v(e),n=CT.to_html("smartHomePagePartPayTrip",i);E.$el.html(n).show();break;default:}CT.utils.helperFunctions.forceHttpsLinks($("#smartHomePageTrip")),$("#smartHomePageTrip").addClass("smartWidget"),CT.utils.helperFunctions.adjustHeight(),g(),b(e.trip_type)}else y()},error:function(e){y()}})}else y()}else y()}};return t},CT),function(){(function(e,t,n){var r,i,s;return s="slidesjs",i={width:940,height:528,start:1,enableCSS3:!0,navigation:{active:!0,effect:"slide"},pagination:{active:!0,effect:"slide"},play:{active:!1,effect:"slide",interval:5e3,auto:!1,swap:!0,pauseOnHover:!1,restartDelay:2500},effect:{slide:{speed:500},fade:{speed:300,crossfade:!0}},callback:{loaded:function(){},start:function(){},complete:function(){}}},r=function(){function t(t,n){this.element=t,this.options=e.extend(!0,{},i,n),this._defaults=i,this._name=s,this.init()}return t}(),r.prototype.init=function(){var n,r,i,s,o,u,a=this;return n=e(this.element),this.data=e.data(this),e.data(this,"animating",!1),e.data(this,"total",n.children().not(".sliderNavigation",n).length),e.data(this,"current",this.options.start-1),e.data(this,"vendorPrefix",this.options.enableCSS3?this._getVendorPrefix():null),typeof TouchEvent!="undefined"&&(e.data(this,"touch",!0),this.options.effect.slide.speed=this.options.effect.slide.speed/2),n.css({overflow:"hidden"}),n.slidesContainer=n.children().not(".sliderNavigation",n).wrapAll("<div class='slidesjs-container'>",n).parent().css({overflow:"hidden",position:"relative"}),e(".slidesjs-container",n).wrapInner("<div class='offerSpan'>",n).children(),e(".offerSpan",n).css({position:"relative",left:0}),e(".offerSpan",n).children().addClass("slidesjs-slide").css({position:"absolute",top:0,left:0,width:"100%",zIndex:0,display:"none",webkitBackfaceVisibility:"hidden"}),e.each(e(".offerSpan",n).children(),function(t){var n;return n=e(this),n.attr("slidesjs-index",t)}),this.data.touch&&(e(".offerSpan",n).on("touchstart",function(e){return a._touchstart(e)}),e(".offerSpan",n).on("touchmove",function(e){return a._touchmove(e)}),e(".offerSpan",n).on("touchend",function(e){return a._touchend(e)})),n.fadeIn(0),this.update(),this.data.touch&&this._setuptouch(),e(".offerSpan",n).children(":eq("+this.data.current+")").eq(0).fadeIn(0,function(){return e(this).css({zIndex:10})}),this.options.navigation.active&&(o=e("<a>",{"class":"previous sliderNavigation searchSprite",href:"#",title:"Previous",text:"Previous"}).appendTo(n),r=e("<a>",{"class":"next sliderNavigation searchSprite",href:"#",title:"Next",text:"Next"}).appendTo(n)),e(".next",n).click(function(e){return e.preventDefault(),a.stop(!0),typeof a.options.callback.next=="function"&&a.options.callback.next(a.data.current+2,a.data.current+1),a.next(a.options.navigation.effect)}),e(".previous",n).click(function(e){return e.preventDefault(),a.stop(!0),typeof a.options.callback.next=="function"&&a.options.callback.previous(a.data.current+2,a.data.current+1),a.previous(a.options.navigation.effect)}),this.options.play.active&&(s=e("<a>",{"class":"slidesjs-play sliderNavigation",href:"#",title:"Play",text:"Play"}).appendTo(n),u=e("<a>",{"class":"slidesjs-stop sliderNavigation",href:"#",title:"Stop",text:"Stop"}).appendTo(n),s.click(function(e){return e.preventDefault(),a.play(!0)}),u.click(function(e){return e.preventDefault(),a.stop(!0)}),this.options.play.swap&&u.css({display:"none"})),this.options.pagination.active&&(i=e("<ul>",{"class":"sliderPagination"}).appendTo(n),e.each(new Array(this.data.total),function(n){var r,s;r=e("<li>",{"class":"sliderPagination-item"}).appendTo(i);var o=t.productCode=="CP"||t.productCode=="AG"||t.countryCode!=="in"&&t.countryCode!=="ae"?"":n+1;return s=e("<a>",{href:"#","data-slidesjs-item":n,html:o}).appendTo(r),s.click(function(t){t.preventDefault(),a.stop(!0);var n=e(t.currentTarget).attr("data-slidesjs-item")*1+1;return typeof a.options.callback.next=="function"&&a.options.callback.numberclick(n,a.data.current+1),a.goto(n)})})),e(t).bind("resize",function(){return a.update()}),this._setActive(),this.options.play.auto&&this.play(),this.options.callback.loaded(this.options.start)},r.prototype._setActive=function(t){var n,r;return n=e(this.element),this.data=e.data(this),r=t>-1?t:this.data.current,e(".active",n).removeClass("active"),e("li:eq("+r+") a",n).addClass("active")},r.prototype.update=function(){var t,n,r;return t=e(this.element),this.data=e.data(this),e(".offerSpan",t).children(":not(:eq("+this.data.current+"))").css({display:"none",left:0,zIndex:0}),r=t.width(),n=this.options.height/this.options.width*r,this.options.width=r,this.options.height=n,e(".offerSpan, .slidesjs-container",t)},r.prototype.next=function(t){var n;return n=e(this.element),this.data=e.data(this),e.data(this,"direction","next"),t===void 0&&(t=this.options.navigation.effect),n.attr("id")==="hotelHomeOfferBlock"&&CT.utils.helperFunctions.trackGAEvent("Hotels_TS","H_Offers_View","Offer"+(this.data.current+1),"100"),t==="fade"?this._fade():this._slide()},r.prototype.previous=function(t){var n;return n=e(this.element),this.data=e.data(this),e.data(this,"direction","previous"),t===void 0&&(t=this.options.navigation.effect),n.attr("id")==="hotelHomeOfferBlock"&&CT.utils.helperFunctions.trackGAEvent("Hotels_TS","H_Offers_View","Offer"+(this.data.current-1),"100"),t==="fade"?this._fade():this._slide()},r.prototype.goto=function(t){var n,r;n=e(this.element),this.data=e.data(this),r===void 0&&(r=this.options.pagination.effect),t>this.data.total?t=this.data.total:t<1&&(t=1);if(typeof t=="number")return r==="fade"?this._fade(t):this._slide(t);if(typeof t=="string"){if(t==="first")return r==="fade"?this._fade(0):this._slide(0);if(t==="last")return r==="fade"?this._fade(this.data.total):this._slide(this.data.total)}},r.prototype._setuptouch=function(){var t,n,r,i;return t=e(this.element),this.data=e.data(this),i=e(".offerSpan",t),n=this.data.current+1,r=this.data.current-1,r<0&&(r=this.data.total-1),n>this.data.total-1&&(n=0),i.children(":eq("+n+")").css({display:"block",left:this.options.width}),i.children(":eq("+r+")").css({display:"block",left:-this.options.width})},r.prototype._touchstart=function(t){var n,r;return n=e(this.element),this.data=e.data(this),r=t.originalEvent.touches[0],this._setuptouch(),e.data(this,"touchtimer",Number(new Date)),e.data(this,"touchstartx",r.pageX),e.data(this,"touchstarty",r.pageY),t.stopPropagation()},r.prototype._touchend=function(t){var n,r,i,s,o,u,a,f=this;return n=e(this.element),this.data=e.data(this),u=t.originalEvent.touches[0],s=e(".offerSpan",n),s.position().left>this.options.width*.5||s.position().left>this.options.width*.1&&Number(new Date)-this.data.touchtimer<250?(e.data(this,"direction","previous"),this._slide()):s.position().left<-(this.options.width*.5)||s.position().left<-(this.options.width*.1)&&Number(new Date)-this.data.touchtimer<250?(e.data(this,"direction","next"),this._slide()):(i=this.data.vendorPrefix,a=i+"Transform",r=i+"TransitionDuration",o=i+"TransitionTimingFunction",s[0].style[a]="translateX(0px)",s[0].style[r]=this.options.effect.slide.speed*.85+"ms"),s.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){return i=f.data.vendorPrefix,a=i+"Transform",r=i+"TransitionDuration",o=i+"TransitionTimingFunction",s[0].style[a]="",s[0].style[r]="",s[0].style[o]=""}),t.stopPropagation()},r.prototype._touchmove=function(t){var n,r,i,s,o;return n=e(this.element),this.data=e.data(this),s=t.originalEvent.touches[0],r=this.data.vendorPrefix,i=e(".offerSpan",n),o=r+"Transform",e.data(this,"scrolling",Math.abs(s.pageX-this.data.touchstartx)<Math.abs(s.pageY-this.data.touchstarty)),!this.data.animating&&!this.data.scrolling&&(t.preventDefault(),this._setuptouch(),i[0].style[o]="translateX("+(s.pageX-this.data.touchstartx)+"px)"),t.stopPropagation()},r.prototype.play=function(t){var n,r,i,s=this;n=e(this.element),this.data=e.data(this);if(!this.data.playInterval){t&&(r=this.data.current,this.data.direction="next",this.options.play.effect==="fade"?this._fade():this._slide()),e.data(this,"playInterval",setInterval(function(){return r=s.data.current,s.data.direction="next",s.options.play.effect==="fade"?s._fade():s._slide()},this.options.play.interval)),i=e(".slidesjs-container",n),this.options.play.pauseOnHover&&(i.unbind(),i.bind("mouseenter",function(){return s.stop()}),i.bind("mouseleave",function(){return s.options.play.restartDelay?e.data(s,"restartDelay",setTimeout(function(){return s.play(!0)},s.options.play.restartDelay)):s.play()})),e.data(this,"playing",!0),e(".slidesjs-play",n).addClass("slidesjs-playing");if(this.options.play.swap)return e(".slidesjs-play",n).hide(),e(".slidesjs-stop",n).show()}},r.prototype.stop=function(t){var n;n=e(this.element),this.data=e.data(this),clearInterval(this.data.playInterval),this.options.play.pauseOnHover&&t&&e(".slidesjs-container",n).unbind(),e.data(this,"playInterval",null),e.data(this,"playing",!1),e(".slidesjs-play",n).removeClass("slidesjs-playing");if(this.options.play.swap)return e(".slidesjs-stop",n).hide(),e(".slidesjs-play",n).show()},r.prototype._slide=function(t){var n,r,i,s,o,u,a,f,l,c,h=this;n=e(this.element),this.data=e.data(this);if(!this.data.animating&&t!==this.data.current+1)return e.data(this,"animating",!0),r=this.data.current,t>-1?(t-=1,c=t>r?1:-1,i=t>r?-this.options.width:this.options.width,o=t):(c=this.data.direction==="next"?1:-1,i=this.data.direction==="next"?-this.options.width:this.options.width,o=r+c),o===-1&&(o=this.data.total-1),o===this.data.total&&(o=0),this._setActive(o),a=e(".offerSpan",n),t>-1&&a.children(":not(:eq("+r+"))").css({display:"none",left:0,zIndex:0}),a.children(":eq("+o+")").css({display:"block",left:c*this.options.width,zIndex:4}),this.options.callback.start(r+1),this.data.vendorPrefix?(u=this.data.vendorPrefix,l=u+"Transform",s=u+"TransitionDuration",f=u+"TransitionTimingFunction",a[0].style[l]="translateX("+i+"px)",a[0].style[s]=this.options.effect.slide.speed+"ms",a.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){return a[0].style[l]="",a[0].style[s]="",a.children(":eq("+o+")").css({left:0}),a.children(":eq("+r+")").css({display:"none",left:0,zIndex:0}),e.data(h,"current",o),e.data(h,"animating",!1),a.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"),a.children(":not(:eq("+o+"))").css({display:"none",left:0,zIndex:0}),h.data.touch&&h._setuptouch(),h.options.callback.complete(o+1)})):a.stop().animate({left:i},this.options.effect.slide.speed,function(){return a.css({left:0}),a.children(":eq("+o+")").css({left:0}),a.children(":eq("+r+")").css({display:"none",left:0,zIndex:0},e.data(h,"current",o),e.data(h,"animating",!1),h.options.callback.complete(o+1))})},r.prototype._fade=function(t){var n,r,i,s,o,u=this;n=e(this.element),this.data=e.data(this);if(!this.data.animating&&t!==this.data.current+1)return e.data(this,"animating",!0),r=this.data.current,t?(t-=1,o=t>r?1:-1,i=t):(o=this.data.direction==="next"?1:-1,i=r+o),i===-1&&(i=this.data.total-1),i===this.data.total&&(i=0),this._setActive(i),s=e(".offerSpan",n),s.children(":eq("+i+")").css({display:"none",left:0,zIndex:4}),this.options.callback.start(r+1),this.options.effect.fade.crossfade?(s.children(":eq("+this.data.current+")").stop().fadeOut(this.options.effect.fade.speed),s.children(":eq("+i+")").stop().fadeIn(this.options.effect.fade.speed,function(){return s.children(":eq("+i+")").css({zIndex:0}),e.data(u,"animating",!1),e.data(u,"current",i),u.options.callback.complete(i+1)})):s.children(":eq("+r+")").stop().fadeOut(this.options.effect.fade.speed,function(){return s.children(":eq("+i+")").stop().fadeIn(u.options.effect.fade.speed,function(){return s.children(":eq("+i+")").css({zIndex:4})}),e.data(u,"animating",!1),e.data(u,"current",i),u.options.callback.complete(i+1)})},r.prototype._getVendorPrefix=function(){var e,t,r,i,s;e=n.body||n.documentElement,r=e.style,i="transition",s=["Moz","Webkit","Khtml","O","ms"],i=i.charAt(0).toUpperCase()+i.substr(1),t=0;while(t<s.length){if(typeof r[s[t]+i]=="string")return s[t];t++}return!1},e.fn[s]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+s))return e.data(this,"plugin_"+s,new r(this,t))})}})(jQuery,window,document)}.call(this),!function(e,t,n){n[e]=t(Mustache)}("Offers",function(Mustache){var sliderOptions={width:620,enableCSS3:!1,generatePagination:!0,play:{effect:"slide",interval:8e3,auto:!1,pauseOnHover:!0}},offers={init:function(e){if(offers._init)return;var t=$.extend({product:"air",page:"home",url:"",onsuccess:offers.onsuccess},e||{});window.CT.langUrlPrefix=="/ar"&&(t.url=window.CT.langUrlPrefix+t.url),t.sliderOptions&&(sliderOptions=t.sliderOptions);var n=this;CT.getScript(t.url,function(){try{n.render(t.product,t.page,t.onsuccess),CT.utils.helperFunctions.adjustHeight()}catch(e){}})},onsuccess:function(e,t){var n,r;t&&t.length==1&&(sliderOptions.callback=sliderOptions.callback||{},n=sliderOptions.callback.loaded||function(){},sliderOptions.callback.loaded=function(t){e.find(".next.sliderNavigation, .previous.sliderNavigation, .sliderPagination-item").hide().end().find(".next.sliderNavigation").click().end().find(".slidesjs-slide").hide(),n(t),setTimeout(function(){e.find(".slidesjs-slide").show()},1e3)});if(window.home_offers&&window.home_offers.autoplay==="Y")if(window.home_offers.autoplaypausetime&&window.home_offers.autoplaypausetime[0]!="N"&&window.home_offers.autoplaypausetime.length>0){var i=window.home_offers.autoplaypausetime[0].split("-")[0],s=window.home_offers.autoplaypausetime[0].split("-")[1],o=window.serverCurrentDate?window.serverCurrentDate.getTime():(new Date).getTime();i=moment(i,"DD/MM/YYYY HH:mm").valueOf(),s=moment(s,"DD/MM/YYYY HH:mm").valueOf(),o-i>0&&s-o>0?sliderOptions.play.auto=!1:sliderOptions.play.auto=!0}else sliderOptions.play.auto=!0;sliderOptions.callback=sliderOptions.callback||{},sliderOptions.callback.next=function(e,t){CT.utils.helperFunctions.trackClaverTapEvtHotel("Hotel_Home_switchDeal",{source:"next",newPos:e,oldPos:t})},sliderOptions.callback.previous=function(e,t){CT.utils.helperFunctions.trackClaverTapEvtHotel("Hotel_Home_switchDeal",{source:"previous",newPos:e,oldPos:t})},sliderOptions.callback.numberclick=function(e,t){CT.utils.helperFunctions.trackClaverTapEvtHotel("Hotel_Home_switchDeal",{source:"number",newPos:e,oldPos:t})},e.slidesjs(sliderOptions),offers._init=!0},render:function(product,page,callback){page=_.capitalize(page);var str=product+page,$elem=$("#"+str+"OfferBlock"),offerJson=eval(window.home_offers.offers||window.home_offers);window.CT.langUrlPrefix.substr(1)=="ar"&&_.each(offerJson,function(e){e.DESC1=e.DESC1_AR||e.DESC1,e.HEADING=e.HEADING_AR||e.HEADING,e.TITLE=e.TITLE_AR||e.TITLE}),html=CT.to_html(str+"OfferTpl",{offerjson:offerJson});var $replaceLink=$elem.prev(),tmp_html=$replaceLink.html();$replaceLink.replaceWith('<div class="dealHeader"></div>').end().append(html).prev().html(tmp_html),callback&&callback($elem,offerJson),str==="hotelHome"?$elem.find(".offerTitle,.offerLink").click(function(e){var t=$(this).parent().find(".offerTitle").text(),n=$(this).siblings(".offerDescription").text(),r=Number($(this).parent().attr("slidesjs-index"))+1,i=$(this).attr("href");CT.utils.helperFunctions.trackGAEvent("Hotels_TS","H_Offers_Click",r+":"+t+":"+i,"0"),CT.utils.helperFunctions.trackMixpanelEvent("H_Hotel_Deals",{dealName:t,dealURL:i,dealRank:r});var s=n.match(/\b([A-Z]{1,})\b/g)||n.match(/\b([0-9]{1,})\b%/g)||[];s=s.join("+");var o=(t+" + "+s).trim();CT.utils.helperFunctions.trackClaverTapEvtHotel("Hotel_Home_Offers_Clicked",{offerDetails:o,cariousalRank:r,originCity:CT.utils.cookies.read("userHomeCity")?CT.utils.cookies.read("userHomeCity"):"N/A"})}):($elem.find(".offerTitle").click(function(){var e=Number($(this).parent().attr("slidesjs-index"))+1+":"+$(this).text().trim()+":"+$(this).attr("href");CT.utils.helperFunctions.trackGAEvent("Flights_TS","Deals_Clicked",e,"100")}),$elem.find(".offerLink").click(function(e){var t=Number($(this).parent().attr("slidesjs-index"))+1+":"+$(this).text().trim()+":"+$(e.target).attr("href");CT.utils.helperFunctions.trackGAEvent("Flights_TS","Deals_Clicked",t,"100")}));if(window.productCode!="CP"&&window.productCode!="AG"&&["in","ae","sa"].indexOf(window.countryCode)>-1){$elem.find(".sliderPagination").addClass("number");var viewOfferhtml={"in":"india",ae:"uae",sa:"saudi-arabia"};htmlToAdd="<li class='fRight'><a href='http://"+location.hostname+"/offers/"+(window.countryCode=="sa"&&CT.utils.cookies.read("lp")=="ar"?"ar/":"")+viewOfferhtml[window.countryCode]+"' class='viewAll' target='_blank'>View all <i class='searchSprite icoViewAll'></i></a></li>",$elem.find(".sliderPagination").append(htmlToAdd)}try{var flashSaleOffers=window.home_offers.flashsale;if(!flashSaleOffers||flashSaleOffers.length==0)CT.utils.helperFunctions.showFlashSaleTag_v2({});else for(var i=0;i<flashSaleOffers.length;i++)CT.utils.helperFunctions.showFlashSaleTag_v2(flashSaleOffers[i])}catch(e){}}};return offers},CT),CT.widgets=function(e){var t="input[type='text'],input[type='checkbox'],select,textarea",n="dd",r="",i=function(e){var t=$(e);return e.tagName.toLowerCase()=="select"?p(e):t.attr("placeholder")&&t.attr("placeholder")!==null?e.value!==t.attr("placeholder")&&e.value.length!==0:t.attr("type")=="checkbox"?t.is(":checked"):e.value.length!==0},s=function(e){var n=!0,r=!0;return $(e).find(t).each(function(e,t){i(t)||(n=!1)}),$(e).find(t).each(function(e,t){i(t)&&(r=!1)}),n==1||r==1?!0:!1},o=function(e){var t=$(e),n=$("#"+(t.attr("data-idfield")||t.attr("idfield"))),r=n.get(0);return i(e)&&r?i(r):!0},u=function(e){var t=/^\s/,n=t.test(e.value);return n?!1:!0},a=function(e){var t=$(e);if(e.value!==""&&e.value!=t.attr("placeholder")){if(t.attr("valid.max")||t.attr("valid.min")){var n=!0;return t.attr("valid.max")&&(n=parseFloat(e.value,10)<=parseFloat(t.attr("valid.max"),10)),n===!0&&e.attr("valid.min")&&(n=e.value>=parseFloat(e.attr("valid.min"),10)),n}return t.attr("valid.sign")=="no+"?e.value<=0:t.attr("valid.sign")=="no-"?e.value>=0:e.value.replace(/[^0-9.]+/g,"").length==e.value.length}return!0},f=function(e){var t=/(<([^>]+)>)/gi;return t.test(e.value)?(e.value=e.value.replace(t,""),!0):!1},l=function(e){var t=$(e),n=f(e);if(n==1)return!1;if(e.value!==""&&e.value!=t.attr("placeholder")){if(e.value==="")return!1;var r=e.value,i=r.indexOf("@"),s=r.lastIndexOf("."),o=r.indexOf(" ");if(i<0||s<0||o!=-1)return!1;var u=/^[A-Za-z0-9._%+-]+@(?:[A-Za-z0-9-]+\.)+[A-Za-z]{2,4}$/,a=u.test(r);return a?!0:!1}return!0},c=function(e){var t=$(e);if(e.value!==""&&e.value!=t.attr("placeholder")){if(CT.stringFormatting.stripAlphaChars(e.value).length<10||CT.stringFormatting.stripAlphaChars(e.value).length>17)return!1;var n=/[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9]/,r=n.test(e.value);return r?!0:!1}return!0},h=function(e){var t=$(e),n=f(e);if(n==1)return!1;if(e.value!==""&&e.value!=t.attr("placeholder")){if(CT.stringFormatting.stripAlphaChars(e.value).length>17)return!1;var r=/[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9](.)*[0-9]/,i=r.test(e.value);return i?!0:!1}return!0},p=function(e){return e.selectedIndex!==0&&e.selectedIndex!==-1},d=function(e){return e.value==""||e.value.length>=6},v=function(e){var t,n=$(e);return e.value!==""&&e.value!=n.attr("placeholder")?(t=e.value.replace(/[A-Z,a-z]/g,""),!(t.length>0)):!0},m=function(e){var t=$(e);return html_embedded_field_flag=f(e),html_embedded_field_flag==1?!1:!0},g=function(e){var t=/^[a-zA-Z]\'?([a-zA-Z]+)*(\s(([a-zA-Z]\')?)[a-zA-Z]+)*[a-zA-Z]*$/,n=$(e);return e.value!==""&&e.value!=n.attr("placeholder")?t.test(e.value):!0},y=function(e){var t=!1;window.gstNumberPattern&&(t=window.gstNumberPattern);var n=$(e);return e.value!==""&&e.value!=n.attr("placeholder")&&t?t.test(e.value):!0},b=function(e){var t=!1;window.vatNumberPattern&&(t=window.vatNumberPattern);var n=$(e);return e.value!==""&&e.value!=n.attr("placeholder")&&t?t.test(e.value):!0},w=function(e){var t=$(e),n=/^[a-zA-Z](\'[a-zA-Z])?[a-zA-Z]*$/;return e.value!==""&&e.value!=t.attr("placeholder")?n.test(e.value):!1},E=function(e){var t=$(e),n=/[^a-zA-Z0-9 ]+/;return e.value!==""&&e.value!=t.attr("placeholder")?!n.test(e.value):!0},S={".required":i,".space":u,".number":a,".email":l,".password":d,".passwordOnly":d,".phone":h,".mobile":c,".alpha":v,".grouprequired":s,".forceKey":o,".fieldValidation":m,".fullnameValidation":g,".singlenameValidation":w,".restictSplChars":E,".gstNumber":y,".vatNumber":b},x=[".grouprequired",".required",".space",".password",".passwordOnly",".number",".email",".phone",".mobile",".alpha",".forceKey",".fieldValidation",".fullnameValidation",".singlenameValidation",".restictSplChars",".gstNumber"],T={".required":"${field} got missed out",".space":"${field} should not have space",".number":"${field} is not a valid number",".email":"${field} should be a valid email address",".phone":"Phone number ${no} entered is not valid",".mobile":"Mobile number ${no} entered is not valid",".password":"${field} should be at least 6 characters long",".passwordOnly":"${field} should be at least 6 characters long",".alpha":"${field} should conatin only alphabets",".forceKey":"We do not have the ${field} you entered on record. Please pick from one of the options that appear as you type.",".fieldValidation":"${field} should contain valid entry",".fullnameValidation":"${field} should contain valid name",".singlenameValidation":"${field} should contain valid name",".restictSplChars":"${field} should not contain special characters",".arabicChars":"'${field}' should contain only english characters",".gstNumber":"${field} is not valid",custom:"${field}"},N={".required":"You missed this",".space":"${field} should not have space",".number":"${field} ${are} invalid number${s}",".email":"${field} is not a valid email address${es}",".phone":"Phone number${s} ${field} entered ${are} not valid",".mobile":"Mobile number${s} ${field} entered ${are} not valid",".password":"${field} should be at least 6 characters long",".passwordOnly":"${field} should be at least 6 characters long",".forceKey":"We do not have the ${field} you entered on record. Please pick from one of the options that appear as you type.",".alpha":"${field} should contain only alphabets",".fieldValidation":"${field} should contain valid entry",".fullnameValidation":"${field} should contain valid name",".singlenameValidation":"${field} should contain valid name",".restictSplChars":"${field} should not contain special characters",".arabicChars":"'${field}' should contain only english characters",".gstNumber":"${field} is not valid",custom:"${field}"},C={".required":"${field}",".space":"${field}",".number":"${values}",".email":"${values}",".phone":"${values}",".mobile":"${values}",".password":"${field}",".passwordOnly":"${field}",".alpha":"${field}",".forceKey":"${field}",custom:"${field}",".fieldValidation":"${field}",".fullnameValidation":"${field}",".singlenameValidation":"${field}",".restictSplChars":"${field}",".arabicChars":"${field}",".gstNumber":"${field}"},k=[],L=null,A=function(e,t){isNaN(t)?typeof t!="string"?idRef=$(t):idRef=$("#"+t):idRef=$(r).find("dd")[t],window.hotelsExpressWay&&!window.hotelPaymentEdit?$("<small class='hint ugly errorLabel'>"+e.substr(2)+"</small>").appendTo($(idRef).parent().addClass("ugly")):$("<small class='hint ugly errorLabel'>"+e.substr(2)+"</small>").appendTo($(idRef).addClass("ugly"))},O=function(e){e&&$(e).attr("errorblkid")&&$("#"+$(e).attr("errorblkid")).html("").hide(),$(e).find(".errorLabel").each(function(){var e=this;$(e).remove()}),$(e).find(".invalid").each(function(){$(this).removeClass("invalid ugly")}),$(e).find("dd.ugly").each(function(){$(this).removeClass("ugly")}),$(e).find("dt.ugly").each(function(){$(this).removeClass("ugly")}),typeof e.foreignValidation!="undefined"&&$(e.foreignValidation).length>0&&$.each(e.foreignValidation,function(e,t){var n=$(t);if(!n.length)return;n.hasClass("foreign")?($closestElem=n.closest("dd.ugly"),$closestElem.length>0&&($closestElem.find(".errorLabel").remove(),$closestElem.removeClass("invalid ugly"))):(n.find(".errorLabel").each(function(e,t){$el=$(t),$el.remove()}),n.find("dd.ugly").each(function(){$(this).removeClass("ugly")}),n.find(".invalid").each(function(){$(this).removeClass("invalid ugly")}))}),L&&L(e),e.onclearerrors&&e.onclearerrors(e)},M=null,_=function(e,t){var i=[];e&&$(e).attr("errorblkid")&&$("#"+$(e).attr("errorblkid")).html("Sorry, but we can't continue until you fix everything that's marked in <strong>RED</strong>").show(),$(t).each(function(){var e=this,t=$(e.elem),r=t.attr("errortip"),s;r?s=$("#"+r)[0]:e.elem.errorTip?s=e.elem.errorTip:s=$(e.elem).parents(n)[0]||e.elem.parentNode,t.addClass("invalid ugly"),e.dependentFields&&$(e.dependentFields).each(function(e,t){$(t).addClass("invalid ugly")}),e.name=e.name||"custom",s.errorMessages&&s.errorMessages[e.name]&&e.mess?e.mess&&e.mess!="undefined"&&s.errorMessages[e.name].push(e.mess):e.mess&&(s.errorMessages||(s.errorMessages={}),e.mess&&e.mess!="undefined"?s.errorMessages[e.name]=[e.mess]:s.errorMessages[e.name]=[]),i.push(s)}),$($.unique(i)).each(function(e,t){var n="";for(var i in t.errorMessages){var s=t.errorMessages[i],o=i,u=s.length,a="";$(s).each(function(e,t){a=a+t+(e==u-2?" and ":e==u-1?"":", ")}),a&&(u>=1?a=N[o].replace("${field}",a).replace("${are}",u>1?"are":"is").replace("${s}",u>1?"s":"").replace("${es}",u>1?"es":""):o==".required"&&(a+=" is required"),n+=", "+a)}if(t.id!=="")A(n,t),typeof clickTale!="undefined"&&clickTale.initiateErrorMessage(n,t.id);else{A(n,t);if(typeof clickTale!="undefined"){var f="";$(r).find("dd").each(function(e,n){if(n==t)return f=e,!1}),clickTale.initiateErrorMessage(n,f)}}$(t).prev().addClass("ugly"),t.errorMessages=null});if(e&&$(e).attr("errorblkid"))window.scrollTo(0,0);else{var s=parseInt($(e).offset().top);window.scrollTo(0,s)}M&&M(e,t),e&&e.onshowerrors&&e.onshowerrors(e,t)},D=function(e,n){var r=[],i=[],s=[],o=/(<([-A-Za-z0-9_]+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>)|(<\/([-A-Za-z0-9_]+)[^>]*>)/;O(e),e.beforevalidate&&e.beforevalidate(n),$(e).find("[type=text]").each(function(){var e=this,t=$(this);$.inArray(e,s)===-1&&t.val()!==t.attr("selflabel")&&o.test(t.val())&&(s.push(e),i.push({elem:e,errorTip:"please enter valid characters.",name:"custom",mess:"please enter valid characters.",dependentFields:null}))}),$(x).each(function(){var n=""+this;$(e).find(n).each(function(){var e=this,r=$(e);if(!r.attr("disabled")&&$.inArray(e,s)==-1&&S[n](e)!=1){s.push(e);if(n.indexOf("group")==-1)i.push({elem:e,mess:C[n].replace("${field}",r.attr("etitle")).replace("${values}",e.value),name:n}),s.push(e);else{var o=n.replace("group","");$(e).find(t).each(function(e,t){var n=$(t);n.attr("disabled")||$.inArray(t,s)==-1&&S[o](t)!=1&&(i.push({elem:t,mess:C[o].replace("${field}",n.attr("etitle")).replace("${numbers}",t.value),name:o}),s.push(t))})}}})}),$(e).find("[validate='true']").each(function(){var e=this,t=$(e),n=this.validatorObjects,r=!1;t.attr("disabled")||$(n).each(function(n,o){$.inArray(e,s)!=-1?r=!0:o.dependentFields&&$(o.dependentFields).each(function(e,t){$.inArray(t,s)!=-1&&(r=!0)}),!r&&o.condition(e)!=1&&(i.push({elem:e,errorTip:o.errorTip,name:o.name||"custom",mess:o.mess.replace("${field}",t.attr("etitle")).replace("${values}",e.value),dependentFields:o.dependentFields}),s.push(e),o.dependentFields&&$(o.dependentFields).each(function(e,t){$(t).attr("disabled")||s.push(t)}))})}),$(e).find(".grouprequired").each(function(e,t){});var u=[];typeof e.foreignValidation!="undefined"&&($.each(e.foreignValidation,function(e,t){var n=$(t);if(!n.length)return;n.hasClass("foreign")?n.attr("disabled")||u.push(t):n.find(".foreign").each(function(e,t){$el=$(t),$el.attr("disabled")||u.push(t)})}),$(x).each(function(){var e=""+this;$.each(u,function(){var n=this,r=$(n);if(!r.attr("disabled")&&r.attr("class").indexOf(e.replace(".",""))!=-1&&$.inArray(n,s)==-1&&S[e](n)!=1){s.push(n);if(e.indexOf("group")==-1)i.push({elem:n,mess:C[e].replace("${field}",r.attr("etitle")).replace("${values}",n.value),name:e}),s.push(n);else{var o=e.replace("group","");$(n).find(t).each(function(e,t){var n=$(t);n.attr("disabled")||$.inArray(t,s)==-1&&S[o](t)!=1&&(i.push({elem:t,mess:C[o].replace("${field}",n.attr("etitle")).replace("${numbers}",t.value),name:o}),s.push(t))})}}})}),$.each(u,function(){var e=this,t=$(e),n=this.validatorObjects,r=!1;t.attr("disabled")||$(n).each(function(n,o){$.inArray(e,s)!=-1?r=!0:o.dependentFields&&$(o.dependentFields).each(function(e,t){$.inArray(t,s)!=-1&&(r=!0)}),!r&&o.condition(e)!=1&&(i.push({elem:e,name:o.name||"custom",mess:o.mess.replace("${field}",t.attr("etitle")).replace("${values}",e.value),dependentFields:o.dependentFields}),s.push(e),o.dependentFields&&$(o.dependentFields).each(function(e,t){t instanceof jQuery||(t=$(t)),t.attr("disabled")||s.push(t)}))})})),i.length>0?(n&&n.preventDefault(),e.hasError=!0,_(e,i),e.validateerror&&e.validateerror(i)):e.validatesuccess&&e.validatesuccess(n),k=i},P=function(e){var i=document;e&&(n=e.errContainer||n,t=e.formFieldSelector||t,e.document&&(i=e.document)),$(i).delegate("form","submit",function(e){r=this;var t=this;D(t,e)})};return e.validator={delegate:P,getConditions:function(e){return e?S[e]:S},setConditions:function(e){for(var t in e)S[t]=e[t]},onShowErrors:function(e){M=e},displayErr:A,onClearErrors:function(e){L=e},clearErrors:O,showErrors:_},e}(CT.widgets||{}),!function(e,t,n){n[e]=t(Mustache,CT.View,CT.Store)}("currencyConverter",function(e,t,n){var r={events:{"click .currencyMenu li a":"changeCurrency","click .currencyLink":"showCurrencyList","click .countryLink":"showCountryList","click .countryMenu li a":"redirectCountryUrl","click .languageLink":"showLanguageList","click .languageMenu li a":"changeLang"},redirectCountryUrl:function(e){var t=e.target.nodeName.toLowerCase()==="a"?$(e.target):$(e.target).parents("a"),n=t.attr("ctValue"),r=t.attr("ctUrl");window.location.href=r+"/?c="+n.toLowerCase()},showCurrencyList:function(){$currencyLink=this.$el.find(".currencyLink"),$currencyMenu=this.$el.find(".currencyMenu"),$currencyMenu.toggle(),$currencyLink[($currencyMenu.get(0).style.display!="none"?"add":"remove")+"Class"]("current")},showCountryList:function(){$countryLink=this.$el.find(".countryLink"),$countryMenu=this.$el.find(".countryMenu"),$countryMenu.toggle(),$countryLink[($countryMenu.get(0).style.display!="none"?"add":"remove")+"Class"]("current")},showLanguageList:function(){$langLink=this.$el.find(".languageLink"),$langMenu=this.$el.find(".languageMenu"),$langMenu.toggle(),$langLink[($langMenu.get(0).style.display!="none"?"add":"remove")+"Class"]("current"),CT.utils.genericBlocks&&CT.utils.genericBlocks.hideLanguagePrefToolTip&&CT.utils.genericBlocks.hideLanguagePrefToolTip()},changeLang:function(e){var t=$(e.target),n=t.attr("data-lang");n==="Arabic"?(CT.utils.cookies.create("lp","ar",365),window.location.href="/ar/"):(CT.utils.cookies.create("lp","en",365),window.location.href="/"),CT.app==="air"&&CT.utils.helperFunctions.trackGAEvent("Home_TS","click","language_selection","100")},changeCurrency:function(e){var t=e.target.tagName.toLowerCase()==="span"?$(e.target).parents("a"):$(e.target),r={code:t.attr("data-currency"),symbol:t.attr("data-currency-symbol")},i=$("#ResultContainer_"+CT.settings.currentTab),s=CT.masterJson?CT.masterJson.get():undefined,o="",u=this.$el.find(".currencyMenu"),a=u.find("li");a.removeClass("current"),a.find("i.tickMark").remove(),t.parent().addClass("current"),r.code!==r.symbol&&(o="<span class='"+r.code+"'>&nbsp;"+r.symbol+"</span>"),this.$el.find("a.currencyLink").html("<strong>Currency</strong>&nbsp;&nbsp;"+r.code+""+o);var f=u.find("span."+r.code).closest("li");f.addClass("current").find("a").prepend("<i class='tickMark black'></i>"),CT.settings.countryCurrCode.current=r.code,CT.app=="hotel"?(CT.utils.setCurrency(r),s?i.trigger("changeCurrency.trigger"):triggerChangeCurrency()):CT.app=="shortlist"?(CT.utils.setCurrency(r),CT.fire("updateHotelObject")):CT.app=="dp"?(CT.utils.setCurrency(r),CT.utils.cookies.create("dpCurr",r.code,1),CT.fire("filters_apply")):(CT.utils.setCurrency(r),s&&($(CT.settings.selectors.filters).trigger("filters_update",[s,null,{preset:!0}]).trigger("filters_apply",[{onload:!0}]),s.jsons.searchType.roundTrip&&(!s.jsons.searchType.isIntl||s.jsons.searchType.isIntl&&s.jsons.searchType.intlSpecialRT)&&!s.jsons.searchType.multiCity&&i.trigger("changeCurrency.trigger",[s]),i.find(".miniCalendar").hide(),!s.jsons.searchType.isMeta&&!s.jsons.searchType.multiCity&&CT.fire("calendar.init"))),n("Curr").update(r)},render:function(){var e=[],t=_.extend({},window.currencies),n="",i=function(e,t){return e.name<t.name?-1:e.name>name?1:0},s=this.$el.find(".currencyMenu");if(t!==undefined&&s&&s.length>0){t.all=_.filter(t.all,function(e){return _.contains(CT.settings.currencyArr,e.name)}).sort(i),_.forEach(t.all,function(t){var n=unescape(t.symbol.replace("\\","%"));e.push({code:t.code,text:t.name,symbol:n,currencyCls:""})});var o=Math.ceil(e.length/2),u=[];u.push(e.slice(0,o)),u.push(e.slice(o,e.length)),_.each(u,function(e,t){n+="<ul class='currencyCol'>",n+=CT.to_html("CurrencyConverterTpl",{currencyMenu:e,cls:"listMenu"}),n+="</ul>"}),s.html(n)}else setTimeout(function(){r.render()},1e3);CT.utils.showActiveCurrMenu()}};return CT.subscribe("init.ccr",function(e,n){window.disp_currency||(window.disp_currency={code:"",symbol:""}),r.$el=$(".ctGlobalNav");var i=t(r),s=window.hotelBaseLink||window.airBaseLink||window.staticBaseLink||"",o=new Date,u=o.getFullYear()+""+o.getMonth()+""+o.getDate()+""+o.getHours();CT.getScript({src:s+"/json/currency.js?ts="+u},function(){i.render(),n&&typeof n=="function"&&n()});var a={Arabic:"English",English:"&#1593;&#1585;&#1576;&#1610;"},f=window.CT.langUrlPrefix==="/ar"?"Arabic":"English",l=a[f],c=r.$el.find(".languageLink");c.html(l).attr("data-lang",f).show()}),r},CT.settings),function(e){function t(e,t){return typeof e=="function"?e.call(t):e}function n(e){while(e=e.parentNode)if(e==document)return!0;return!1}function r(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}r.prototype={show:function(){if(!n(this.$element[0])||!this.$element.is(":visible"))return;var r=this.getTitle();if(r&&this.enabled){var i=this.tip();i.find(".tipsyInner")[this.options.html?"html":"text"](r),i[0].className="tipsy",i.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body),this.options.className&&i.addClass(t(this.options.className,this.$element[0]));var s=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),o=i[0].offsetWidth,u=i[0].offsetHeight,a=t(this.options.gravity,this.$element[0]),f;switch(a.charAt(0)){case"N":f={top:s.top+s.height+this.options.offset,left:s.left+s.width/2-o/2};break;case"S":f={top:s.top-u-this.options.offset,left:s.left+s.width/2-o/2};break;case"E":f={top:s.top+s.height/2-u/2,left:s.left-o-this.options.offset};break;case"W":f={top:s.top+s.height/2-u/2,left:s.left+s.width+this.options.offset}}a.length==2&&(a.charAt(1)=="W"?f.left=s.left+s.width/2-15:f.left=s.left+s.width/2-o+15),i.css(f),a.charAt(0)=="W"&&(u=i[0].offsetHeight,f.top=s.top+s.height/2-u/2,i.css(f)),i.addClass("tipsy"+a),i.find(".tipsyArrow")[0].className="tipsyArrow tipsyArrow"+a.charAt(0),this.options.fade?i.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):i.css({visibility:"visible",opacity:this.options.opacity}),this.options.zIndex&&i.css({"z-index":this.options.zIndex})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove()},destroy:function(){e(this.$element[0]).data("tipsy")&&e(this.$element[0]).data("tipsy")!=0&&e(this.$element[0]).data("tipsy",!1)},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("original-title")!="string")&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;this.fixTitle();var e,n=this.options;return typeof n.title=="string"?e=t.attr(n.title=="title"?"original-title":n.title):typeof n.title=="function"&&(e=n.title.call(t[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||n.fallback},tip:function(){var t="",n="";if(!this.$tip){if(this.options.trigger=="click"||this.options.addCloseButton)t='<a class="icon close fRight" title="Close" href="#"></a>';this.options.className&&this.options.className.indexOf("popOver")>=0&&(n='<b class="tipsyNotch tipsyArrow"></b><b class="tipsyArrow tipsyNotch"></b>'),this.$tip=e('<div class="tipsy"></div>').html(t+n+'<div class="tipsyArrow"></div><div class="tipsyInner"></div>')}return this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function i(n){var i=e.data(n,"tipsy");return i||(i=new r(n,e.fn.tipsy.elementOptions(n,t)),e.data(n,"tipsy",i)),i}function s(){var e=i(this);e.hoverState="in",t.delayIn==0?e.show():(e.fixTitle(),setTimeout(function(){e.hoverState=="in"&&u(e.$element)&&e.show()},t.delayIn))}function o(){var e=i(this);e.hoverState="out",t.delayOut==0?e.hide():setTimeout(function(){e.hoverState=="out"&&e.hide()},t.delayOut)}function u(e){return e.closest("body").length>0}if(t===!0)return this.data("tipsy");if(typeof t=="string"){var n=this.data("tipsy");return n&&n[t](),this}t=e.extend({},e.fn.tipsy.defaults,t),t.live||this.each(function(){i(this)});if(t.trigger!="manual"){var f=t.live?"live":"bind",l=t.trigger=="hover"?"mouseenter":"focus",h=t.trigger=="hover"?"mouseleave":"blur";t.trigger=="click"?this[f](l,s):this[f](l,s)[f](h,o),this.hasClass("flightSprite")&&this.unbind().die()}return this},e.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"N",html:!0,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",addCloseButton:!1},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"S":"N"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"E":"W"},e.fn.tipsy.remove=function(){e("body").find(".tipsy").remove()},e.fn.tipsy.autoBounds=function(t,n){return function(){var r={NS:n[0],EW:n.length>1?n[1]:!1},i=e(document).scrollTop()+t,s=e(document).scrollLeft()+t,o=e(this);return o.offset().top<i&&(r.ns="N"),o.offset().left<s&&(r.ew="W"),e(window).width()+e(document).scrollLeft()-o.offset().left<t&&(r.ew="E"),e(window).height()+e(document).scrollTop()-o.offset().top<t&&(r.ns="S"),r.ns+(r.EW?r.EW:"")}}}(jQuery),$(function(){$(".tipsy .close").live("click",function(e){var t=$(e.target),n=t.parent();e.preventDefault(),t.attr("data-quickeyTag")&&CT.utils.cookies.create("quickeyTipsy",!0,CT.settings.hotel.quickeysExpire),n.remove()})}),$(function(){$("[rel=rTooltip]").tipsy({gravity:"W",live:!0})}),$(function(){$("[rel=lTooltip]").tipsy({gravity:"E",live:!0})}),$(function(){$("[rel=bTooltip]").tipsy({gravity:"N",live:!0})}),$(function(){$("[rel=tTooltip]").tipsy({gravity:"S",live:!0,zIndex:12})}),$(function(){$("input[rel=rHint]").tipsy({trigger:"focus",delayIn:100,animate:"true",delayOut:100,live:!0,placement:"E"})}),$(function(){$("input[rel=lHint]").tipsy({trigger:"focus",delayIn:100,animate:"true",delayOut:100,live:!0,placement:"W"})}),!function(e){e(CT.Store)}(function(e){$.extend(!0,CT.utils,{CTLogger:function(e){function p(e,t){this.url=e,this.startTime=t}function d(e,t){var n=new p(e.url,(new Date).getTime());return t?c.push(n)-1:l.push(n)-1}function v(e){var t=CT.app==="hotel"?s:o;for(var n=0,r=t.length;n<r;n++)if(e.search(t[n])>-1)return!0;return!1}function m(e){var t=CT.app==="hotel"?a:u;for(var n=0,r=t.length;n<r;n++)if(e.search(t[n])>-1)return!1;return!0}function g(){e.ajaxSetup({beforeSend:function(e){try{v(this.url)&&m(this.url)&&(e.CTLoggerID=d(this),l.length>1&&(l[e.CTLoggerID-1].endTime?l[e.CTLoggerID].delay=(new Date).getTime()-l[e.CTLoggerID-1].endTime:l[e.CTLoggerID].delay=(new Date).getTime()-l[e.CTLoggerID-1].startTime));if(CT.app==="hotel"&&(this.url.match("sid-results")||this.url.match("hotel-content")||this.url.match("scData"))){e.logThisCall=d(this,"hotelTrack");var t=_.deserialize(this.url).index,n=_.deserialize(this.url).count;console.log(t+" "+n+" "+JSON.stringify(_.deserialize(this.url)));var r={s:(new Date).getTime(),index:t,count:n};CT.cache[CT.settings.currentTab].eventsTimes.sid[e.logThisCall]=r}if(CT.app==="air"&&(this.url.match("airjson")||this.url.match("dd-"))){var i=_.deserialize(this.url);if(i.dls!="y"){var t=i.cc;e.logThisCall=d(this,"airTrack");var r={s:(new Date).getTime(),index:t};CT.cache[CT.settings.currentTab].eventsTimes.sid[e.logThisCall]=r}if(window.flightPageId)try{var s=window.flightPageId,o=s.split("");return o.splice(-3),s=o.splice(3),s=s.reverse().join(""),s=window[s].split("").reverse().join("").split(".").map(function(e){return e}).reverse().join("."),e.setRequestHeader("Authorization","Bearer "+s),s}catch(u){return L(u),"0"}}}catch(u){}},error:function(e,t){try{e.hasOwnProperty("CTLoggerID")&&(l[e.CTLoggerID].endTime=(new Date).getTime(),l[e.CTLoggerID].status=t)}catch(n){}},success:function(t,n,r){try{r.hasOwnProperty("CTLoggerID")&&(l[r.CTLoggerID].endTime=(new Date).getTime(),l[r.CTLoggerID].status=n);if(CT.app==="hotel"&&r.hasOwnProperty("logThisCall")){CT.cache[CT.settings.currentTab].eventsTimes.sid[r.logThisCall].e=(new Date).getTime();var i=jQuery.parseJSON(r.responseText).results.ht,s=e.map(i,function(e,t){return t}).length;CT.cache[CT.settings.currentTab].eventsTimes.sid[r.logThisCall].r=_.filter(i,function(e,t){return e.rms&&e.rms.length>0}).length}if(CT.app==="air"&&r.hasOwnProperty("logThisCall")){var o=_.deserialize(this.url);if(o.dls!="y"){CT.cache[CT.settings.currentTab].eventsTimes.sid[r.logThisCall].e=(new Date).getTime();var u=jQuery.parseJSON(r.responseText),i=u.content,s=e.map(i,function(e,t){return t}).length;CT.cache[CT.settings.currentTab].eventsTimes.sid[r.logThisCall].r=s,CT.cache[CT.settings.currentTab].eventsTimes.sid[r.logThisCall].sid=u.sid}}}catch(a){}},complete:function(e,t){try{e.hasOwnProperty("CTLoggerID")&&(l[e.CTLoggerID].completeTime=(new Date).getTime(),l[e.CTLoggerID].status=t)}catch(n){}}})}function y(e){if(b()){for(var t=0,n=l.length;t<n;t++)l[t].completeTime?l[t].runTime=l[t].completeTime-l[t].startTime:l[t].runTime=l[t].endTime-l[t].startTime;h&&clearInterval(h),e.t=e.ty==="hsr"?N():C(),e.tot=function(){var t=0;for(var n=0,r=e.t.length;n<r;n++){var i=_.values(e.t[n]);t+=Int(i[2])}return String(t)}();if(CT.app==="hotel"&&b()){var r=CT.cache[CT.settings.currentTab].searchParams.all,i=CT.utils.trackers.mixpanelTrackingData,s={searchData:i,es:CT.cache[CT.settings.currentTab].eventsTimes};CT.utils.trackers.ctanalyticsTrackingData("Hotels_TR","srp_render_time","srp_results_complete",s,"time")}if(CT.app==="air")try{if(b()){var o=CT.utils.trackers.ctanalyticsTrackingobj;CT.cache[CT.settings.currentTab].eventsTimes.sid=_.filter(CT.cache[CT.settings.currentTab].eventsTimes.sid,function(e){return e}),o._airjsonCount=String(CT.cache[CT.settings.currentTab].eventsTimes.sid.length);var u={searchData:o,es:CT.cache[CT.settings.currentTab].eventsTimes};CT.fire("logSrpRenderTime",[{renderTimeData:u}])}}catch(a){}}else h||(h=setInterval(function(){y(e)},10))}function b(){var e=0;for(var t=0,n=l.length;t<n;t++)l[t].completeTime||(e+=1);return e===0?(window.console&&console.log(CT.cache[CT.settings.currentTab].eventsTimes.totalRenderTime),!0):!1}function w(){return l}function E(){var e=document.createElement("div");e.zIndex=9999,e.id="CTLoggerDiv";var t=[];t.push("<a href='javascript:CT.utils.CTLogger.closeResults()'>Close</a>"),t.push("<br/><br/>");for(var n=0,r=l.length;n<r;n++)t.push(n+".)"+" URL-> "+l[n].url+"  runTime -> "+l[n].runTime+"<br/>");e.innerHTML=t.join(""),document.body.appendChild(e),e.style.backgroundColor="#000000",e.style.padding="50px",e.style.color="#FFFFFF",e.style.height="500px",e.style.width="700px",e.style.position="absolute",e.style.top="80px",e.style.left="150px"}function S(){document.getElementById("CTLoggerDiv").style.display="none"}function x(){var e={},t=CT.masterJson.get();e.ty=CT.app==="hotel"?"hsr":"asr",CT.settings.hotel&&CT.settings.hotel.sid&&(e.sid=String(CT.settings.hotel.sid)),CT.settings.air&&CT.settings.air.sid&&(e.sid=String(CT.settings.air.sid)),e.b=T(),e.dr=r?String(r):"0",e.tr=i?String(i):"0";if(e.ty==="asr"&&t){e.intl=t.jsons.searchType.isIntl?1:0;if(t.jsons.expiredSuppliers){e.exsup=_.keys(t.jsons.expiredSuppliers);if(JSON.intl)for(var n=0,s=e.exsup.length;n<s;n++){var o=e.exsup[n].split("_");e.exsup[n]=o[0],o[1]&&(e.exsup[n]=o[0]+"_"+o[1])}else for(var n=0,s=e.exsup.length;n<s;n++)e.exsup[n]=e.exsup[n].split("_")[0]}e.intl=String(e.intl)}return e.url=window.location.href,e.ty==="asr"&&r!=i&&typeof t!=undefined&&t&&(e.fd=JSON.stringify(t.jsons.filterRanges)),e}function T(){var t;return e.browser.webkit&&(t="webkit"),e.browser.opera&&(t="opera"),e.browser.msie&&(t="msie"),e.browser.mozilla&&(t="mozilla"),t||(t="other"),t+" "+e.browser.version}function N(){var e=[];for(var t=0,n=l.length;t<n;t++){var r={},i={};r.c=l[t].url.search("scData")>=1?"SO":l[t].url.search("hotel-content")>=1?"SC":"DL",i.c=r.c,r.tt="t",i.tt="d",r.t=String(parseInt(l[t].runTime?l[t].runTime:0)),r.i=String(t+1),i.i=r.i,l[t].delay&&(i.t=String(l[t].delay)),l[t].status&&(l[t].status!="success"&&l[t].status!="notmodified"&&(r.f="1"),l[t].status=="timeout"&&(r.f="2")),e.push(r),i.t&&e.push(i)}return e}function C(){var e=[];for(var t=0,n=l.length;t<n;t++){var r={},i={};r.c=t==0?"SR":"DL",i.c=r.c,r.tt="t",i.tt="d",r.t=String(parseInt(l[t].runTime?l[t].runTime:0)),l[t].delay&&(i.t=String(l[t].delay)),r.i=String(t+1),i.i=r.i,l[t].status&&(l[t].status!="success"&&l[t].status!="notmodified"&&(r.f="1"),l[t].status=="timeout"&&(r.f="2")),e.push(r),i.t&&e.push(i)}return e}function k(){if(t){var e=x();y(e)}}function A(){return f}function O(e,t){n||(r=e,i=t,n=!0)}function M(e){r=e}var t=!0,n=!1,r,i,s=["hotel-content","scData","sid-result"],o=["airjson"],u=["dls=y"],a=[],f=[],l=[],c=[],h;return t&&g(),{calculateRunTimeResults:y,getAllRequests:w,showResults:E,closeResults:S,makeJSON:x,getServerLogs:A,logToServer:k,storeDRTR:O,storeDR:M}}(jQuery),cloneUpsellBanner:function(e){if(e)var t=$("#srpUpsellBanner[data-flight-type='"+e+"'].baseContent").first();else var t=$("#srpUpsellBanner.baseContent:first").first();if(!t[0])return!1;var n=5,r=$("#ResultContainer_"+CT.settings.currentTab),i=r.find("#srpUpsellBanner"),s,o;i.length==0&&(n=t.attr("banner-index")||n,s=r.find(".listItem"),o=$(s[n-1]),o.next().hasClass("auxiliary")&&(o=o.next()),t.clone(!0).removeClass("baseContent").insertAfter(o).show())},clonePackagesUpsellBanner:function(e,t,n){var r=$("#srpUpsellBanner[data-flight-type='dom'].baseContent").first();if(!r[0])return!1;var i=5,s=$("#ResultContainer_"+CT.settings.currentTab),o=s.find("#srpUpsellBanner"),u,a,f;o.length==0&&(i=r.attr("banner-index")||i,u=s.find(".listItem"),a=$(u[i-1]),a.next().hasClass("auxiliary")&&(a=a.next()),f=r.clone(!0),f.find("img").attr({style:"width:732px;height:108px",src:"/html-templates/banner/images/packages/"+e+".jpg",srcset:"/html-templates/banner/images/packages/"+e+".jpg"}),f.find("a").attr("href",n+"/"+t[e]),f.removeClass("baseContent").insertAfter(a).show())}}),$(function(){}),$(window).load(function(){if(window.isHomePage){var e=window.logUiEvtTimeOut?parseInt(window.logUiEvtTimeOut):1e3,t=window.analyticsHost?window.analyticsHost:"",n=window.explorerAnalyticsSwitch=="true"?!0:!1,r=CT.utils.cookies.read("userid")?CT.utils.cookies.read("userid"):"",i=CT.utils.cookies.read("Apache")?CT.utils.cookies.read("Apache"):"",s=CT.utils.cookies.read("__utmz")?CT.utils.cookies.read("__utmz"):"",o={userid:r,apache_cookie:i,utmz:s},u={};t&&(o={},u={userid:r,apache_cookie:i,utmz:s});if(n&&t&&$.browser.msie&&window.XDomainRequest&&($.browser.version==="9.0"||$.browser.version==="8.0")){var a=new XDomainRequest;a.open("get",t+"/ctanalytics/loaduserdata?apache_cookie="+i),a.onload=function(){},a.onprogress=function(){},a.ontimeout=function(){},a.onerror=function(){},a.timeout=e,setTimeout(function(){a.send()},0)}else $.ajax({url:t+"/ctanalytics/loaduserdata",type:"GET",headers:o,data:u,timeout:e})}})}),!function(e){e()}(function(){$.extend(!0,CT.utils,{helperFunctions:{getAirJsonUrl:function(e){var t=CT.settings[CT.app].urls.domesticSearch;return e.multicity?t=CT.settings[CT.app].urls.multiCitySearch:e.intl=="y"&&(t=CT.settings[CT.app].urls.intlSearch),t},isFlNumCombinable:function(e,t,n){if(!this.isAirlineCombinable([e,n]))return!1;t?typeof t=="string"&&(t=_.uniq(t.split(","))):t=[];var r=this.getflightCodes(e);return _.contains(t,r)?!0:!1},getflightCodes:function(e){return typeof e=="string"&&(e=e.split(",")),e=_.uniq(e),_.map(e,function(e){return e=e.split("-"),e[e.length-1]}).join("$")},isAirlineCombinable:function(e){var t=[];return _.map(e,function(e){typeof e=="string"&&(e=e.split(",")),_.extend(t,_.map(e,function(e){return e.split("-")[0]}))}),_.uniq(t).length==1},getFlightFare:function(e,t,n){var r=CT.cache[CT.settings.currentTab],i=_.extend({},r.flags,n),s=r.searchType,o=CT.masterJson&&CT.masterJson.get()&&CT.masterJson.get().jsons.jsonVer?CT.masterJson.get().jsons.jsonVer:CT.settings[CT.app].responseVer,u=null;if(typeof e=="undefined")return u;i.isCorpFare&&(e.CORP?e=e.CORP:u=null);if(i.isSPLRT||e.SPLRT&&!e.dfd&&!i.forceNormalFare)if(e.SPLRT)if(o=="V3"){var a=i.isRefundable==1&&!i.isTabClicked&&!i.singleAirlineFilter?"R":!1;if(n.other_carrier_names){var f=_.find(e.SPLRT,function(e){var t=e[e.dfd].cc&&e[e.dfd].cc.split(",");if(CT.utils.helperFunctions.isFlNumCombinable(n.otherCarrierNames,t,n.carrierNames))return i.isRefundable&&!i.isTabClicked?e.dfd=="R"?e:null:e});u=f&&f[a||f.dfd]}else e.SelectedSPLRT||n.getSelected?f=e.SelectedSPLRT:f=e.SPLRT[0],i.isRefundable&&!i.isTabClicked&&(e.SelectedSPLRT||n.getSelected?f=e.SelectedSPLRT&&e.SelectedSPLRT.R?e.SelectedSPLRT:null:f=_.find(e.SPLRT,function(e){return e.dfd=="R"})),u=f&&f[a||f.dfd]}else u=e.SPLRT[e.SPLRT.dfd],i.isRefundable&&!i.isTabClicked&&(u=e.SPLRT.R);else u=e.dfd?e[e.dfd]:null,i.isRefundable&&!i.isTabClicked&&(u=e.R);else u=e.dfd?e[e.dfd]:e.CORP&&e.CORP.dfd?e.CORP[e.CORP.dfd]:null,s.multiCity&&!s.isIntl&&i.sectors[t]&&i.sectors[t].isRefundable?u=e.R:i.isRefundable&&!i.isTabClicked&&(u=e.R?e.R:e.CORP?e.CORP.R:null);return u},getDisplayPrice:function(e){try{var t=CT.masterJson.get().jsons;if(t.walletAmt){var n=e-t.walletAmt;return n>0?n:0}}catch(r){L(r)}return e},getBundledFareInfo:function(e){var t={price:{},categories:[],enabled:!1,inclusions:[],priceEnabled:!1};return e.al&&e.mJson&&e.mJson.jsons.bundledfares&&(t.enabled=!0,t.categories=e.mJson.jsons.bundledfares),e.priceObj&&(t.price={total:e.priceObj.pr,extra:0},e.selectedBundleCategory&&e.priceObj.bfc&&e.priceObj.bfc[e.selectedBundleCategory.toLowerCase()+"pr"]!=undefined&&(t.price.extra=parseInt(e.priceObj.bfc[e.selectedBundleCategory.toLowerCase()+"pr"]),t.priceEnabled=!0,t.enabled=!0),t.price.total+=t.price.extra,t.price.totalFormatted=CT.utils.formatForCurrency(Number(t.price.total),!1,null,!1),t.price.extraFormatted=CT.utils.formatForCurrency(Number(t.price.extra),!1,null,!1)),t},getSEMParams:function(e,t){return t=t||{},e=typeof e=="string"?_.deserialize(e):e,t},ifNull:function(e,t){return e?e:t},createSlideView:function(e,t,n,r,i){function f(){_.each([{linkCls:"scrollLeft",divCls:"left",name:"prev"},{linkCls:"scrollRight",divCls:"right",name:"next"}],function(e){i.append(o[e.name]=$(CT.to_html(s,e)))})}function l(n,r){var i=parseInt(e.css("left").replace("px",""),10);n=="left"?r=-(t*r)+a:r=t*r-a,r=i+r,e.css("left",r+"px")}function c(){f(),o.next.show(),e.css("left","0px"),o.next.on("click",function(){l("left",u),o.next.hide(),o.prev.show()}),o.prev.on("click",function(){l("right",u),o.next.show(),o.prev.hide()})}var s='<div class="disclosureFade {{divCls}}" style="display:none;"><a class="{{linkCls}}" href="javascript:void(0);"></a></div>',o={prev:{},next:{}},u=r-n,a=r==4?50:285;i=i||e,c()},trackFlightGAEvent:function(e,t,n,r){return function(){var i=CT.cache[CT.settings.currentTab].searchType,s=n+"_"+(i.isIntl?"Intl":"Dom")+"_"+(i.multiCity||i.roundTrip?i.roundTrip?"RT":"MC":"OW");CT.utils.helperFunctions.trackGAEvent(e,t,s,r)}},getMr:function(e,t,n){var r={},i=e.mr;return r.MR="Y",r.ADT={AD:{},ADNS:{},BD:{A:i.A,C:i.C},BDNS:{}},r.Refund=n.isRefundable||e.ft==="R"?"Y":"N",r.oca=i.oca,r.occ=i.occ,r.cta=i.cta,r.ctc=i.ctc,r.note=t.jsons.mr.note,[r]},getBg:function(e,t){var n={os:[],rs:[],BI:"Y"};return _.each(e,function(e,r){_.each(e,function(e,s){if(e.bg){var o=e.bg;n[r?"rs":"os"].push({sec:e.fr+"_"+e.to,bg:{ADT:{cib:t?"0 KG":o.cib,cab:o.cab}}})}})}),[n]},getCheapestSolution:function(){try{var e=CT.cache[CT.settings.currentTab];if(e.cheapestFlightSolutions)return e.cheapestFlightSolutions;var t={};return _.each(CT.masterJson.get().mapping,function(e,n){t[n]=_.first(_.sortBy(e,function(e){if(e.fare[e.fare.dfd])return e.fare[e.fare.dfd].pr}))}),e.cheapestFlightSolutions=t}catch(n){return window.ct_debug&&console.log(n),null}},trackFlightMoengageOnSearch:function(e,t){if(t&&window.moengageEnabled){t=_.deserialize(t);var n={Economy:"e",Business:"b",First:"f","Premium+Economy":"pe"},r={OneWay:"ow",RoundTrip:"rt",MultiCity:"mc"},i=parseInt(t.adults)+parseInt(t.childs)+parseInt(t.infants),s="";window.serverCurrentDate&&(s=window.serverCurrentDate.getDate()+"/"+parseInt(window.serverCurrentDate.getMonth()+1)+"/"+window.serverCurrentDate.getFullYear());var o={o:t.from?t.from:"",d:t.to?t.to:"",c:"",p:t.intl=="n"?"d":"i",st:t.trip_type&&r[t.trip_type]?r[t.trip_type]:"",dd:t.depart_date?t.depart_date:"",rd:t.return_date?t.return_date:"",dx:s!=""&&t.depart_date?CT.utils.diffDates(s,t.depart_date):"",los:"",pc:i,ac:t.adults?t.adults:"",cc:t.childs?t.childs:"",ic:t.infants?t.adults:"",dl:""};if(t.trip_type=="MultiCity"){var u="";t.from1&&(o.o1=t.from1),t.from2&&(o.o2=t.from2),t.from3&&(o.o3=t.from3),t.from4&&(o.o4=t.from4),t.from5&&(o.o5=t.from5),t.from6&&(o.o6=t.from6),t.to1&&(o.d1=t.to1),t.to2&&(o.d2=t.to2),t.to3&&(o.d3=t.to3),t.to4&&(o.d4=t.to4),t.to5&&(o.d5=t.to5),t.to6&&(o.d6=t.to6),t.depart_date_1&&(o.dd1=t.depart_date_1),t.depart_date_2&&(o.dd2=t.depart_date_2,u=t.depart_date_2),t.depart_date_3&&(o.dd3=t.depart_date_3,u=t.depart_date_3),t.depart_date_4&&(o.dd4=t.depart_date_4,u=t.depart_date_4),t.depart_date_5&&(o.dd5=t.depart_date_5,u=t.depart_date_5),t.depart_date_6&&(o.dd6=t.depart_date_6,u=t.depart_date_6),o.dx=s!=""&&t.depart_date_1&&CT.utils.diffDates?CT.utils.diffDates(s,t.depart_date_1):"",u!=""&&CT.utils.diffDates&&(o.los=CT.utils.diffDates(t.depart_date_1,u))}else t.return_date&&t.depart_date&&CT.utils.diffDates&&(o.los=CT.utils.diffDates(t.depart_date,t.return_date));CT.utils.helperFunctions.tpTrack({tp:"moengage",category:e,values:o})}},baggage:{getIndex:function(e){return e.fr+"_"+e.to+"_"+moment(e.dpd+" "+e.dp,"DD/MM/YYYY HH:mm").format("YYYY-MM-DD_HH:mm")},getInfo:function(e,t){try{var n=[],r=CT.cache[CT.settings.currentTab];e.isSRP&&_.map(e.solutionIds,function(t,r){n.push(e.mJson.mapping[r][t])}),e.flightDetailsArr&&_.each(e.flightDetailsArr,function(e){_.each(e.flArr,function(e){e.index=CT.utils.helperFunctions.baggage.getIndex(e)})}),e.solutions=n;var i=CT.masterJson.get();if(e.isSplitScreen){var s=[];_.each(e.solutions,function(e,t){var n=e.summary.fullHeader,r=[],i=e.content.length>1?1:0;_.each(e.content,function(e){CT.Mustache.clearCache();var t={};i&&(t.sec=e.fr+" â†’ "+e.to),t.index=CT.utils.helperFunctions.baggage.getIndex(e),r.push(t)}),CT.Mustache.clearCache(),s.push(CT.to_html("RTBaggageHeaderTpl",{fromTo:n,newFlow:!0,bgSegments:r}))});var o=e.$parentLi.offset(),u=o.left,a=o.top;$(".baggagePopover")&&$(".baggagePopover").length>0&&$(".baggagePopover").remove(),$(document.body).append(CT.to_html("FarePopoverTpl",{cls:"baggagePopover"})),$(".baggagePopover").find(".tipsyInner").html("").append("<div class='row'>"+s.join("")+"</div>").end().css({display:"block",position:"absolute","z-index":"200000",top:a+13,left:u}).delegate(".close","click",function(){$(".baggagePopover").hide()});var f=$(".baggagePopover")}else if(e.$parentLi){var l=CT.to_html("baggageTmpl",{flightDetailsArr:e.flightDetailsArr,isMeta:this.isMeta}),f=e.$parentLi.find("[eleidentifier='baggage']");f.html(l)}r.baggageCache||(r.baggageCache={}),r.baggageCache[e.solutionIds.join(",")]?(resJson=r.baggageCache[e.solutionIds.join(",")],CT.utils.helperFunctions.baggage.render(resJson,f,e,function(){t(null,resJson)})):CT.utils.helperFunctions.baggage.createRequestJson.apply(this,[e,{solutions:n},function(n){CT.utils.helperFunctions.baggage.sendRequestJson(n,function(n){i&&i.jsons.searchType.isIntl&&i.jsons.bbEnabled?r.baggageCache={}:r.baggageCache[e.solutionIds.join(",")]=n,e.noRender?t(null,n):CT.utils.helperFunctions.baggage.render(n,f,e,function(){t(null,n)})},function(){CT.utils.helperFunctions.baggage.noBaggage(f,null,e)})}])}catch(c){t(c)}},createRequestJson:function(e,t,n){function c(e,t){return{seg:h(e,t)}}function h(e,t){var n=o.selectedFare(e),r=[];n.bc&&r.push(n.bc.split(",")),r=_.flatten(r);var i={};return _.map(e.content,function(e,t){var n=e.al+"-"+e.alNum;return i[n]||(i[n]=r[v++]),{dep:e.fr,arr:e.to,dd:moment(e.dpd+" "+e.dp,"DD/MM/YYYY HH:mm").format("YYYY-MM-DD HH:mm"),ad:moment(e.ad+" "+e.a,"DD/MM/YYYY HH:mm").format("YYYY-MM-DD HH:mm"),fn:e.alNum,al:e.al,oa:e.oa||"",bc:i[n]||""}})}function p(e){var t=o.selectedFare(e);return{mi:t.mi?!0:!1,fk:t.fk,ncib:t.ncib,ctype:e.content[0].ct}}function d(){return{intl:a.isIntl,mcity:a.isMultiCity,adt:u.adults,chd:u.childs,inf:u.infants,scr:a.sellCurr,sid:window.sid,sct:a.sellingCountry,stype:window.product||"B2C"}}var r=CT.masterJson.get(),i=e.$parentLi.find("#withCabinBaggage input"),s=$(i).is(":checked")?!0:!1,o={selectedFare:function(e){var t={isSPLRT:e.fare.spl,isCorpFare:!1};return window.productCode=="CP"&&(t.isCorpFare=flightElement.find("input.corpinp").prop("checked")),r&&r.jsons.searchType.isIntl&&e.fare&&e.fare.HBAG&&!s?CT.utils.helperFunctions.getFlightFare(e.fare.HBAG,null,t):CT.utils.helperFunctions.getFlightFare(e.fare,null,t)}},u=this.tabCache.searchParams.clean,a=this.tabCache.searchType,f=this.tabCache.sid,l={sol:[],sc:d()};isSplitScreen=!this.isIntl&&(this.isRT||this.isMultiCity)||this.intlSpecialRT;var v=0;_.each(t.solutions,function(e,t){isSplitScreen?(v=0,l.sol.push({fl:[c(e,t)],fre:p(e)})):(l.sol[0]||(l.sol[0]={fl:[],fre:p(e)}),l.sol[0].fl.push(c(e,t)))}),n(l)},sendRequestJson:function(e,t,n){clearTimeout(this.baggageTimer),this.baggageTimer=setTimeout(function(){$.ajax({url:"/flights/freeBaggageInfo",data:JSON.stringify(e),type:"post",contentType:"application/json; charset=utf-8",dataType:"json"}).then(t).fail(n)},200)},render:function(e,t,n,r){var i=this,s="baggageDetails";n.isSplitScreen&&(s="RTBaggageTpl"),e&&e.BI&&!$.isEmptyObject(e.BI)?(n.isSplitScreen&&t.find(".rtBaggageLoader").addClass("hide"),t.find(".baggageSummary").each(function(){var r=$(this).removeClass("hide"),o=r.data("index"),u=e.BI[o];if(u&&!$.isEmptyObject(e.BI[o])&&e.BI[o].bg&&e.BI[o].bg.ADT){u.newFlow=!0;var a=CT.to_html(s,u);n.isSplitScreen?r.find("dd").html(a):(a.match(/([A-Z]{2,} )+[A-Z]{2,}/)&&a.match(/([A-Z]{2,} )+[A-Z]{2,}/g).map(function(e,t){a=a.replace(e,(t?"<br>":"")+"<b>"+e+"</b>")}),r.find(".baggageDetails li").html(a))}else i.noBaggage(t,r,n)}),e.bgNote&&t.find(".baggageValue[errorinfo=piecesInfo]").html(e.bgNote)):this.noBaggage(t,null,n)},noBaggage:function(e,t,n){n.isSplitScreen&&e.find(".rtBaggageLoader").addClass("hide"),t?n.isSplitScreen?t.addClass("fadedSummary").removeClass("hide").find("dd").html("<small>"+CT.messages.air.NoBaggageMsg+"</small>"):t.addClass("fadedSummary").find(".baggageDetails li").html(CT.messages.air.NoBaggageMsg):n.isSplitScreen?e.find(".baggageSummary").addClass("fadedSummary").removeClass("hide").find("dd").html("<small>"+CT.messages.air.NoBaggageMsg+"</small>"):(e.find(".baggageDetails li").html(CT.messages.air.NoBaggageMsg),e.find("ul").addClass("fadedSummary"))}}},getNumLegs:function(e){var t=0;return _.times(5,function(n){e["from"+(n+1)]&&t++}),t},modifySearch:{open:function(e,t){if(!CT.cache.els)return;CT.cache.els["$resultContainer"+CT.settings.currentTab]||(CT.cache.els["$resultContainer"+CT.settings.currentTab]=$("#ResultContainer_"+CT.settings.currentTab));var n=CT.cache.els.$homeCenter,r=CT.cache.els["$resultContainer"+CT.settings.currentTab],i=CT.cache.els.$homeSection,s=CT.cache.els.$resultSection;e||(e=r.find("#modifySearchLink").find("i")),t||(t=e.parent()),t.parent().addClass("current"),e.removeClass("rArrow").addClass("dArrow white"),i.show(),i.addClass("modifySearch"),s.addClass("modifySearch"),n.css("min-height")&&n.attr("backup-min-height",n.css("min-height")).css("min-height",""),n.css("height",n.height()),setTimeout(function(){n.css("-webkit-transition","none"),setTimeout(function(){n.css("height",""),setTimeout(function(){n.css("-webkit-transition","")},100)},100)},500),r.find("div.miniCalendar").addClass("mediumCalendar").removeClass("miniCalendar"),r.find(".primaryBar .center").fadeOut("fast",function(){r.find(".primaryBar .center").css("visibility","hidden").show()}),$(".tipsyW").remove()},close:function(e,t){if(!CT.cache.els)return;CT.cache.els["$resultContainer"+CT.settings.currentTab]||(CT.cache.els["$resultContainer"+CT.settings.currentTab]=$("#ResultContainer_"+CT.settings.currentTab));var n=CT.cache.els.$homeCenter,r=CT.cache.els["$resultContainer"+CT.settings.currentTab],i=CT.cache.els.$homeSection,s=CT.cache.els.$resultSection;e||(e=r.find("#modifySearchLink").find("i")),t||(t=e.parent()),t.parent().removeClass("current"),e.removeClass("dArrow white").addClass("rArrow"),i.hide(),i.removeClass("modifySearch"),s.removeClass("modifySearch"),n.attr("backup-min-height")&&n.css("min-height",n.attr("backup-min-height")).removeAttr("backup-min-height"),r.find("div.mediumCalendar").addClass("miniCalendar").removeClass("mediumCalendar"),r.find(".primaryBar .center").css("visibility","visible").hide().fadeIn("fast")},openLabel:function(e){var t={},n=$("#GlobalNav .ctCenter");t.cityInfo=[];if(CT.settings.currentTab==n.find(".searchSummary").data("sc"))return;if(e.from1){var r=[],i=Number(e.num_legs);_.times(i,function(t){t+=1,e["origin"+t]&&e["destination"+t]&&r.push([e["origin"+t]&&e["origin"+t].split(",")[0]||e["from"+t],e["destination"+t]&&e["destination"+t].split(",")[0]||e["to"+t]])});for(var s=0;s<r.length;s++){var o,u,a,f,l;if(r[s]){o=r[s],u=o[o.length-1];for(var c=s+1;c<r.length;c++)r[c]&&(a=r[c],f=a[0],l=a[a.length-1],u==f&&(o.push(l),r[c]=null,u=o[o.length-1]))}}r=_.filter(r,function(e){return e?!0:!1}),_.each(r,function(e,n){t.cityInfo.push({isMC:!0,hasNextCity:n==r.length-1?!1:!0,city:e.join(" â†’ ")})}),t.formatedCities="",_.each(t.cityInfo,function(e){t.formatedCities+=e.city+(e.hasNextCity?", ":"")}),t.depart_date=moment(e.depart_date_1,"DD/MM/YYYY").format("ddd, DD MMM"),t.last_depart_date=moment(e["depart_date_"+e.num_legs],"DD/MM/YYYY").format("ddd, DD MMM")}else{e.from&&t.cityInfo.push({city:e.origin&&e.origin.split(",")[0]||e.from});if(e.to){var h=" â‡„ ";$.browser.msie&&parseInt($.browser.version,10)<9&&(h=" - "),t.cityInfo.push({city:e.destination&&e.destination.split(",")[0]||e.to,rtSymbol:e.return_date?h:!1,owSymbol:e.return_date?!1:" â†’ "})}t.formatedCities="",_.each(t.cityInfo,function(e){t.formatedCities+=(e.rtSymbol?e.rtSymbol:"")+(e.owSymbol?e.owSymbol:"")+e.city}),t.depart_date=moment(e.depart_date,"DD/MM/YYYY").format("ddd, DD MMM"),e.return_date&&(t.return_date=moment(e.return_date,"DD/MM/YYYY").format("ddd, DD MMM"))}t.adults=e.adults,parseInt(e.adults,10)>1?t.mA=!0:t.mA=!1,e.childs&&parseInt(e.childs,10)&&(t.childs=e.childs,parseInt(e.childs,10)>1?t.mC=!0:t.mc=!1),e.infants&&parseInt(e.infants,10)&&(t.infants=e.infants,parseInt(e.infants,10)>1?t.mI=!0:t.mI=!1),n.find(".feedbackLink").hide(),n.find(".searchSummary").length==0&&n.append("<div class='searchSummary'></div>"),n.find(".searchSummary").show().html(CT.cache.templates.SearchHeaderTemplate(t)),n.find(".searchSummary").data("sc",CT.settings.currentTab),$("body").scrollTop(0)},closeLabel:function(){var e=$("#GlobalNav .ctCenter");e.find(".feedbackLink").show(),e.find(".searchSummary").hide()}},UILogger:function(){function d(){return c*=3,c}function v(){this.from=$("#FromTag").val()?["1",$("#FromTag").val(),"-1"]:e,this.to=$("#ToTag").val()?["1",$("#ToTag").val(),"-1"]:t,this.d1=$("#DepartDate").val()?"1":"0",this.d2=$("#ToDate").val()?"1":"0",this.trip_type=$(".tripType input:checked").val()}function m(){for(var e=0,t=h.length;e<t;e++)clearInterval(h[e])}function g(e){i=e}function y(e){fv="1",s=b(e),T()}function b(e){return arr=[],_.each(e,function(e,t,n){arr.push(e.mess+" "+e.name)}),arr}function w(e){o=e}function E(){uiform=new v;var e={};return e.from=a.length?a:uiform.from,e.to=f.length?f:uiform.to,e.d1=uiform.d1?uiform.d1:"0",e.d2=uiform.d2?uiform.d2:"0",e.src=u,e.url=i=window.location.href,e.fe=s,e.fv="0",s.length&&(e.fv="1"),e}function S(){s.length&&l&&(s=[],l=!1)}function x(){var e;return $.browser.webkit&&(e="webkit"),$.browser.opera&&(e="opera"),$.browser.msie&&(e="msie"),$.browser.mozilla&&(e="mozilla"),e||(e="other"),e+" "+$.browser.version}function T(){}var e=["0","","-1"],t=["0","","-1"],n="0",r="0",i,s=[],o,u="h",a=[],f=[],l=!1,c=6e3,h=[];i=window.location.href,ac=CT.utils.cookies.read("Apache");var p=[];return $("#FromTag").keypress(function(){a=[],a.push("1"),a.push($("#FromTag").val()),o?a.push(String(o)):a.push("-1")}),$("#ToTag").keypress(function(){f=[],f.push("1"),f.push($("#ToTag").val()),o?f.push(String(o)):f.push("-1")}),$("#From").change(function(){T()}),$("#To").change(function(){T()}),$("#FromDate").change(function(){uiform.d1="1",T()}),$("#ToDate").change(function(){uiform.d2="1",T()}),$("#SearchBtn").click(function(){u="h"}),$("#ModSearchBtn").click(function(){u="m"}),$(document).ready(function(){T()}),CT.app==="air",{setFormErrors:y,setTime:w,makeJSON:E,setURL:g,logToServer:T}}()})}),function(){var e=function(){var e=!1;return function(t){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))e=!0}(navigator.userAgent||navigator.vendor||window.opera),e},t=function(e){var t={homepage:{name:"Featured",url:"/local/"+e+"/featured-activities-in-"+e,description:"Experience & Book the best activities, restaurants & events on Cleartrip"},ttd:{name:"Activities",url:"/local/"+e+"/things-to-do-in-"+e,iconName:"localActivitiesIcon",description:"Explore 1000s of things to do in and around your city"},fnb:{name:"Eat Out",url:"/local/"+e+"/food-and-drinks-in-"+e,iconName:"localEatOutIcon",description:"Enjoy curated dining experiences at the best restaurants"},events:{name:"Events",url:"/local/"+e+"/events-in-"+e,iconName:"localEventsIcon",description:"There&lsquo;s a lot happening in your city. Never be bored again"},fit:{name:"Fitness",url:"/local/"+e+"/fitness-in-"+e,iconName:"localFitnessIcon",description:"Get fit at over 1200 gyms in your city and elsewhere with one pass"}};return t};localsHome={getProductHash:t,helpers:{replace:function(e,t,n){if(e&&typeof e=="string"){if(!t||typeof t!="string")return e;if(!n||typeof n!="string")n="";return e.split(t).join(n)}}},showLocalSpace:function(){$(".spacesReel").addClass("isShowingLocal"),$("#space_local").prop("checked",!0),$("#space_travel").prop("checked",!1),$(".localFrame").off("click.toggleSpaces"),$(".travelFrame").on("click.toggleSpaces",localsHome.showTravelSpace),CT.utils.cookies.create("spacePreference","local",365),$localOverlay=$(".localFrame").find(".transparentOverlay"),$travelOverlay=$(".travelFrame").find(".transparentOverlay"),$localOverlay&&$localOverlay.css("display","none"),$travelOverlay&&$travelOverlay.css("display","block");try{if(CT&&CT.utils&&CT.utils.helperFunctions&&CT.utils.helperFunctions.tpTrack&&window.cleverTapEnabled){var e={"event type":"local home page","last event type":CT.utils.cookies.read("lastEventType")?CT.utils.cookies.read("lastEventType"):"new session",city:_.capitalize(window.currentCityName),"user location":CT.utils.cookies.read("userLocation")?_.capitalize(CT.utils.cookies.read("userLocation")):"NA","collection name":"NA","collection type":"NA","activity name":"NA",price:-1,"activity location":"NA",distance:-1,dx:-1,"srp position":-1,platform:window.isMobileUA?"mweb":"desktop"};CT.utils.cookies.create("lastEventType","local home page"),CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"local page viewed",values:e})}}catch(t){window.console&&console.log(t)}setTimeout(function(){typeof window.google_trackConversion=="function"&&window.google_trackConversion({google_conversion_id:995874483,google_custom_params:{local_id:"0",local_pagetype:"home"},google_remarketing_only:!0}),window.fbq&&fbq("track","ViewContent",{content_type:"local",content_ids:["0"]})},1e3)},showTravelSpace:function(){$(".spacesReel").removeClass("isShowingLocal"),$("#space_travel").prop("checked",!0),$("#space_local").prop("checked",!1),CT.utils.cookies.create("spacePreference","travel",365),$localOverlay=$(".localFrame").find(".transparentOverlay"),$travelOverlay=$(".travelFrame").find(".transparentOverlay"),$localOverlay&&$localOverlay.css("display","block"),$travelOverlay&&$travelOverlay.css("display","none")},cTapTrackOnSwitch:function(e){try{var t="";e&&e=="local"?t="travel to local switch":e&&e=="travel"&&(t="local to travel switch");if(CT&&CT.utils&&CT.utils.helperFunctions&&CT.utils.helperFunctions.tpTrack&&window.cleverTapEnabled&&t!=""){var n={"event type":t,destination:e,"last event type":CT.utils.cookies.read("lastEventType")?CT.utils.cookies.read("lastEventType"):"new session",city:_.capitalize(window.currentCityName),"time elapsed in the session":window.clevertap&&clevertap.session&&clevertap.session.getTimeElapsed()?clevertap.session.getTimeElapsed():-1,platform:window.isMobileUA?"mweb":"desktop","user location":CT.utils.cookies.read("userLocation")?_.capitalize(CT.utils.cookies.read("userLocation")):"NA"};CT.utils.cookies.create("lastEventType",t),CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"screen switch",values:n})}}catch(r){}},cTapTrackOnLoad:function(){try{if(CT&&CT.utils&&CT.utils.helperFunctions&&CT.utils.helperFunctions.tpTrack&&window.cleverTapEnabled){var e={"event type":"cleartrip home viewed","last event type":CT.utils.cookies.read("lastEventType")?CT.utils.cookies.read("lastEventType"):"new session",city:_.capitalize(window.currentCityName),platform:window.isMobileUA?"mweb":"desktop","user location":CT.utils.cookies.read("userLocation")?_.capitalize(CT.utils.cookies.read("userLocation")):"NA"};CT.utils.cookies.create("lastEventType","cleartrip home viewed"),CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"cleartrip home viewed",values:e})}}catch(t){}},cleverTapCityClickTrack:function(e){try{if(window.cleverTapEnabled){var t={"event type":"city picker clicked","last event type":CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.read&&CT.utils.cookies.read("lastEventType")?CT.utils.cookies.read("lastEventType"):"new session",city:e,"user location":CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.read&&CT.utils.cookies.read("userLocation")?CT.utils.cookies.read("userLocation"):"NA","collection name":"NA","collection type":"NA","activity name":"NA","activity location":-1,price:-1,distance:-1,dx:-1,action:"NA","srp position":-1,platform:window.isMobileUA?"mweb":"desktop"};CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"local action",values:t}),CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create&&CT.utils.cookies.create("lastEventType","city picker clicked")}}catch(n){}},setHeightForLocalWeb:function(){var e=$("#Home").find("aside").first().outerHeight(),t=$("#Home").find("aside").last().outerHeight(),n=$(window).outerHeight(),r=$("#homeUpsellBanner").outerHeight(),r=r?r:"0",i=$(".travelFrame").outerHeight()},carouselSliderClick:function(e){var t=$(e.currentTarget).find(".carouselSlide").attr("data-url"),n=window.location;t&&(window.location.href=t)},setEventsForLocalWeb:function(){localsHome.setHeightForLocalWeb()},filterCarouselById:function(e,t){var n=[];return e&&e.length&&t&&t.length&&_.each(e,function(e){_.indexOf(t,e.id)>-1&&n.length<3&&e.type=="collection"&&n.push(e)}),n},fetchEditorialForLocation:function(e){if(e)try{$.ajax({method:"GET",url:"/local/api/v1/ttd/search?city="+e+"&editorial=true",contentType:"application/json",dataType:"json",success:function(e){e=_.isString(e)?JSON.parse(e):e,window.localData=e,e.editorial||e.collections?localsHome.generateEditorialData(e):localsHome.showCityUnavailable()},error:function(e){console.log(e),localsHome.showCityUnavailable()}})}catch(t){console.log(t),localsHome.showCityUnavailable()}},generateEditorialData:function(e){var t=e.editorial,n=[],r=["ttd","fnb","events"],i={ttd:1,fnb:2,events:3},s=4,o=window.airBaseLink?window.airBaseLink:"//www.cleartrip.com",u=function(){var e=0,i=[];_.each(r,function(r){t[r].cp&&t[r].cp.length&&n.length<s&&i.length<s&&(i.push(t[r].cp.shift()),e+=t[r].cp.length)}),filteredCarousels=localsHome.filterCarouselById(t.carousel,i),_.each(filteredCarousels,function(e){n=_.uniq(n,function(e){return e.id}),n.length<s&&(e.dataType="cp",n.push(e))});if(!(e&&n.length<s))return!1;u()},a=function(){_.each(r,function(e){n=_.uniq(n,function(e){return e.id});if(t[e].p&&t[e].p.collection&&t[e].p.collection.length&&n.length<s){var r=t[e].p.collection.shift();r.dataType="pe",r.productId=i[e],n.push(r)}})},f=function(){_.each(e.collections,function(e){n=_.uniq(n,function(e){return e.id});if(n.length<s){var t=e;t.dataType="collection",t.productId=1,n.push(t)}})};t&&u(),t&&n.length<s&&a(),n.length<s&&f();var l=[];_.each(n,function(e,t){var n={};e.dataType=="cp"?(n.image=e.images&&e.images.length&&e.images[0].img?e.images[0].img:"",n.title=e.title,n.id=e.id,n.url="/local/"+window.currentCityName+"/editorial?callback="+e.callback+"&type="+e.type+"&product="+e.product.toLowerCase()+""):(n.image=e.image||"",n.title=e.collection_name,n.id=e.id,n.url="/local/"+window.currentCityName+"/"+localsHome.helpers.replace(e.collection_name.toLowerCase()," ","_")+"-in-"+window.currentCityName+"-collection-"+e.id+"-"+e.productId),n.image=o+"/"+n.image.replace("{type}","w"),l.push(n)});var c=_.capitalize(window.currentCityName),h=CT.to_html("LocalCarouselTemplate",{cityName:c}),p=CT.to_html("LocalCollectionsTemplate",{isCollectionAvailable:l.length?!0:!1,collectionData:l,cityName:c});$("#localCarousel").html(h),$("#localCollections").html(p),localsHome.showCityAvailable()},getLocalHomePage:function(e){var t=window.localDefaultCity.toLowerCase();e.homepage==1&&(t=window.currentCityName.toLowerCase(),console.log(window.currentCityName));var n=function(e){var t=-1,n=-1,r=-1,i=$(e.currentTarget);CT.utils.cookies.read("userLatitude")&&CT.utils.cookies.read("userLongitude")?(t=CT.utils.cookies.read("userLatitude"),n=CT.utils.cookies.read("userLongitude")):navigator.geolocation&&navigator.geolocation.getCurrentPosition&&navigator.geolocation.getCurrentPosition(function(e){e.coords&&e.coords.latitude&&e.coords.longitude&&(t=e.coords.latitude,n=e.coords.longitude)});if(t!=-1&&n!=-1){var s=i.data("lat"),o=i.data("lng");r=CT.utils.helperFunctions.getDistanceFromLatLonInKm(t,n,s,o)}return r},r=function(e){window.sessionStorage&&window.sessionStorage.setItem("clevertap",JSON.stringify(e))},i=function(){var e;return window.sessionStorage&&(window.sessionStorage.getItem("clevertap")||window.sessionStorage.setItem("clevertap",JSON.stringify({})),e=window.sessionStorage.getItem("clevertap"),e=JSON.parse(e)),e},s=function(e){var n=$(e.currentTarget),r=CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.read&&CT.utils.cookies.read("userLocation")?CT.utils.cookies.read("userLocation"):"NA",i=CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.read&&CT.utils.cookies.read("lastEventType")?CT.utils.cookies.read("lastEventType"):"new session",s=$(e.currentTarget).closest(".localModule__block").find(".localModule__block__title").text(),o=$(e.currentTarget).data("srp"),u=n.closest("#localLongForm").find(".localModule"),a=n.closest(".localModule"),f=parseInt(u.index(a));if(window.cleverTapEnabled)var l={"event type":"cleartrip home local search","last event type":i,city:t,"user location":r,"collection name":"NA","collection type":"NA","organiser name":"NA","activity name":"NA","section name":s?s:"NA","activity location":"NA",price:"NA",distance:-1,dx:-1,action:"NA","srp position":f,"srp horizontal":o,platform:window.isMobileUA?"mweb":"desktop",rating:0,reviews:0,"reviews summary":"no","locality selected":"NA","activity date":"NA"};return l},o=function(e){var n=$(e.currentTarget),s=CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.read&&CT.utils.cookies.read("userLocation")?CT.utils.cookies.read("userLocation"):"NA",o=CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.read&&CT.utils.cookies.read("lastEventType")?CT.utils.cookies.read("lastEventType"):"new session",u=$(e.currentTarget).closest(".localModule__block").find(".localModule__block__title").text(),a=$(e.currentTarget).data("srp"),f=n.closest("#localLongForm").find(".localModule"),l=n.closest(".localModule"),c=parseInt(f.index(l));if(window.cleverTapEnabled){var h={"event type":"cleartrip home local search","last event type":o,city:t,"user location":s,"search type":-1,"section name":u?u:"NA","activity name":"NA","collection name":"NA","organiser name":"NA",platform:window.isMobileUA?"mweb":"desktop","activity date":"NA","srp position":c,"srp horizontal":a,"product name":"NA","story category":"NA"};if(window.sessionStorage){var p=i();p["srp position"]=c,p["srp horizontal"]=c,p["section name"]=u,r(p)}}return h},u=function(e){var t=$(e.currentTarget),u=s(e),a=o(e);u.distance=n(e),a["activity name"]=u["activity name"]=t.data("activityName"),u["activity location"]=t.data("activityLocation"),u.price=t.data("price"),window.actTypeCleverTap=a["search type"]=u["collection type"]=u.action="ct home activity rows",a["product name"]=t.data("product");if(window.sessionStorage){var f=i();f.source=a["search type"],r(f)}CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"local search",values:a}),CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create&&CT.utils.cookies.create("lastEventType","cleartrip home local search")},a=function(e){var t=s(e),n=o(e),u=$(e.currentTarget);window.actTypeCleverTap=n["search type"]=t.action=t["collection type"]="ct home product editorial",n["collection name"]=t["collection name"]=u.data("collectionName"),n["product name"]=u.data("product"),u.data("product")=="fnb"&&(n["organiser name"]=u.data("collectionName"),t["organiser name"]=u.data("collectionName"));if(window.sessionStorage){var a=i();a.source=n["search type"],r(a)}CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"local search",values:n}),CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create&&CT.utils.cookies.create("lastEventType","cleartrip home local search")},f=function(e){var t=$(e.currentTarget),n=o(e);n["product name"]="stories",n["story category"]=t.data("tag"),n["search type"]="ct home story web view",CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"local search",values:n}),CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create&&CT.utils.cookies.create("lastEventType","cleartrip home local search")},l=function(e){var t=$(e.currentTarget),n=o(e),s=moment(t.data("startDate")).format("DD/MM/YYYY"),u=moment(new Date).format("DD/MM/YYYY");window.actTypeCleverTap=n["search type"]="home event editorial",n["activity name"]=t.data("activity"),n["organiser name"]=t.data("source"),n["activity date"]=s?s:"NA",n["product name"]=t.data("product");if(window.sessionStorage){var a=i();a.source=n["search type"],r(a)}CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"local search",values:n}),CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create&&CT.utils.cookies.create("lastEventType","cleartrip home local search")},c="/local/"+t+"/localHomePage?CThome=true";$.ajax({method:"GET",url:c,success:function(e){$("#localLongForm").html(e),$("#localLongForm").on("click",".localStoriesItem",f),$("#localLongForm").on("click",".localCollectionItem",a),$("#localLongForm").on("click",".localEventItem",l);var n=!1,r=!1;$(window).scroll(function(){n=!0}),setInterval(function(){if(n&&!r){var e=$(window).scrollTop();if(e>630){r=!0;var i=CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.read&&CT.utils.cookies.read("userLocation")?CT.utils.cookies.read("userLocation"):"NA",s=CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.read&&CT.utils.cookies.read("lastEventType")?CT.utils.cookies.read("lastEventType"):"new session",o={"event type":"cleartrip home local viewed","last event type":s,city:t,"user location":i,platform:window.isMobileUA?"mweb":"desktop","carousel editorial":"no","carousel first editorial":"no","product editorial":$("#localLongForm").find(".localCollectionItem").length?"yes":"no","activity rows":"no","event carousel":$("#localLongForm").find(".localEventItem")?"yes":"no",wishlists:"no","recently viewed":"no","explore grid":"no","hero content":"no","special promotion":"no","upcoming booking":"no","story web view":$("#localLongForm").find(".localStoriesItem")?"yes":"no","deal card":"no","deal card image":"no"};CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"cleartrip home local viewed",values:o}),CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create&&!1&&CT.utils.cookies.create("lastEventType","cleartrip home local viewed")}n=!1}},50)}})},fetchProductsForLocationv2:function(e,t){window.affiliateutmExpiryDays=window.affiliateutmExpiryDays?window.affiliateutmExpiryDays:"1";var n=window.location.search?CT.utils.helperFunctions.queryToObj(window.location.search.substr(1)):{};CT.utils.helperFunctions.paidAffiliateTracker(n);try{$.ajax({method:"GET",url:"/local/api/v1/ctLocalAutoComp?city="+e,contentType:"application/json",dataType:"json",success:function(n){n=_.isString(n)?JSON.parse(n):n,n[e]?t(e,n[e]):localsHome.showCityUnavailable()},error:function(e){console.log(e),localsHome.showCityUnavailable()}})}catch(r){console.log(r),localsHome.showCityUnavailable()}},fetchProductsForLocation:function(e){try{$.ajax({method:"GET",url:"/local/api/v1/ctLocalAutoComp?city="+e,contentType:"application/json",dataType:"json",success:function(t){t=_.isString(t)?JSON.parse(t):t,t[e]?localsHome.generateProductForCity(t[e],e):localsHome.showCityUnavailable()},error:function(e){console.log(e),localsHome.showCityUnavailable()}})}catch(t){console.log(t),localsHome.showCityUnavailable()}},generateProductForCity:function(e,n){n=n.toLowerCase();var r=t(n),i=[];_.each(r,function(t,n){e[n]&&i.push(t)});var s=CT.to_html("LocalProductsTemplate",{enabledProducts:i});$("#localProducts").html(s)},fetchLocationFromLatLongv2:function(e,t,n){try{$.ajax({method:"GET",url:"/local/api/v1/ctLocalAutoComp?latitude="+e+"&longitude="+t,contentType:"application/json",dataType:"json",success:function(e){e=_.isString(e)?JSON.parse(e):e,_.each(e,function(e,t){window.currentCityName=t,window.currentCityCode=window.currentCityName.replace(/\s/g,"_")}),e[window.currentCityName]?(CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create("localCurrentCity",window.currentCityName,365),n&&n(window.currentCityName,e[window.currentCityName])):(window.currentCityName=window.localDefaultCity,localsHome.fetchProductsForLocationv2(window.currentCityName.toLowerCase(),n))},error:function(e){console.log(e),window.currentCityName=window.localDefaultCity,localsHome.fetchProductsForLocationv2(window.currentCityName.toLowerCase(),n)}})}catch(r){console.log(r),window.currentCityName=window.localDefaultCity,localsHome.fetchProductsForLocationv2(window.currentCityName.toLowerCase(),n)}},fetchLocationFromLatLong:function(e,t){try{$.ajax({method:"GET",url:"/local/api/v1/ctLocalAutoComp?latitude="+e+"&longitude="+t,contentType:"application/json",dataType:"json",success:function(e){e=_.isString(e)?JSON.parse(e):e,_.each(e,function(e,t){window.currentCityName=t,window.currentCityCode=window.currentCityName.replace(/\s/g,"_")}),e[window.currentCityName]?(CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create("localCurrentCity",window.currentCityName,365),localsHome.generateProductForCity(e[window.currentCityName],window.currentCityName)):localsHome.showCityUnavailable()},error:function(e){console.log(e),localsHome.showCityUnavailable()}})}catch(n){console.log(n),localsHome.showCityUnavailable()}},showLoadingState:function(){$("#localCityAvailable").hide(),$("#localEmptySpace").hide(),$("#localLoadingState").show()},showUndetectedCity:function(){$("#localCityAvailable").hide(),$("#localLoadingState").hide();var e=$("#localEmptySpace"),t=e.find(".localLocation");t.hide();var n=e.find("#undetectedCityBlock");n.show();var r=e.find("#unavailableCityBlock");r.hide(),e.show()},showCityUnavailable:function(){if(window.localDefaultCity.toLowerCase()==window.currentCityName.toLowerCase()){$("#localCityAvailable").hide(),$("#localLoadingState").hide();var e=$("#localEmptySpace"),t=e.find(".localLocation"),n=t.find("#locationName");n.html(window.currentCityName),t.show();var r=e.find("#undetectedCityBlock");r.hide();var i=e.find("#unavailableCityBlock");i.show(),e.show()}else localsHome.loadDefaultCity()},showCityAvailable:function(){$("#localEmptySpace").hide(),$("#localLoadingState").hide(),$("#localCityAvailable").show()},loadDefaultCityv2:function(e){window.localDefaultCity?(window.currentCityName=window.localDefaultCity.toLowerCase(),window.currentCityCode=window.currentCityName.replace(/\s/g,"_"),localsHome.fetchProductsForLocationv2(window.currentCityName,e)):localsHome.showUndetectedCity()},loadDefaultCity:function(){window.localDefaultCity?(window.currentCityName=window.localDefaultCity.toLowerCase(),window.currentCityCode=window.currentCityName.replace(/\s/g,"_"),localsHome.fetchProductsForLocation(window.currentCityName)):localsHome.showUndetectedCity()},setSpacePreference:function(){CT.utils.cookies.read("spacePreference")&&CT.utils.cookies.read("spacePreference")=="local"?localsHome.showLocalSpace():localsHome.showTravelSpace()},getGeoLocationv2:function(e){var t=function(t){t.coords&&t.coords.latitude&&t.coords.longitude?localsHome.fetchLocationFromLatLongv2(t.coords.latitude,t.coords.longitude,e):localsHome.loadDefaultCityv2(e)},n=function(){localsHome.loadDefaultCityv2(e)};navigator.geolocation?navigator.geolocation.getCurrentPosition(t,n):localsHome.loadDefaultCityv2(e),setTimeout(function(){(window.currentCityName==undefined||window.currentCityName=="")&&localsHome.loadDefaultCityv2(e)},3e3)},getGeoLocation:function(){var e=function(e){e.coords&&e.coords.latitude&&e.coords.longitude?localsHome.fetchLocationFromLatLong(e.coords.latitude,e.coords.longitude):localsHome.loadDefaultCity()},t=function(){localsHome.loadDefaultCity()};navigator.geolocation?navigator.geolocation.getCurrentPosition(e,t):localsHome.loadDefaultCity(),setTimeout(function(){(window.currentCityName==undefined||window.currentCityName=="")&&localsHome.loadDefaultCity()},3e3)},localTrendingClick:function(e){try{if(window.cleverTapEnabled){var t=$(e).find("h5")?$(e).find("h5").text():"NA",n=-1,r=$(e).closest(".localTrendingTiles").find(".col6");if(r){var i=$(e).closest(".col6");n=parseInt(r.index(i)-1)}var s={"event type":"trending clicked","last event type":CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.read&&CT.utils.cookies.read("lastEventType")?CT.utils.cookies.read("lastEventType"):"new session",city:window.window.currentCityName?_.capitalize(window.currentCityName):"NA","user location":CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.read&&CT.utils.cookies.read("userLocation")?_.capitalize(CT.utils.cookies.read("userLocation")):"NA","collection name":t,"collection type":"NA","activity name":"NA","activity location":"NA",price:-1,distance:-1,dx:-1,action:"NA","srp position":n,platform:window.isMobileUA?"mweb":"desktop"};CT.utils.helperFunctions.tpTrack({tp:"clevertap",category:"local action",values:s})}}catch(e){}CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create&&CT.utils.cookies.create("lastEventType","trending clicked")},initv2:function(e){var n=function(n,r){var i=t(n);window.localProductHash=r;var s="";_.each(_.keys(i),function(e){if(r[e]==1)return s=e,!1});if(e.redirect==1){var o=window.location.search?CT.utils.helperFunctions.queryToObj(window.location.search.substr(1)):{};o.activity?(window.sessionStorage&&!window.sessionStorage.getItem("isRedirect")&&window.sessionStorage.setItem("isRedirect","true"),window.location.href=i[s].url+window.location.search):window.location.href=i[s].url}else e.attachLink==1?$("#"+e.localsLinkId).attr("href",i[s].url):e.showLocalCard==1&&localsHome.getLocalHomePage(localProductHash)};window.currentCityName?localsHome.fetchProductsForLocationv2(window.currentCityName.toLowerCase(),n):(window.currentCityName="",CT.utils.cookies.read("localCurrentCity")!=null?(window.currentCityName=CT.utils.cookies.read("localCurrentCity"),localsHome.fetchProductsForLocationv2(CT.utils.cookies.read("localCurrentCity").toLowerCase(),n)):localsHome.getGeoLocationv2(n))},init:function(e){localsHome.showLoadingState();if(e&&window.currentCityName)localsHome.setEventsForLocalWeb(),localsHome.fetchProductsForLocation(window.currentCityName.toLowerCase());else{window.currentCityName="",localsHome.setEventsForLocalWeb(),CT.utils.cookies.read("localCurrentCity")!=null?(window.currentCityName=CT.utils.cookies.read("localCurrentCity"),localsHome.fetchProductsForLocation(CT.utils.cookies.read("localCurrentCity").toLowerCase())):localsHome.getGeoLocation(),CT&&CT.utils&&CT.utils.helperFunctions&&CT.utils.helperFunctions.tpTrack&&CT.utils.helperFunctions.tpTrack({tp:"clevertap"});try{window.cleverTapEnabled&&CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.read&&!CT.utils.cookies.read("userLocation")&&CT.utils.helperFunctions.setUserLocationCookie()}catch(t){}}}}}(),function(e){var t={init:function(){window.citiesList||e.ajax({method:"GET",url:"/mobile/resource/v2/local_cities.json",contentType:"application/json",dataType:"json",success:function(e){e=_.isString(e)?JSON.parse(e):e,window.citiesList=e,window.CT&&window.CT.app=="local"?window.currentCityName=window.currentCityName||window.App&&window.App.router&&window.App.router.currentView&&window.App.router.currentView.model?window.App.router.currentView.model.get("jsons").cityname:"":window.currentCityName=window.currentCityName||"",window.currentCityCode=window.currentCityName.replace(/\s/g,"_");if(window.wlCitiesList&&window.wl_enable_all_cities==0){var t=[];for(country in window.citiesList.country)window.citiesList.country[country].topcities=_.map(window.wlCitiesList,function(e){return e.city_name})}},error:function(e){console.log(e)}})},getCityProductConfig:function(t,n){var r=t.toLowerCase();e.ajax({method:"GET",url:"/local/api/v1/ctLocalAutoComp?city="+r,contentType:"application/json",dataType:"json",success:function(e){e=_.isString(e)?JSON.parse(e):e,console.log(e),e[r]&&n(r,e[r])},error:function(e){console.log(e)}})},switchCity:function(e){if(parent.window.isHomePage)t.getCityProductConfig(e,function(e,t){e=e.toLowerCase(),t.homepage?n="/local/"+e+"/featured-activities-in-"+e:t.ttd?n="/local/"+e+"/things-to-do-in-"+e:t.fnb?n="/local/"+e+"/food-and-drinks-in-"+e:t.events&&(n="/local/"+e+"/events-in-"+e),CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create("localCurrentCity",e,365),window.location=n});else if(CT&&CT.app&&CT.app=="local"){if(App&&App.router&&App.router.currentView&&App.router.currentView.model){var n=App.router.currentView.model.get("jsons").productConfig.pathName;CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create("localCurrentCity",e,365);var r=e?"local/"+e.toLowerCase()+"/"+n+"-"+e.toLowerCase():window.location.href;window.currentCityName!=e&&App.router.redirectTo(r,{pushState:!1})}}else window.currentCityName=e.toLowerCase(),window.currentCityCode=window.currentCityName.replace(/\s/g,"_"),CT&&CT.utils&&CT.utils.cookies&&CT.utils.cookies.create("localCurrentCity",window.currentCityName,365),window.localsHome&&localsHome.init(!0)}};window.fetchCitiesList=t,window.fetchCitiesList.init()}(jQuery),function(e){function t(t,n){var r=navigator.userAgent.toLowerCase(),i=e.browser,s=this,o=i.webkit;r.indexOf("android"),s.isIPAD=r.match(/(ipad)/);for(var u=document.createElement("div").style,f=["webkit","Moz","ms","O"],l="",c=0,h,r=0;r<f.length;r++)h=f[r],!l&&h+"Transform"in u&&(l=h),h=h.toLowerCase(),window.requestAnimationFrame||(window.requestAnimationFrame=window[h+"RequestAnimationFrame"],window.cancelAnimationFrame=window[h+"CancelAnimationFrame"]||window[h+"CancelRequestAnimationFrame"]);window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-c)),r=window.setTimeout(function(){e(t+n)},n);return c=t+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)}),s.slider=e(t),s.ev=e({}),s._a=e(document),s.st=e.extend({},e.fn.royalSlider.defaults,n),s._b=s.st.transitionSpeed,s.st.allowCSS3&&(!o||s.st.allowCSS3OnWebkit)&&(r=l+(l?"T":"t"),s._c=r+"ransform"in u&&r+"ransition"in u,s._c&&(s._d=l+(l?"P":"p")+"erspective"in u)),l=l.toLowerCase(),s._e="-"+l+"-",s._f="vertical"===s.st.slidesOrientation?!1:!0,s._g=s._f?"left":"top",s._h=s._f?"width":"height",s._i=-1,s._j="fade"===s.st.transitionType?!1:!0,s._j||(s.st.sliderDrag=!1,s._k=10),s._l=0,s._m=0,e.each(e.rsModules,function(e,t){t.call(s)}),s.slides=[],s._n=0,(s.st.slides?e(s.st.slides):s.slider.children().detach()).each(function(){s._o(this,!0)}),s.st.randomizeSlides&&s.slides.sort(function(){return.5-Math.random()}),s.numSlides=s.slides.length,s._p(),s.st.startSlideId>s.numSlides-1&&(s.st.startSlideId=s.numSlides-1),s.staticSlideId=s.currSlideId=s._q=s.st.startSlideId,s.currSlide=s.slides[s.currSlideId],s._r=0,s.slider.addClass((s._f?"rsHor":"rsVer")+(s._j?"":" rsFade")),u='<div class="rsOverflow"><div class="rsContainer">',s.slidesSpacing=s.st.slidesSpacing,s._s=(s._f?s.slider.width():s.slider.height())+s.st.slidesSpacing,s._t=Boolean(0<s._u),1>=s.numSlides&&(s._v=!1),s._w=s._v&&s._j?2===s.numSlides?1:2:0,s._x=6>s.numSlides?s.numSlides:6,s._y=0,s._z=0,s.slidesJQ=[];for(r=0;r<s.numSlides;r++)s.slidesJQ.push(e('<div style="'+(s._j?"":r!==s.currSlideId?"z-index: 0; display:none; opacity: 0; position: absolute;  left: 0; top: 0;":"z-index: 0;  position: absolute; left: 0; top: 0;")+'" class="rsSlide "></div>'));s.slider.html(u+"</div></div>"),s._a1=s.slider.children(".rsOverflow"),s._b1=s._a1.children(".rsContainer"),s._c1=e('<div class="rsPreloader"></div>'),r=s._b1.children(".rsSlide"),s._d1=s.slidesJQ[s.currSlideId],s._e1=0,"ontouchstart"in window||"createTouch"in document?(s.hasTouch=!0,s._f1="touchstart.rs",s._g1="touchmove.rs",s._h1="touchend.rs",s._i1="touchcancel.rs",s._j1=.5):(s.hasTouch=!1,s._j1=.2,s.st.sliderDrag&&(i.msie||i.opera?s._k1=s._l1="move":i.mozilla?(s._k1="-moz-grab",s._l1="-moz-grabbing"):o&&-1!=navigator.platform.indexOf("Mac")&&(s._k1="-webkit-grab",s._l1="-webkit-grabbing"),s._m1()),s._f1="mousedown.rs",s._g1="mousemove.rs",s._h1="mouseup.rs",s._i1="mouseup.rs"),s._c?(s._n1="transition-property",s._o1="transition-duration",s._p1="transition-timing-function",s._q1=s._r1=s._e+"transform",s._d?(o&&s.slider.addClass("rsWebkit3d"),s._s1="translate3d(",s._t1="px, ",s._u1="px, 0px)"):(s._s1="translate(",s._t1="px, ",s._u1="px)"),s._j)?s._b1[s._e+s._n1]=s._e+"transform":(i={},i[s._e+s._n1]="opacity",i[s._e+s._o1]=s.st.transitionSpeed+"ms",i[s._e+s._p1]=s.st.css3easeInOut,r.css(i)):(s._r1="left",s._q1="top");var p;e(window).on("resize.rs",function(){p&&clearTimeout(p),p=setTimeout(function(){s.updateSliderSize()},50)}),s.ev.trigger("rsAfterPropsSetup"),s.updateSliderSize(),s.st.keyboardNavEnabled&&s._v1(),s.st.arrowsNavHideOnTouch&&s.hasTouch&&(s.st.arrowsNav=!1),s.st.arrowsNav&&(i=s.st.controlsInside?s._a1:s.slider,e('<div class="rsArrow rsArrowLeft"><div class="rsArrowIcn"></div></div><div class="rsArrow rsArrowRight"><div class="rsArrowIcn"></div></div>').appendTo(i),s._w1=i.children(".rsArrowLeft").click(function(e){e.preventDefault(),s.prev()}),s._x1=i.children(".rsArrowRight").click(function(e){e.preventDefault(),s.next()}),s.st.arrowsNavAutoHide&&!s.hasTouch&&(s._w1.addClass("rsHidden"),s._x1.addClass("rsHidden"),i.one("mousemove.arrowshover",function(){s._w1.removeClass("rsHidden"),s._x1.removeClass("rsHidden")}),i.hover(function(){s._y1||(s._w1.removeClass("rsHidden"),s._x1.removeClass("rsHidden"))},function(){s._y1||(s._w1.addClass("rsHidden"),s._x1.addClass("rsHidden"))})),s.ev.on("rsOnUpdateNav",function(){s._z1()}),s._z1()),s._a2=!s.hasTouch&&s.st.sliderDrag||s.hasTouch&&s.st.sliderTouch,s._a2?s._b1.on(s._f1,function(e){s._b2(e)}):s.dragSuccess=!1;var d=["rsPlayBtnIcon","rsPlayBtn","rsCloseVideoBtn","rsCloseVideoIcn"];s._b1.click(function(t){if(!s.dragSuccess){var n=e(t.target).attr("class");if(e.inArray(n,d)!==-1&&s.toggleVideo())return!1;if(s.st.navigateByClick&&!s._c2){if(e(t.target).closest(".rsNoDrag",s._d1).length)return!0;s._d2(t)}}}),s.ev.trigger("rsAfterInit")}e.rsModules||(e.rsModules={}),t.prototype={_d2:function(e){e[this._f?"pageX":"pageY"]-this._e2>0?this.next():this.prev()},_p:function(){var e;e=this.st.numImagesToPreload;if(this._v=this.st.loop)this.numSlides===2?(this._v=!1,this.st.loopRewind=!0):this.numSlides<2&&(this.st.loopRewind=this._v=!1);this._v&&e>0&&(this.numSlides<=4?e=1:this.st.numImagesToPreload>(this.numSlides-1)/2&&(e=Math.floor((this.numSlides-1)/2))),this._u=e},_o:function(t,n){function r(e,t){s.image=e.attr(t?t:"src"),s.caption=t?e.contents():e.attr("alt"),s.videoURL=e.attr("data-rsVideo")}var i,s={};this._f2=t=e(t),this.ev.trigger("rsBeforeParseNode",[t,s]);if(!s.stopParsing)return t=this._f2,s.id=this._n,s.contentAdded=!1,this._n++,s.hasCover||(t.hasClass("rsImg")?(tempEl=t,i=!0):(tempEl=t.find(".rsImg"),tempEl.length&&(i=!0)),i?(s.bigImage=tempEl.attr("data-rsBigImg"),tempEl.is("a")?r(tempEl,"href"):tempEl.is("img")&&r(tempEl)):t.is("img")&&(t.addClass("rsImg"),r(t))),tempEl=t.find(".rsCaption"),tempEl.length&&(s.caption=tempEl.remove()),s.image||(s.isLoaded=!0,s.isRendered=!1,s.isLoading=!1),s.content=t,this.ev.trigger("rsAfterParseNode",[t,s]),n&&this.slides.push(s),s},_v1:function(){var e=this;e._a.on("keydown.rskb",function(t){!e._g2&&!e._h2&&(t.keyCode===37?(t.preventDefault(),e.prev()):t.keyCode===39&&(t.preventDefault(),e.next()))})},goTo:function(e,t){e!==this.currSlideId&&this._i2(e,this.st.transitionSpeed,!0,!t)},destroy:function(e){var t=this;t.ev.trigger("rsBeforeDestroy"),t._a.off("keydown.rskb "+t._g1+" "+t._h1),t._b1.on(t._f1,function(e){t._b2(e)}),t.slider.data("royalSlider",""),e&&t.slider.remove()},_j2:function(t,n){function r(n,r,o){n.isAdded?(i(r,n),s(r,n)):(o||(o=u.slidesJQ[r]),n.holder?o=n.holder:(o=u.slidesJQ[r]=e(o),n.holder=o),n.appendOnLoaded=!1,s(r,n,o),i(r,n),u._l2(n,o,t),appended=n.isAdded=!0)}function i(e,n){n.contentAdded||(u.setItemHtml(n,t),t||(n.contentAdded=!0))}function s(e,t,n){u._j&&(n||(n=u.slidesJQ[e]),n.css(u._g,(e+u._z+d)*u._s))}function o(e){if(c){if(e>h-1)return o(e-h);if(e<0)return o(h+e)}return e}var u=this,f,l,c=u._v,h=u.numSlides;if(!isNaN(n))return o(n);var p=u.currSlideId,d,v=t?Math.abs(u._k2-u.currSlideId)>=u.numSlides-1?0:1:u._u,m=Math.min(2,v),g=!1,y=!1,b;for(l=p;l<p+1+m;l++){b=o(l);if((f=u.slides[b])&&(!f.isAdded||!f.positionSet)){g=!0;break}}for(l=p-1;l>p-1-m;l--){b=o(l);if((f=u.slides[b])&&(!f.isAdded||!f.positionSet)){y=!0;break}}if(g)for(l=p;l<p+v+1;l++)b=o(l),d=Math.floor((u._q-(p-l))/u.numSlides)*u.numSlides,(f=u.slides[b])&&r(f,b);if(y)for(l=p-1;l>p-1-v;l--)b=o(l),d=Math.floor((u._q-(p-l))/h)*h,(f=u.slides[b])&&r(f,b);if(!t){m=o(p-v),p=o(p+v),v=m>p?0:m;for(l=0;l<h;l++)!(m>p&&l>m-1)&&(l<v||l>p)&&(f=u.slides[l])&&f.holder&&(f.holder.detach(),f.isAdded=!1)}},setItemHtml:function(t,n){function r(){s.isWaiting=!0,t.holder.html(i._c1.clone()),s.slideId=-99}var i=this,s=t.holder,o=function(t){var s=t.sizeType;return function(o){var u=t.content,f=t.holder;if(o){var l=o.currentTarget;e(l).off("load error");if(o.type==="error"){t.isLoaded=!0,t.image="",t.isLoading=!1,u.addClass("rsSlideError"),f.html(u),t.holder.trigger("rsAfterContentSet"),i.ev.trigger("rsAfterContentSet",t);return}}if(t.image){if(t.bigImage&&t.sizeType!==s){s==="med"?t.isMedLoading=!1:s==="big"?t.isBigLoading=!1:t.isMedLoading=t.isLoading=!1;return}if(t.isLoaded){if(!t.isRendered&&n){r();return}i._m2(t)}else{var c;u.hasClass("rsImg")?(c=!0,o=u):(c=!1,o=u.find(".rsImg")),o.length&&o.is("a")&&(c?u=e('<img class="rsImg" src="'+t.image+'" />'):u.find(".rsImg").replaceWith('<img class="rsImg" src="'+t.image+'" />'),t.content=u),t.iW=l.width,t.iW>0&&(t.iH=l.height,t.isLoaded=!0,t.isLoading=!1,i._m2(t))}}else{if(!i._t&&n&&!t.isRendered){t.isRendered=!0,r();return}t.isLoaded=!0,t.isLoading=!1}l=t.id-i._l,!n&&!t.appendOnLoaded&&i.st.fadeinLoadedSlide&&(l===0||(i._h2||i._g2)&&(l===-1||l===1))?(u.css(i._e+"transition","opacity 400ms ease-in-out").css({visibility:"visible",opacity:0}),f.html(u),setTimeout(function(){u.css("opacity",1)},6)):f.html(u),t.isRendered=!0,f.find("a").off("click.rs").on("click.rs",function(){if(i.dragSuccess)return!1;i._c2=!0,i.ev.trigger("rsSlideClick"),setTimeout(function(){i._c2=!1},3)}),t.holder.trigger("rsAfterContentSet"),i.ev.trigger("rsAfterContentSet",t),t.appendOnLoaded&&i._l2(t,u,n)}};if(t.isLoaded)o(t)();else if(n)r();else if(t.image)if(t.isLoading){var u=1,f=function(){if(t.isLoading)if(t.isLoaded)o(t)();else{if(u%50===0){var e=t.imageLoader;if(e.complete&&e.naturalWidth!==void 0&&e.naturalWidth!==0&&e.naturalHeight!==0){o(t)();return}}u>300||(setTimeout(f,400),u++)}};f(t.sizeType)}else{var l=e("<img/>"),c=t.image;n?r():t.isLoading||(c||(c=l.attr("src"),l=e("<img/>")),t.holder.html(i._c1.clone()),t.isLoading=!0,t.imageLoader=l,l.one("load error",o(t)).attr("src",c))}else o(t)()},_l2:function(e,t,n){var r=e.holder,i=e.id-this._l;this._j&&!n&&this.st.fadeinLoadedSlide&&(i===0||(this._h2||this._g2)&&(i===-1||i===1))?(t=e.content,t.css(this._e+"transition","opacity 400ms ease-in-out").css({visibility:"visible",opacity:0}),this._b1.append(r),setTimeout(function(){t.css("opacity",1)},6)):this._b1.append(r),e.appendOnLoaded=!1},_b2:function(t,n){var r=this,i;r.dragSuccess=!1;if(e(t.target).closest(".rsNoDrag",r._d1).length)return!0;n||r._h2&&r._n2();if(r._g2)r.hasTouch&&(r._o2=!0);else{r.hasTouch&&(r._o2=!1),r._p2();if(r.hasTouch){var s=t.originalEvent.touches;if(!(s&&s.length>0))return;i=s[0],s.length>1&&(r._o2=!0)}else i=t,t.preventDefault();r._g2=!0,r._a.on(r._g1,function(e){r._q2(e,n)}).on(r._h1,function(e){r._r2(e,n)}),r._s2="",r._t2=!1,r._u2=i.pageX,r._v2=i.pageY,r._w2=r._r=(n?r._x2:r._f)?i.pageX:i.pageY,r._y2=0,r._z2=0,r._a3=n?r._b3:r._m,r._c3=(new Date).getTime(),r.hasTouch&&r._a1.on(r._i1,function(e){r._r2(e,n)})}},_d3:function(e,t){if(this._e3){var n=this._f3,r=e.pageX-this._u2,i=e.pageY-this._v2,s=this._a3+r,o=this._a3+i,u=t?this._x2:this._f,s=u?s:o,a=this._s2;this._t2=!0,this._u2=e.pageX,this._v2=e.pageY,o=u?this._u2:this._v2,a==="x"&&r!==0?this._y2=r>0?1:-1:a==="y"&&i!==0&&(this._z2=i>0?1:-1),r=u?r:i,t?s>this._g3?s=this._a3+r*this._j1:s<this._h3&&(s=this._a3+r*this._j1):this._v||(this.currSlideId<=0&&o-this._w2>0&&(s=this._a3+r*this._j1),this.currSlideId>=this.numSlides-1&&o-this._w2<0&&(s=this._a3+r*this._j1)),this._a3=s,n-this._c3>200&&(this._c3=n,this._r=o),t?this._j3(this._a3):this._j&&this._i3(this._a3)}},_q2:function(e,t){var n=this;if(n.hasTouch){if(n._k3)return;var r=e.originalEvent.touches;if(!r)return;if(r.length>1)return;point=r[0]}else point=e;n._t2||(n._c&&(t?n._l3:n._b1).css(n._e+n._o1,"0s"),function s(){n._g2&&(n._m3=requestAnimationFrame(s),n._n3&&n._d3(n._n3,t))}());if(n._e3)e.preventDefault(),n._f3=(new Date).getTime(),n._n3=point;else{var r=t?n._x2:n._f,i=Math.abs(point.pageX-n._u2)-Math.abs(point.pageY-n._v2)-(r?-7:7);if(i>7){if(r)e.preventDefault(),n._s2="x";else if(n.hasTouch){n._o3();return}n._e3=!0}else if(i<-7){if(r){if(n.hasTouch){n._o3();return}}else e.preventDefault(),n._s2="y";n._e3=!0}}},_o3:function(){this._k3=!0,this._t2=this._g2=!1,this._r2()},_r2:function(t,n){function r(e){return e<100?100:e>500?500:e}function i(e,t){if(s._j||n)f=(-s._q-s._z)*s._s,l=Math.abs(s._m-f),s._b=l/t,e&&(s._b=s._b+250),s._b=r(s._b),s._q3(f,!1)}var s=this,o,u,f,l;s.ev.trigger("rsDragRelease"),s._n3=null,s._g2=!1,s._k3=!1,s._e3=!1,s._f3=0,cancelAnimationFrame(s._m3),s._t2&&(n?s._j3(s._a3):s._j&&s._i3(s._a3)),s._a.off(s._g1).off(s._h1),s.hasTouch&&s._a1.off(s._i1),s._m1();if(!s._t2&&!s._o2&&n&&s._p3){var c=e(t.target).closest(".rsNavItem");c.length&&s.goTo(c.index())}else{u=n?s._x2:s._f;if(s._t2&&!(s._s2==="y"&&u||s._s2==="x"&&!u)){s.dragSuccess=!0,s._s2="";var h=s.st.minSlideOffset;o=s.hasTouch?t.originalEvent.changedTouches[0]:t;var p=u?o.pageX:o.pageY,d=s._w2;o=s._r;var v=s.currSlideId,m=s.numSlides,g=u?s._y2:s._z2,y=s._v;Math.abs(p-d),o=p-o,u=(new Date).getTime()-s._c3,u=Math.abs(o)/u;if(g===0||m<=1)i(!0,u);else{if(!y&&!n)if(v<=0){if(g>0){i(!0,u);return}}else if(v>=m-1&&g<0){i(!0,u);return}if(n){f=s._b3;if(f>s._g3)f=s._g3;else if(f<s._h3)f=s._h3;else{h=u*u/.006,c=-s._b3,p=s._r3-s._s3+s._b3,o>0&&h>c?(c+=s._s3/(15/(h/u*.003)),u=u*c/h,h=c):o<0&&h>p&&(p+=s._s3/(15/(h/u*.003)),u=u*p/h,h=p),c=Math.max(Math.round(u/.003),50),f+=h*(o<0?-1:1);if(f>s._g3){s._t3(f,c,!0,s._g3,200);return}if(f<s._h3){s._t3(f,c,!0,s._h3,200);return}}s._t3(f,c,!0)}else d+h<p?g<0?i(!1,u):s._i2("prev",r(Math.abs(s._m-(-s._q-s._z+1)*s._s)/u),!1,!0,!0):d-h>p?g>0?i(!1,u):s._i2("next",r(Math.abs(s._m-(-s._q-s._z-1)*s._s)/u),!1,!0,!0):i(!1,u)}}}},_i3:function(e){e=this._m=e,this._c?this._b1.css(this._r1,this._s1+(this._f?e+this._t1+0:0+this._t1+e)+this._u1):this._b1.css(this._f?this._r1:this._q1,e)},updateSliderSize:function(e){var t,n;this.st.beforeResize&&this.st.beforeResize.call(this);if(this.st.autoScaleSlider){var r=this.st.autoScaleSliderWidth,i=this.st.autoScaleSliderHeight;this.st.autoScaleHeight?(t=this.slider.width(),t!=this.width&&(this.slider.css("height",t*(i/r)),t=this.slider.width()),n=this.slider.height()):(n=this.slider.height(),n!=this.height&&(this.slider.css("width",n*(r/i)),n=this.slider.height()),t=this.slider.width())}else t=this.slider.width(),n=this.slider.height();this._e2=this.slider.offset(),this._e2=this._e2[this._g];if(e||t!=this.width||n!=this.height){this.width=t,this.height=n,this._u3=t,this._v3=n,this.ev.trigger("rsBeforeSizeSet"),this._a1.css({width:this._u3,height:this._v3}),this._s=(this._f?this._u3:this._v3)+this.st.slidesSpacing,this._w3=this.st.imageScalePadding;for(t=0;t<this.slides.length;t++)e=this.slides[t],e.positionSet=!1,e&&e.image&&e.isLoaded&&(e.isRendered=!1,this._m2(e));if(this._x3)for(t=0;t<this._x3.length;t++)e=this._x3[t],e.holder.css(this._g,(e.id+this._z)*this._s);this._j2(),this._j&&(this._c&&this._b1.css(this._e+"transition-duration","0s"),this._i3((-this._q-this._z)*this._s)),this.ev.trigger("rsOnUpdateNav"),this.st.afterResize&&this.st.afterResize.call(this)}},setSlidesOrientation:function(){},appendSlide:function(e,t){var n=this._o(e);if(isNaN(t)||t>this.numSlides)t=this.numSlides;this.slides.splice(t,0,n),this.slidesJQ.splice(t,0,'<div style="'+(this._j?"position: absolute;":"z-index: 0; display:none; opacity: 0; position: absolute;  left: 0; top: 0;")+'" class="rsSlide"></div>'),t<this.currSlideId&&this.currSlideId++,this.ev.trigger("rsOnAppendSlide",[n,t]),this._z3(t),t===this.currSlideId&&this.ev.trigger("rsAfterSlideChange")},removeSlide:function(e){var t=this.slides[e];t&&(t.holder&&t.holder.remove(),e<this.currSlideId&&this.currSlideId++,this.slides.splice(e,1),this.slidesJQ.splice(e,1),this.ev.trigger("rsOnRemoveSlide",[e]),this._z3(e),e===this.currSlideId&&this.ev.trigger("rsAfterSlideChange"))},_z3:function(){var e=this,t=e.numSlides,t=e._q<=0?0:Math.floor(e._q/t);e.numSlides=e.slides.length,e.numSlides===0?(e.currSlideId=e._z=e._q=0,e.currSlide=e._a4=null):e._q=t*e.numSlides+e.currSlideId;for(t=0;t<e.numSlides;t++)e.slides[t].id=t;e.currSlide=e.slides[e.currSlideId],e._d1=e.slidesJQ[e.currSlideId],e.currSlideId>=e.numSlides?e.goTo(e.numSlides-1):e.currSlideId<0&&e.goTo(0),e._p(),e._j&&e._v&&e._b1.css(e._e+e._o1,"0ms"),e._b4&&clearTimeout(e._b4),e._b4=setTimeout(function(){e._i3((-e._q-e._z)*e._s),e._j2()},14),e.ev.trigger("rsOnUpdateNav")},_m1:function(){!this.hasTouch&&this._j&&(this._k1?this._a1.css("cursor",this._k1):(this._a1.removeClass("grabbing-cursor"),this._a1.addClass("grab-cursor")))},_p2:function(){!this.hasTouch&&this._j&&(this._l1?this._a1.css("cursor",this._l1):(this._a1.removeClass("grab-cursor"),this._a1.addClass("grabbing-cursor")))},next:function(e){this._i2("next",this.st.transitionSpeed,!0,!e)},prev:function(e){this._i2("prev",this.st.transitionSpeed,!0,!e)},_i2:function(e,t,n,r,i){var s=this,o,u,a;s._d4&&s.stopVideo(),s.ev.trigger("rsBeforeMove",[e,r]),newItemId=e==="next"?s.currSlideId+1:e==="prev"?s.currSlideId-1:e=parseInt(e,10);if(!s._v){if(newItemId<0){s._e4("left",!r);return}if(newItemId>=s.numSlides){s._e4("right",!r);return}}s._h2&&(s._n2(),n=!1),u=newItemId-s.currSlideId,a=s._k2=s.currSlideId;var f=s.currSlideId+u,r=s._q,l;s._v?(f=s._j2(!1,f),r+=u):r=f,s._l=f,s._a4=s.slidesJQ[s.currSlideId],s._q=r,s.currSlideId=s._l,s.currSlide=s.slides[s.currSlideId],s._d1=s.slidesJQ[s.currSlideId],f=Boolean(u>0),u=Math.abs(u);var c=Math.floor(a/s._u),h=Math.floor((a+(f?2:-2))/s._u),c=(f?Math.max(c,h):Math.min(c,h))*s._u+(f?s._u-1:0);c>s.numSlides-1?c=s.numSlides-1:c<0&&(c=0),a=f?c-a:a-c,a>s._u&&(a=s._u);if(u>a+2){s._z=s._z+(u-(a+2))*(f?-1:1),t*=1.4;for(a=0;a<s.numSlides;a++)s.slides[a].positionSet=!1}s._b=t,s._j2(!0),i||(l=!0),o=(-r-s._z)*s._s,l?setTimeout(function(){s._c4=!1,s._q3(o,e,!1,n),s.ev.trigger("rsOnUpdateNav")},0):(s._q3(o,e,!1,n),s.ev.trigger("rsOnUpdateNav"))},_z1:function(){this.st.arrowsNav&&(this.numSlides<=1?(this._w1.css("display","none"),this._x1.css("display","none")):(this._w1.css("display","block"),this._x1.css("display","block"),!this._v&&!this.st.loopRewind&&(this.currSlideId===0?this._w1.addClass("rsArrowDisabled"):this._w1.removeClass("rsArrowDisabled"),this.currSlideId===this.numSlides-1?this._x1.addClass("rsArrowDisabled"):this._x1.removeClass("rsArrowDisabled"))))},_q3:function(t,n,r,i,s){function o(){var e=f.data("rsTimeout");e&&(f!==l&&f.css({opacity:0,display:"none",zIndex:0}),clearTimeout(e),f.data("rsTimeout",""));if(e=l.data("rsTimeout"))clearTimeout(e),l.data("rsTimeout","")}var u=this,f,l,c={};isNaN(u._b)&&(u._b=400),u._m=u._a3=t,u.ev.trigger("rsBeforeAnimStart"),u.st.beforeSlideChange&&u.st.beforeSlideChange.call(u),u._c?u._j?(c[u._e+u._o1]=u._b+"ms",c[u._e+u._p1]=i?e.rsCSS3Easing[u.st.easeInOut]:e.rsCSS3Easing[u.st.easeOut],u._b1.css(c),setTimeout(function(){u._i3(t)},u.hasTouch?5:0)):(u._b=u.st.transitionSpeed,f=u._a4,l=u._d1,l.data("rsTimeout")&&l.css("opacity",0),o(),f&&f.data("rsTimeout",setTimeout(function(){c[u._e+u._o1]="0ms",c.zIndex=0,c.display="none",f.data("rsTimeout",""),f.css(c),setTimeout(function(){f.css("opacity",0)},16)},u._b+60)),c.display="block",c.zIndex=u._k,c.opacity=0,c[u._e+u._o1]="0ms",c[u._e+u._p1]=e.rsCSS3Easing[u.st.easeInOut],l.css(c),l.data("rsTimeout",setTimeout(function(){l.css(u._e+u._o1,u._b+"ms"),l.data("rsTimeout",setTimeout(function(){l.css("opacity",1),l.data("rsTimeout","")},20))},20))):u._j?(c[u._f?u._r1:u._q1]=t+"px",u._b1.animate(c,u._b,i?u.st.easeInOut:u.st.easeOut)):(f=u._a4,l=u._d1,l.stop(!0,!0).css({opacity:0,display:"block",zIndex:u._k}),u._b=u.st.transitionSpeed,l.animate({opacity:1},u._b,u.st.easeInOut),o(),f&&f.data("rsTimeout",setTimeout(function(){f.stop(!0,!0).css({opacity:0,display:"none",zIndex:0})},u._b+60))),u._h2=!0,u.loadingTimeout&&clearTimeout(u.loadingTimeout),u.loadingTimeout=s?setTimeout(function(){u.loadingTimeout=null,s.call()},u._b+60):setTimeout(function(){u.loadingTimeout=null,u._f4(n)},u._b+60)},_n2:function(){this._h2=!1,clearTimeout(this.loadingTimeout);if(this._j)if(this._c){var e=this._m,t=this._a3=this._g4();this._b1.css(this._e+this._o1,"0ms"),e!==t&&this._i3(t)}else this._b1.stop(!0),this._m=parseInt(this._b1.css(this._r1),10);else this._k>20?this._k=10:this._k++},_g4:function(){var e=window.getComputedStyle(this._b1.get(0),null).getPropertyValue(this._e+"transform").replace(/^matrix\(/i,"").split(/, |\)$/g);return parseInt(e[this._f?4:5],10)},_h4:function(e,t){return this._c?this._s1+(t?e+this._t1+0:0+this._t1+e)+this._u1:e},_f4:function(){this._j||(this._d1.css("z-index",0),this._k=10),this._h2=!1,this.staticSlideId=this.currSlideId,this._j2(),this._i4=!1,this.ev.trigger("rsAfterSlideChange"),this.st.afterSlideChange&&this.st.afterSlideChange.call(this)},_e4:function(e,t){var n=this,r=(-n._q-n._z)*n._s;moveDist=30;if(n.numSlides!==0)if(n.st.loopRewind)e==="left"?n.goTo(n.numSlides-1,t):n.goTo(0,t);else if(!n._h2&&n._j&&moveDist!==0){n._b=200;var i=function(){n._h2=!1};n._q3(r+(e==="left"?moveDist:-moveDist),"",!1,!0,function(){n._h2=!1,n._q3(r,"",!1,!0,i)})}},_m2:function(e){if(!e.isRendered){var t=e.content,n="rsImg",r,i=this.st.imageAlignCenter,s=this.st.imageScaleMode,o;e.videoURL&&(n="rsVideoContainer",s!=="fill"?r=!0:(o=t,o.hasClass(n)||(o=o.find("."+n)),o.css({width:"100%",height:"100%"}),n="rsImg")),t.hasClass(n)||(t=t.find("."+n));var u=e.iW,n=e.iH;e.isRendered=!0;if(s!=="none"||i){bMargin=s!=="fill"?this._w3:0,e=this._u3-bMargin*2,o=this._v3-bMargin*2;var a,f,l={};s==="fit-if-smaller"&&(u>e||n>o)&&(s="fit");if(s==="fill"||s==="fit")a=e/u,f=o/n,a=s=="fill"?a>f?a:f:s=="fit"?a<f?a:f:1,u=Math.ceil(u*a,10),n=Math.ceil(n*a,10);s!=="none"&&(l.width=u,l.height=n,r&&t.find(".rsImg").css({width:"100%",height:"100%"})),i&&(l.marginLeft=Math.floor((e-u)/2)+bMargin,l.marginTop=Math.floor((o-n)/2)+bMargin),t.css(l)}}}},e.rsProto=t.prototype,e.fn.royalSlider=function(n){var r=arguments;return this.each(function(){var i=e(this);if(typeof n=="object"||!n)i.data("royalSlider")||i.data("royalSlider",new t(i,n));else if((i=i.data("royalSlider"))&&i[n])return i[n].apply(i,Array.prototype.slice.call(r,1))})},e.fn.royalSlider.defaults={slidesSpacing:8,startSlideId:0,loop:!1,loopRewind:!1,numImagesToPreload:4,fadeinLoadedSlide:!0,slidesOrientation:"horizontal",transitionType:"move",transitionSpeed:600,controlNavigation:"bullets",controlsInside:!0,arrowsNav:!0,arrowsNavAutoHide:!0,navigateByClick:!0,randomizeSlides:!1,sliderDrag:!0,sliderTouch:!0,keyboardNavEnabled:!1,fadeInAfterLoaded:!0,allowCSS3:!0,allowCSS3OnWebkit:!0,addActiveClass:!1,autoHeight:!1,easeOut:"easeOutSine",easeInOut:"easeInOutSine",minSlideOffset:10,imageScaleMode:"fit-if-smaller",imageAlignCenter:!0,imageScalePadding:4,autoScaleSlider:!1,autoScaleSliderWidth:800,autoScaleSliderHeight:400,autoScaleHeight:!0,arrowsNavHideOnTouch:!1,globalCaption:!1,beforeSlideChange:null,afterSlideChange:null,beforeResize:null,afterResize:null},e.rsCSS3Easing={easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)"},e.extend(jQuery.easing,{easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n}})}(jQuery),function(e){e.rsProto._j4=function(){var e,t=this;if(t.st.addActiveClass){t.ev.on("rsBeforeMove",function(){n()}),t.ev.on("rsAfterInit",function(){n()});var n=function(){e&&clearTimeout(e),e=setTimeout(function(){t._a4&&t._a4.removeClass("rsActiveSlide"),t._d1&&t._d1.addClass("rsActiveSlide"),e=null},50)}}},e.rsModules.activeClass=e.rsProto._j4}(jQuery),function(e){e.extend(e.rsProto,{_k4:function(){function t(){var e=n.currSlide;if(n.currSlide&&n.currSlide.isLoaded&&n._o4!==e){if(0<n._n4.length){for(r=0;r<n._n4.length;r++)clearTimeout(n._n4[r]);n._n4=[]}if(0<n._m4.length){var t;for(r=0;r<n._m4.length;r++)if(t=n._m4[r])n._c?(t.block.css(n._e+n._o1,"0s"),t.block.css(t.css)):t.running?t.block.stop(!0,!0):t.block.css(t.css),n._o4=null,e.animBlocksDisplayed=!1;n._m4=[]}e.animBlocks&&(e.animBlocksDisplayed=!0,n._o4=e,n._p4(e.animBlocks))}}var n=this,r;n._l4={fadeEffect:!0,moveEffect:"top",moveOffset:20,speed:400,easing:"easeOutSine",delay:200},n.st.block=e.extend({},n._l4,n.st.block),n._m4=[],n._n4=[],n.ev.on("rsAfterInit",function(){t()}),n.ev.on("rsBeforeParseNode",function(t,n,r){n=e(n),r.animBlocks=n.find(".rsABlock").css("display","none"),r.animBlocks.length||(r.animBlocks=n.hasClass("rsABlock")?n.css("display","none"):!1)}),n.ev.on("rsAfterContentSet",function(e,r){r.id===n.currSlideId&&setTimeout(function(){t()},n.st.fadeinLoadedSlide?300:0)}),n.ev.on("rsAfterSlideChange",function(){t()})},_q4:function(e,t){setTimeout(function(){e.css(t)},6)},_p4:function(t){var n=this,r,i,s,o;n._n4=[],t.each(function(t){r=e(this),i={},s={},o=null;var u=r.data("move-offset");isNaN(u)&&(u=n.st.block.moveOffset);if(0<u){var c=r.data("move-effect");c?(c=c.toLowerCase(),"none"===c?c=!1:"left"!==c&&"top"!==c&&"bottom"!==c&&"right"!==c&&(c=n.st.block.moveEffect,"none"===c&&(c=!1))):c=n.st.block.moveEffect;if(c){var h;h="right"===c||"left"===c?!0:!1;var p,v;isOppositeProp=!1,n._c?(p=0,v=n._r1):(h?isNaN(parseInt(r.css("right"),10))?v="left":(v="right",isOppositeProp=!0):isNaN(parseInt(r.css("bottom"),10))?v="top":(v="bottom",isOppositeProp=!0),v="margin-"+v,isOppositeProp&&(u=-u),p=parseInt(r.css(v),10)),s[v]=n._h4("top"===c||"left"===c?p-u:p+u,h),i[v]=n._h4(p,h)}}if(u=r.attr("data-fade-effect")){if("none"===u.toLowerCase()||"false"===u.toLowerCase())u=!1}else u=n.st.block.fadeEffect;u&&(s.opacity=0,i.opacity=1);if(u||c)if(o={},o.hasFade=Boolean(u),Boolean(c)&&(o.moveProp=v,o.hasMove=!0),o.speed=r.data("speed"),isNaN(o.speed)&&(o.speed=n.st.block.speed),o.easing=r.data("easing"),o.easing||(o.easing=n.st.block.easing),o.css3Easing=e.rsCSS3Easing[o.easing],o.delay=r.data("delay"),isNaN(o.delay))o.delay=n.st.block.delay*t;c={},n._c&&(c[n._e+n._o1]="0ms"),c.moveProp=i.moveProp,c.opacity=i.opacity,c.display="none",n._m4.push({block:r,css:c}),n._q4(r,s),n._n4.push(setTimeout(function(e,t,r,i){return function(){e.css("display","block");if(r){var s={};if(n._c){var o="";r.hasMove&&(o+=r.moveProp),r.hasFade&&(r.hasMove&&(o+=", "),o+="opacity"),s[n._e+n._n1]=o,s[n._e+n._o1]=r.speed+"ms",s[n._e+n._p1]=r.css3Easing,e.css(s),setTimeout(function(){e.css(t)},24)}else setTimeout(function(){e.animate(t,r.speed,r.easing)},16)}delete n._n4[i]}}(r,i,o,t),6>=o.delay?12:o.delay))})}}),e.rsModules.animatedBlocks=e.rsProto._k4}(jQuery),function(e){e.extend(e.rsProto,{_r4:function(){var e=this;if(e.st.autoHeight){var t,n;e.slider.addClass("rsAutoHeight"),e.ev.on("rsAfterInit",function(){setTimeout(function(){r(!1),setTimeout(function(){e.slider.append('<div id="clear" style="clear:both;"></div>'),e._c&&e._a1.css(e._e+"transition","height "+e.st.transitionSpeed+"ms ease-in-out")},16)},16)}),e.ev.on("rsBeforeAnimStart",function(){r(!0)}),e.ev.on("rsBeforeSizeSet",function(){setTimeout(function(){r(!1)},16)});var r=function(i){var s=e.slides[e.currSlideId];t=s.holder,s.isLoaded?t&&(n=t.height(),0!==n&&void 0!==n&&(e._v3=n,e._c||!i?e._a1.css("height",n):e._a1.stop(!0,!0).animate({height:n},e.st.transitionSpeed))):e.ev.off("rsAfterContentSet.rsAutoHeight").on("rsAfterContentSet.rsAutoHeight",function(e,t){s===t&&r()})}}}}),e.rsModules.autoHeight=e.rsProto._r4}(jQuery),function(e){e.extend(e.rsProto,{_u4:function(){var t=this,n;t._v4={enabled:!1,stopAtAction:!0,pauseOnHover:!0,delay:2e3},t.st.autoPlay=e.extend({},t._v4,t.st.autoPlay),t.st.autoPlay.enabled&&(t.ev.on("rsBeforeParseNode",function(t,r,i){r=e(r);if(n=r.attr("data-rsDelay"))i.customDelay=parseInt(n,10)}),t.ev.one("rsAfterInit",function(){t._w4()}),t.ev.on("rsBeforeDestroy",function(){t.stopAutoPlay()}))},_w4:function(){var e=this;e.startAutoPlay(),e.ev.on("rsAfterContentSet",function(t,n){!e._g2&&!e._h2&&e._x4&&n===e.currSlide&&e._y4()}),e.ev.on("rsDragRelease",function(){e._x4&&e._z4&&(e._z4=!1,e._y4())}),e.ev.on("rsAfterSlideChange",function(){e._x4&&e._z4&&(e._z4=!1,e.currSlide.isLoaded&&e._y4())}),e.ev.on("rsDragStart",function(){e._x4&&(e.st.autoPlay.stopAtAction?e.stopAutoPlay():(e._z4=!0,e._a5()))}),e.ev.on("rsBeforeMove",function(t,n,r){e._x4&&(r&&e.st.autoPlay.stopAtAction?e.stopAutoPlay():(e._z4=!0,e._a5()))}),e._b5=!1,e.ev.on("rsVideoStop",function(){e._x4&&(e._b5=!1,e._y4())}),e.ev.on("rsVideoPlay",function(){e._x4&&(e._z4=!1,e._a5(),e._b5=!0)}),e.st.autoPlay.pauseOnHover&&(e._c5=!1,e.slider.hover(function(){e._x4&&(e._z4=!1,e._a5(),e._c5=!0)},function(){e._x4&&(e._c5=!1,e._y4())}))},toggleAutoplay:function(){this._x4?this.startAutoPlay():this.stopAutoPlay()},startAutoPlay:function(){this._x4=!0,this.currSlide.isLoaded&&this._y4()},stopAutoPlay:function(){this._b5=this._c5=this._z4=this._x4=!1,this._a5()},_y4:function(){var e=this;!e._c5&&!e._b5&&(e._d5=!0,e._e5&&clearTimeout(e._e5),e._e5=setTimeout(function(){var t;!e._v&&!e.st.loopRewind&&(t=!0,e.st.loopRewind=!0),e.next(!0),t&&(e.st.loopRewind=!1)},e.currSlide.customDelay?e.currSlide.customDelay:e.st.autoPlay.delay))},_a5:function(){!this._c5&&!this._b5&&(this._d5=!1,this._e5&&(clearTimeout(this._e5),this._e5=null))}}),e.rsModules.autoplay=e.rsProto._u4}(jQuery),function(e){e.extend(e.rsProto,{_f5:function(){var t=this;"bullets"===t.st.controlNavigation&&(t.ev.one("rsAfterPropsSetup",function(){t._g5=!0,t.slider.addClass("rsWithBullets");for(var n='<div class="rsNav rsBullets">',r=0;r<t.numSlides;r++)n+='<div class="rsNavItem rsBullet"><span class=""></span></div>';n=e(n+"</div>"),t._t4=n,t._h5=n.children(),t.slider.append(n),t._t4.click(function(n){n=e(n.target).closest(".rsNavItem"),n.length&&t.goTo(n.index())})}),t.ev.on("rsOnAppendSlide",function(e,n,r){r>=t.numSlides?t._t4.append('<div class="rsNavItem rsBullet"><span class=""></span></div>'):t._h5.eq(r).before('<div class="rsNavItem rsBullet"><span class=""></span></div>'),t._h5=t._t4.children()}),t.ev.on("rsOnRemoveSlide",function(e,n){var r=t._h5.eq(n);r&&(r.remove(),t._h5=t._t4.children())}),t.ev.on("rsOnUpdateNav",function(){var n=t.currSlideId;t._i5&&t._i5.removeClass("rsNavSelected"),n=e(t._h5[n]),n.addClass("rsNavSelected"),t._i5=n}))}}),e.rsModules.bullets=e.rsProto._f5}(jQuery),function(e){e.extend(e.rsProto,{_j5:function(){var t=this,n,r;t._k5={enabled:!1,change:!1,prefix:""},t.st.deeplinking=e.extend({},t._k5,t.st.deeplinking);if(t.st.deeplinking.enabled){var i=t.st.deeplinking.change,s="#"+t.st.deeplinking.prefix,o=function(){var e=window.location.hash;return e&&(e=parseInt(e.substring(s.length),10),0<=e)?e-1:-1},u=o();-1!==u&&(t.st.startSlideId=u),i&&e(window).on("hashchange.rs",function(){if(!n){var e=o();e<0?e=0:e>t.numSlides-1&&(e=t.numSlides-1),t.goTo(e)}}),t.ev.on("rsAfterSlideChange",function(){r&&clearTimeout(r),n=!0,window.location.hash=s+(t.currSlideId+1),r=setTimeout(function(){n=!1,r=0},60)})}}}),e.rsModules.deeplinking=e.rsProto._j5}(jQuery),function(e,t,n){function r(e){return e=e||location.href,"#"+e.replace(/^[^#]*#?(.*)$/,"$1")}"$:nomunge";var i=document,s,o=e.event.special,u=i.documentMode,a="onhashchange"in t&&(u===n||7<u);e.fn.hashchange=function(e){return e?this.bind("hashchange",e):this.trigger("hashchange")},e.fn.hashchange.delay=50,o.hashchange=e.extend(o.hashchange,{setup:function(){if(a)return!1;e(s.start)},teardown:function(){if(a)return!1;e(s.stop)}});var f=function(){var n=r(),i=p(c);n!==c?(h(c=n,i),e(t).trigger("hashchange")):i!==c&&(location.href=location.href.replace(/#.*/,"")+i),l=setTimeout(f,e.fn.hashchange.delay)},o={},l,c=r(),h=u=function(e){return e},p=u;o.start=function(){l||f()},o.stop=function(){l&&clearTimeout(l),l=n};if(e.browser.msie&&!a){var d,v;o.start=function(){d||(v=(v=e.fn.hashchange.src)&&v+r(),d=e('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){v||h(r()),f()}).attr("src",v||"javascript:0").insertAfter("body")[0].contentWindow,i.onpropertychange=function(){try{"title"===event.propertyName&&(d.document.title=i.title)}catch(e){}})},o.stop=u,p=function(){return r(d.location.href)},h=function(t,n){var r=d.document,s=e.fn.hashchange.domain;t!==n&&(r.title=i.title,r.open(),s&&r.write('<script>document.domain="'+s+'"</script>'),r.close(),d.location.hash=t)}}s=o}(jQuery,this),function(e){e.extend(e.rsProto,{_l5:function(){var t=this;t._m5={enabled:!1,keyboardNav:!0,buttonFS:!0,nativeFS:!1,doubleTap:!0},t.st.fullscreen=e.extend({},t._m5,t.st.fullscreen),t.st.fullscreen.enabled&&t.ev.one("rsBeforeSizeSet",function(){t._n5()})},_n5:function(){var t=this;t._o5=!t.st.keyboardNavEnabled&&t.st.fullscreen.keyboardNav;if(t.st.fullscreen.nativeFS){t._p5={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""};var n=["webkit","moz","o","ms","khtml"];if("undefined"!=typeof document.cancelFullScreen)t._p5.supportsFullScreen=!0;else for(var r=0;r<n.length;r++)if(t._p5.prefix=n[r],"undefined"!=typeof document[t._p5.prefix+"CancelFullScreen"]){t._p5.supportsFullScreen=!0;break}t._p5.supportsFullScreen?(t._p5.fullScreenEventName=t._p5.prefix+"fullscreenchange.rs",t._p5.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},t._p5.requestFullScreen=function(e){return""===this.prefix?e.requestFullScreen():e[this.prefix+"RequestFullScreen"]()},t._p5.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}):t._p5=!1}t.st.fullscreen.buttonFS&&(t._q5=e('<div class="rsFullscreenBtn"><div class="rsFullscreenIcn"></div></div>').appendTo(t.st.controlsInside?t._a1:t.slider).on("click.rs",function(){t.isFullscreen?t.exitFullscreen():t.enterFullscreen()}))},enterFullscreen:function(t){var n=this;if(n._p5){if(!t){n._a.on(n._p5.fullScreenEventName,function(){n._p5.isFullScreen()?n.enterFullscreen(!0):n.exitFullscreen(!0)}),n._p5.requestFullScreen(e("html")[0]);return}n._p5.requestFullScreen(e("html")[0])}if(!n._r5){n._r5=!0,n._a.on("keyup.rsfullscreen",function(e){27===e.keyCode&&n.exitFullscreen()}),n._o5&&n._v1(),n._s5=e("html").attr("style"),n._t5=e("body").attr("style"),n._u5=n.slider.attr("style"),e("body, html").css({overflow:"hidden",height:"100%",width:"100%",margin:"0",padding:"0"}),n.slider.addClass("rsFullscreen");var r;for(r=0;r<n.numSlides;r++)if(t=n.slides[r],t.isRendered=!1,t.bigImage){t.isMedLoaded=t.isLoaded,t.isMedLoading=t.isLoading,t.medImage=t.image,t.medIW=t.iW,t.medIH=t.iH,t.slideId=-99,t.bigImage!==t.medImage&&(t.sizeType="big"),t.isLoaded=t.isBigLoaded,t.isLoading=t.isBigLoading,t.image=t.bigImage,t.iW=t.bigIW,t.iH=t.bigIH,t.contentAdded=!1;var i=t.isLoaded?'<img class="rsImg" src="'+t.image+'"/>':'<a class="rsImg" href="'+t.image+'"></a>';t.content.hasClass("rsImg")?t.content=e(i):t.content.find(".rsImg").replaceWith(i)}n.isFullscreen=!0,setTimeout(function(){n._r5=!1,n.updateSliderSize()},100)}},exitFullscreen:function(t){var n=this;if(n._p5){if(!t){n._p5.cancelFullScreen(e("html")[0]);return}n._a.off(n._p5.fullScreenEventName)}if(!n._r5){n._r5=!0,n._a.off("keyup.rsfullscreen"),n._o5&&n._a.off("keydown.rskb"),e("html").attr("style",n._s5||""),e("body").attr("style",n._t5||""),n.slider.removeClass("rsFullscreen");var r;for(r=0;r<n.numSlides;r++)if(t=n.slides[r],t.isRendered=!1,t.bigImage){t.slideId=-99,t.isBigLoaded=t.isLoaded,t.isBigLoading=t.isLoading,t.bigImage=t.image,t.bigIW=t.iW,t.bigIH=t.iH,t.isLoaded=t.isMedLoaded,t.isLoading=t.isMedLoading,t.image=t.medImage,t.iW=t.medIW,t.iH=t.medIH,t.contentAdded=!1;var i=t.isLoaded?'<img class="rsImg" src="'+t.image+'"/>':'<a class="rsImg" href="'+t.image+'"></a>';t.content.hasClass("rsImg")?t.content=e(i):t.content.find(".rsImg").replaceWith(i),t.holder&&t.holder.html(t.content),t.bigImage!==t.medImage&&(t.sizeType="med")}n.isFullscreen=!1,setTimeout(function(){n._r5=!1,n.updateSliderSize()},100)}}}),e.rsModules.fullscreen=e.rsProto._l5}(jQuery),function(e){e.extend(e.rsProto,{_v5:function(){var t=this;t.st.globalCaption&&(t.ev.on("rsAfterInit",function(){t.globalCaption=e('<div class="rsGCaption"></div>').appendTo(t.slider),t.globalCaption.html(t.currSlide.caption)}),t.ev.on("rsBeforeAnimStart",function(){t.globalCaption.html(t.currSlide.caption)}))}}),e.rsModules.globalCaption=e.rsProto._v5}(jQuery),function(e){e.extend(e.rsProto,{_s4:function(){var e=this;e.st.navAutoHide&&!e.hasTouch&&e.ev.one("rsAfterInit",function(){if(e._t4){e._t4.addClass("rsHidden");var t=e.slider;t.one("mousemove.controlnav",function(){e._t4.removeClass("rsHidden")}),t.hover(function(){e._t4.removeClass("rsHidden")},function(){e._t4.addClass("rsHidden")})}})}}),e.rsModules.autoHideNav=e.rsProto._s4}(jQuery),function(e){e.extend(e.rsProto,{_w5:function(){var t=this;"tabs"===t.st.controlNavigation&&(t.ev.on("rsBeforeParseNode",function(t,n,r){n=e(n),r.thumbnail=n.find(".rsTmb").remove(),r.thumbnail.length?r.thumbnail=e(document.createElement("div")).append(r.thumbnail).html():(r.thumbnail=n.attr("data-rsTmb"),r.thumbnail||(r.thumbnail=n.find(".rsImg").attr("data-rsTmb")),r.thumbnail=r.thumbnail?'<img src="'+r.thumbnail+'"/>':"")}),t.ev.one("rsAfterPropsSetup",function(){t._x5()}),t.ev.on("rsOnAppendSlide",function(e,n,r){r>=t.numSlides?t._t4.append('<div class="rsNavItem rsTab">'+n.thumbnail+"</div>"):t._h5.eq(r).before('<div class="rsNavItem rsTab">'+item.thumbnail+"</div>"),t._h5=t._t4.children()}),t.ev.on("rsOnRemoveSlide",function(e,n){var r=t._h5.eq(n);r&&(r.remove(),t._h5=t._t4.children())}),t.ev.on("rsOnUpdateNav",function(){var n=t.currSlideId;t._i5&&t._i5.removeClass("rsNavSelected"),n=e(t._h5[n]),n.addClass("rsNavSelected"),t._i5=n}))},_x5:function(){var t=this,n,r;t._g5=!0,n='<div class="rsNav rsTabs">';for(var i=0;i<t.numSlides;i++)i===t.numSlides-1&&(style=""),r=t.slides[i],n+='<div class="rsNavItem rsTab">'+r.thumbnail+"</div>";n=e(n+"</div>"),t._t4=n,t._h5=n.find(".rsNavItem"),t.slider.append(n),t._t4.click(function(n){n=e(n.target).closest(".rsNavItem"),n.length&&t.goTo(n.index())})}}),e.rsModules.tabs=e.rsProto._w5}(jQuery),function(e){e.extend(e.rsProto,{_y5:function(){var t=this;"thumbnails"===t.st.controlNavigation&&(t._z5={drag:!0,touch:!0,orientation:"horizontal",navigation:!0,arrows:!0,arrowLeft:null,arrowRight:null,spacing:4,arrowsAutoHide:!1,appendSpan:!1,transitionSpeed:600,autoCenter:!0,fitInViewport:!0,firstMargin:!0},t.st.thumbs=e.extend({},t._z5,t.st.thumbs),t.ev.on("rsBeforeParseNode",function(t,n,r){n=e(n),r.thumbnail=n.find(".rsTmb").remove(),r.thumbnail.length?r.thumbnail=e(document.createElement("div")).append(r.thumbnail).html():(r.thumbnail=n.attr("data-rsTmb"),r.thumbnail||(r.thumbnail=n.find(".rsImg").attr("data-rsTmb")),r.thumbnail=r.thumbnail?'<img src="'+r.thumbnail+'"/>':"")}),t.ev.one("rsAfterPropsSetup",function(){t._a6()}),t.ev.on("rsOnUpdateNav",function(){var n=t.currSlideId,r;t._i5&&t._i5.removeClass("rsNavSelected"),r=e(t._h5[n]),r.addClass("rsNavSelected"),t._b6&&t._c6(n),t._i5=r}),t.ev.on("rsOnAppendSlide",function(e,n,r){e="<div"+t._d6+' class="rsNavItem rsThumb">'+t._e6+n.thumbnail+"</div>",r>=t.numSlides?t._l3.append(e):t._h5.eq(r).before(e),t._h5=t._l3.children(),t.updateThumbsSize()}),t.ev.on("rsOnRemoveSlide",function(e,n){var r=t._h5.eq(n);r&&(r.remove(),t._h5=t._l3.children(),t.updateThumbsSize())}))},_a6:function(){var t=this,n="rsThumbs",r="",i,s,o=t.st.thumbs.spacing;t._g5=!0,0<o?(i=o+"px ",i=' style="margin: 0 '+i+i+'0;"'):i="",t._d6=i,t._x2="vertical"===t.st.thumbs.orientation?!1:!0,t._b3=0,t._f6=!1,t._g6=!1,t._b6=!1,t._h6=t.st.thumbs.arrows&&t.st.thumbs.navigation,s=t._x2?"Hor":"Ver",t.slider.addClass("rsWithThumbs rsWithThumbs"+s),r+='<div class="rsNav rsThumbs rsThumbs'+s+'"><div class="'+n+'Container">',t._e6=t.st.thumbs.appendSpan?'<span class="thumbIco"></span>':"";for(var u=0;u<t.numSlides;u++)s=t.slides[u],r+="<div"+i+' class="rsNavItem rsThumb">'+t._e6+s.thumbnail+"</div>";r=e(r+"</div></div>"),t._l3=e(r).find("."+n+"Container"),t._h6&&(n+="Arrow",t.st.thumbs.arrowLeft?t._i6=t.st.thumbs.arrowLeft:(t._i6=e('<div class="'+n+" "+n+'Left"><div class="'+n+'Icn"></div></div>'),r.append(t._i6)),t.st.thumbs.arrowRight?t._j6=t.st.thumbs.arrowRight:(t._j6=e('<div class="'+n+" "+n+'Right"><div class="'+n+'Icn"></div></div>'),r.append(t._j6)),t._i6.click(function(){var e=(Math.floor(t._b3/t._k6)+t._l6)*t._k6;t._t3(e>t._g3?t._g3:e)}),t._j6.click(function(){var e=(Math.floor(t._b3/t._k6)-t._l6)*t._k6;t._t3(e<t._h3?t._h3:e)}),t.st.thumbs.arrowsAutoHide&&!t.hasTouch)&&(t._i6.css("opacity",0),t._j6.css("opacity",0),r.one("mousemove.rsarrowshover",function(){t._b6&&(t._i6.css("opacity",1),t._j6.css("opacity",1))}),r.hover(function(){t._b6&&(t._i6.css("opacity",1),t._j6.css("opacity",1))},function(){t._b6&&(t._i6.css("opacity",0),t._j6.css("opacity",0))})),t._t4=r,t._h5=t._l3.children(),t.slider.append(r),t._p3=!0,t._m6=o,t.st.thumbs.navigation&&t._c&&t._l3.css(t._e+"transition-property",t._e+"transform"),t._t4.click(function(n){t._g6||(n=e(n.target).closest(".rsNavItem"),n.length&&t.goTo(n.index()))}),t.ev.off("rsBeforeSizeSet.thumbs").on("rsBeforeSizeSet.thumbs",function(){t._n6=t._x2?t._v3:t._u3,t.updateThumbsSize()})},updateThumbsSize:function(){var e=this,t=e._h5.first(),n={},r=e._h5.length;e._k6=(e._x2?t.outerWidth():t.outerHeight())+e._m6,e._r3=r*e._k6-e._m6,n[e._x2?"width":"height"]=e._r3+e._m6,e._s3=e._x2?e._t4.width():e._t4.height(),e._h3=-(e._r3-e._s3)-(e.st.thumbs.firstMargin?e._m6:0),e._g3=e.st.thumbs.firstMargin?e._m6:0,e._l6=Math.floor(e._s3/e._k6),e._r3<e._s3?(e.st.thumbs.autoCenter&&e._j3((e._s3-e._r3)/2),e.st.thumbs.arrows&&e._i6&&(e._i6.addClass("rsThumbsArrowDisabled"),e._j6.addClass("rsThumbsArrowDisabled")),e._b6=!1,e._g6=!1,e._t4.off(e._f1)):e.st.thumbs.navigation&&!e._b6&&(e._b6=!0,!e.hasTouch&&e.st.thumbs.drag||e.hasTouch&&e.st.thumbs.touch)&&(e._g6=!0,e._t4.on(e._f1,function(t){e._b2(t,!0)})),e._l3.css(n),e._p3&&(e.isFullscreen||e.st.thumbs.fitInViewport)&&(e._x2?e._v3=e._n6-e._t4.outerHeight():e._u3=e._n6-e._t4.outerWidth())},setThumbsOrientation:function(e,t){this._p3&&(this.st.thumbs.orientation=e,this._t4.remove(),this.slider.removeClass("rsWithThumbsHor rsWithThumbsVer"),this._a6(),this._t4.off(this._f1),t||this.updateSliderSize(!0))},_j3:function(e){this._b3=e,this._c?this._l3.css(this._r1,this._s1+(this._x2?e+this._t1+0:0+this._t1+e)+this._u1):this._l3.css(this._x2?this._r1:this._q1,e)},_t3:function(t,n,r,i,s){var o=this;if(o._b6){n||(n=o.st.thumbs.transitionSpeed),o._b3=t,o._o6&&clearTimeout(o._o6),o._f6&&(o._c||o._l3.stop(),r=!0);var u={};o._f6=!0,o._c?(u[o._e+"transition-duration"]=n+"ms",u[o._e+"transition-timing-function"]=r?e.rsCSS3Easing[o.st.easeOut]:e.rsCSS3Easing[o.st.easeInOut],o._l3.css(u),o._j3(t)):(u[o._x2?o._r1:o._q1]=t+"px",o._l3.animate(u,n,r?"easeOutCubic":o.st.easeInOut)),i&&(o._b3=i),o._p6(),o._o6=setTimeout(function(){o._f6=!1,s&&(o._t3(i,s,!0),s=null)},n)}},_p6:function(){this._h6&&(this._b3===this._g3?this._i6.addClass("rsThumbsArrowDisabled"):this._i6.removeClass("rsThumbsArrowDisabled"),this._b3===this._h3?this._j6.addClass("rsThumbsArrowDisabled"):this._j6.removeClass("rsThumbsArrowDisabled"))},_c6:function(e,t){var n=0,r,i=e*this._k6+2*this._k6-this._m6+this._g3,s=Math.floor(this._b3/this._k6);this._b6&&(i+this._b3>this._s3?(e===this.numSlides-1&&(n=1),s=-e+this._l6-2+n,r=s*this._k6+this._s3%this._k6+this._m6-this._g3):0!==e?(e-1)*this._k6<=-this._b3+this._g3&&e-1<=this.numSlides-this._l6&&(r=(-e+1)*this._k6+this._g3):r=this._g3,r!==this._b3&&(n=void 0===r?this._b3:r,n>this._g3?this._j3(this._g3):n<this._h3?this._j3(this._h3):void 0!==r&&(t?this._j3(r):this._t3(r))),this._p6())}}),e.rsModules.thumbnails=e.rsProto._y5}(jQuery),function(e){e.extend(e.rsProto,{_q6:function(){var t=this;t._r6={autoHideArrows:!0,autoHideControlNav:!1,autoHideBlocks:!1,youTubeCode:'<iframe src="http://www.youtube.com/embed/%id%?rel=1&autoplay=1&showinfo=0&autoplay=1" frameborder="no"></iframe>',vimeoCode:'<iframe src="http://player.vimeo.com/video/%id%?byline=0&amp;portrait=0&amp;autoplay=1" frameborder="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},t.st.video=e.extend({},t._r6,t.st.video),t.ev.on("rsBeforeSizeSet",function(){t._d4&&setTimeout(function(){var e=t._d1,e=e.hasClass("rsVideoContainer")?e:e.find(".rsVideoContainer");t._s6.css({width:e.width(),height:e.height()})},32)});var n=e.browser.mozilla;t.ev.on("rsAfterParseNode",function(r,i,s){r=e(i);if(s.videoURL){n&&(t._c=t._d=!1);var i=e('<div class="rsVideoContainer"></div>'),o=e('<div class="rsBtnCenterer"><div class="rsPlayBtn"><div class="rsPlayBtnIcon"></div></div></div>');r.hasClass("rsImg")?s.content=i.append(r).append(o):s.content.find(".rsImg").wrap(i).after(o)}})},toggleVideo:function(){return this._d4?this.stopVideo():this.playVideo()},playVideo:function(){var t=this;if(!t._d4){var n=t.currSlide;if(!n.videoURL)return!1;var r=t._t6=n.content,n=n.videoURL,i,s;return n.match(/youtu\.be/i)||n.match(/youtube\.com\/watch/i)?(s=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,(s=n.match(s))&&11==s[7].length&&(i=s[7]),void 0!==i&&(t._s6=t.st.video.youTubeCode.replace("%id%",i))):n.match(/vimeo\.com/i)&&(s=/\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,(s=n.match(s))&&(i=s[2]),void 0!==i&&(t._s6=t.st.video.vimeoCode.replace("%id%",i))),t.videoObj=e(t._s6),t.ev.trigger("rsOnCreateVideoElement",[n]),t.videoObj.length&&(t._s6=e('<div class="rsVideoFrameHolder"><div class="rsPreloader"></div><div class="rsCloseVideoBtn"><div class="rsCloseVideoIcn"></div></div></div>'),t._s6.find(".rsPreloader").after(t.videoObj),r=r.hasClass("rsVideoContainer")?r:r.find(".rsVideoContainer"),t._s6.css({width:r.width(),height:r.height()}).find(".rsCloseVideoBtn").off("click.rsv").on("click.rsv",function(e){return t.stopVideo(),e.preventDefault(),e.stopPropagation(),!1}),r.append(t._s6),t.isIPAD&&r.addClass("rsIOSVideo"),t._w1&&t.st.video.autoHideArrows&&(t._w1.addClass("rsHidden"),t._x1.addClass("rsHidden"),t._y1=!0),t._t4&&t.st.video.autoHideControlNav&&t._t4.addClass("rsHidden"),t.st.video.autoHideBlocks&&t.currSlide.animBlocks&&t.currSlide.animBlocks.addClass("rsHidden"),setTimeout(function(){t._s6.addClass("rsVideoActive")},10),t.ev.trigger("rsVideoPlay"),t._d4=!0),!0}return!1},stopVideo:function(){var e=this;return e._d4?(e.isIPAD&&e.slider.find(".rsCloseVideoBtn").remove(),e._w1&&e.st.video.autoHideArrows&&(e._w1.removeClass("rsHidden"),e._x1.removeClass("rsHidden"),e._y1=!1),e._t4&&e.st.video.autoHideControlNav&&e._t4.removeClass("rsHidden"),e.st.video.autoHideBlocks&&e.currSlide.animBlocks&&e.currSlide.animBlocks.removeClass("rsHidden"),setTimeout(function(){e._s6.remove()},16),e.ev.trigger("rsVideoStop"),e._d4=!1,!0):!1}}),e.rsModules.video=e.rsProto._q6}(jQuery),!function(e){e(CT.Routes,CT.Pers,CT.Store,CT.cache.views.searchForm,CT.cache.views.searchTab,CT.cache.views.searchRecent,CT.smartHomePage,CT.Offers,CT.widgets.validator,CT.settings.validators)}(function(e,t,n,r,i,s,o,u,a,f){function c(e){typeof mouseflow!="undefined"&&(window.mouseflowPath=e,mouseflow.newPageView())}function h(e){var t=this;if(window.enableRecentSearch&&!($.browser.msie&&parseInt($.browser.version,10)<=8)){var n=t.get("recent");n&&window.enableRecentSearchFlightsPageOnly&&window.location.href.indexOf("/flights")>-1||!window.enableRecentSearchFlightsPageOnly?s.render(n):s.hideRecent()}}function p(){o.render()}function d(e){var n=new t;h.call(n)}function v(e){var t=!("pushState"in window.history)&&window.location.href.indexOf("/flights")===-1;return(t?"/flights":"")+(e.intl==="y"?"/international":"")+"/results?"}function m(e){return"/flights"+(e.intl==="y"?"/international":"")+"/results?"}function g(){var e=$("#Home").find("aside").first().outerHeight(),t=$("#Home").find("aside").last().outerHeight(),n=$(window).outerHeight(),r=$(".localFrame").outerHeight();appBannerHeight=$("#homeUpsellBanner").outerHeight(),appBannerHeight=appBannerHeight?appBannerHeight:"0",r=r?r:"0";var i=Math.max(e,t,n-100-appBannerHeight),s=n-($("#GlobalNav").outerHeight()+$("footer").outerHeight()+parseInt(appBannerHeight));s=s>910?s:910,$(".spacesView").css("min-height",s+"px"),CT.cache.homeTitle=document.title,CT.cache.els={$homeSection:$("#Home"),$homeCenter:$("#Home .viewController"),$resultSection:$("#Result")},$("#moreProductsLink").bind("click",function(e){$(".moreProducts").toggle()}),CT.widgets.validator.delegate({errContainer:"fieldset"}),$(document).delegate("#modifySearchLink","click",function(e){var t=$(this),n=t.find("i");n.hasClass("rArrow")?($(".spacesView").addClass("modifySearch"),CT.utils.modifySearch.open(n,t)):($(".spacesView").removeClass("modifySearch"),CT.utils.modifySearch.close(n,t))})}function y(e){$("#space_travel").is(":checked")?$("#localFooter").css("display","none"):$("#space_local").is(":checked")&&$("#localFooter").css("display","block"),$("#space_travel").on("change",function(e){this.checked&&(CT.settings.routes.baseUrl="/flights",window.localsHome.cTapTrackOnSwitch&&window.localsHome.cTapTrackOnSwitch("travel"),window.localsHome.showTravelSpace(),CT.settings.routes.navigate(window.location.protocol+"//"+window.location.hostname,{trigger:!1}),CT.utils.helperFunctions.trackGAEvent("Home","Toggle","Travel")),$("#localFooter").css("display","none")}),$(".localFrame").on("click",function(e){$(".spacesReel").hasClass("isShowingLocal")==0&&(window.localsHome.showLocalSpace(),CT.settings.routes.navigate(window.location.href+"local",{trigger:!1}),e.stopImmediatePropagation())}),$(".travelFrame").on("click",function(e){$(".spacesReel").hasClass("isShowingLocal")&&(window.localsHome.showTravelSpace(),CT.settings.routes.navigate(window.location.protocol+"//"+window.location.hostname,{trigger:!1}),e.stopImmediatePropagation())}),$("#space_local").on("change",function(e){this.checked&&(CT.utils.cookies.read("localCurrentCity")!=null?window.currentCityName=CT.utils.cookies.read("localCurrentCity"):window.currentCityName="mumbai",window.localsHome.cTapTrackOnSwitch&&window.localsHome.cTapTrackOnSwitch("local"),window.localsHome.showLocalSpace(),CT.settings.routes.baseUrl="",CT.settings.routes.navigate("/local",{trigger:!1}),CT.utils.helperFunctions.trackGAEvent("Home","Toggle","Local")),$("#localFooter").css("display","block")}),$(document).on("keydown",function(e){switch(e.which){case 37:e.target.nodeName!="INPUT"&&window.location.pathname=="/local"&&(window.localsHome.showTravelSpace(),CT.settings.routes.navigate(window.location.protocol+"//"+window.location.hostname,{trigger:!1}),CT.utils.helperFunctions.trackGAEvent("Home","LHS","Travel"));break;case 39:e.target.nodeName!="INPUT"&&window.location.pathname=="/"&&(CT.utils.cookies.read("localCurrentCity")!=null?window.currentCityName=CT.utils.cookies.read("localCurrentCity"):window.currentCityName="mumbai",window.localsHome.showLocalSpace(),CT.settings.routes.navigate(window.location.href+"local",{trigger:!1}),CT.utils.helperFunctions.trackGAEvent("Home","RHS","Local"));break;default:return}}),window.location.pathname.indexOf("local")==1&&CT.utils.helperFunctions.trackGAEvent()}function b(e){$(document.body).removeClass("srp multiCity splitScreen").addClass("home"),w(),window.enableLocalTab&&window.localsHome.initv2({attachLink:!0,localsLinkId:"localsNav"}),window.enableLocalWeb&&(window.localsHome.initv2({showLocalCard:!0}),window.localsHome.cTapTrackOnLoad()),!e||e&&!e.isPopped?($(".srpOverlay,#srpOverlayWarning").hide(),e||d(e)):(document.title=CT.cache.homeTitle,CT.utils.modifySearch.close(),CT.utils.modifySearch.closeLabel(),(r||CT.cache.views.searchForm).render(),d()),dataLayer=CT.settings.GATagManager,dataLayer[0]["Date-Search"]=moment().format("DD/MM/YYYY"),dataLayer[0]["Day-Search"]=moment().format("dddd"),dataLayer[0].Product="Air",dataLayer[0].Device="Desktop",document.readyState=="complete"?CT.utils.loadTrackers():$(window).load(CT.utils.loadTrackers),CT.utils.cookies.erase("defaultHotelsPage"),$(".tipsy .close").trigger("click"),homePageOffersJson&&u.init({product:"air",page:"home",url:homePageOffersJson}),(window.enableLocalWeb&&!window.isHomePage||!window.enableLocalWeb)&&p(),dataLayer[0]["From-Location"]="Value",dataLayer[0]["People-No"]="Value",dataLayer[0]["To-Location"]="Value",dataLayer[0]["Travel-Dates"]="Value",dataLayer[0]["Travel-Type"]="Value",dataLayer[0]["Flight-Return-OneWay"]="Value",CT.utils.helperFunctions.includeGATagManager(),CT.utils.helperFunctions.storeUserReferer()}function w(){var e=_.deserialize(window.location.search.substring(1));e.gclid&&CT.utils.cookies.create("utm_source","googlesem",1/48),CT.utils.helperFunctions.spotNonCleartripReferrer(undefined,window.location.href)}function E(e){$.isReady?CT.fire("results",[e]):$(function(){CT.fire("results",[e])}),$("#SearchBtn").removeClass("loading")}function S(e){if(!$("#SearchBtn").hasClass("formIsValid")&&(e.from||e.to)){var t=f.checkForCityAvailability;$.when(t(e.from),t(e.to)).done(function(t,n){if(e.from.length!=3||e.to.length!=3)t[0][0]&&n[0][0]&&(e.from!==t[0][0].k||e.to!==n[0][0].k)&&(e.from=t[0][0].k,e.to=n[0][0].k);else{var r=t[0],i=n[0],s=e.from.toUpperCase(),o=e.to.toUpperCase(),u=!1,a=!1;for(var f=0,l=r.length;f<l;f++)if(r[f]&&s===r[f].k){e.from=r[f].k,u=!0;break}for(var f=0,l=i.length;f<l;f++)if(i[f]&&o===i[f].k){e.to=i[f].k,a=!0;break}u||(e.from=r[0]!==undefined?r[0].k:e.from),a||(e.to=i[0]!==undefined?i[0].k:e.to)}CT.messages[CT.app].nearByairportsMsg.pickedClosestMatch=!1,C.navigate(window.location.href.replace(/from=[^&.]+&/,"from="+e.from+"&").replace(/to=[^&.]+&/,"to="+e.to+"&"),{trigger:!1,replace:!0}),E(e)}).fail(function(){C.navigate(window.location.href.replace(/from=[^&.]+&/,"from="+e.from+"&").replace(/to=[^&.]+&/,"to="+e.to+"&"),{trigger:!1,replace:!0}),E(e)})}else E(e)}function x(){try{var e=_.deserialize(window.location[l?"href":"hash"].split("results?")[1]);!e.from&&!e.from1&&(e=_.deserialize(window.location[l?"href":"hash"].split("?")[1]))}catch(t){console.error(t.message)}return(e.multicity==="true"||e.from1)&&_.times(3,function(t){t+=3,!!e["depart_date_"+t]&&(e["from"+t].length===0||e["to"+t].length===0)&&(e["depart_date_"+t]="")}),e}function T(e){function r(e,t){var n=["from","to","depart_date","return_date"];CT.fire("tab.init",[e,n,t]),S(e,t)}function s(e){$(document.body).removeClass("home").addClass("srp")[(e.depart_date?"remove":"add")+"Class"]("multiCity splitScreen")[(e.return_date?"add":"remove")+"Class"]("splitScreen"),$("#Home").hide(),$("#homeUpsellBanner").hide(),$("#Result").show(),$("#ResultContainer_"+CT.settings.currentTab).hide();var t=i.getCurrentTab(e).tabId||"";if($("#ResultContainer_"+t)[0]){var n=$("#ResultContainer_"+t),s=!1;CT.cache[t].searchTime||(n.unbind().empty(),s=!0);var o=CT.cache[t].searchParams.all,u=!o.isIntl&&o.isRt;$(document.body)[(u?"add":"remove")+"Class"]("splitScreen roundTrip"),n.css("display","block"),$("#RecentTab_"+t.split("_")[0]).siblings().removeClass("current").end().addClass("current"),CT.settings.currentTab=t,CT.utils.modifySearch.close(),CT.utils.modifySearch.openLabel(o),$("#SearchBtn").removeClass("loading"),document.title=CT.cache[t].titles.resultList||CT.cache.homeTitle,s?r(o,s):n.trigger("results_scroll")}else r(e)}var t=e,n;CT.settings.srpRenderTime=(new Date).getTime();var o=window.location.href.indexOf("from1")>-1;$(".modify.searchBox")[o?"hide":"show"]();try{if(!t){if((n=CT.settings.routes.checkUrlForIE()).toReplace){if(n.newUrl.indexOf("?ui=v3&")!=-1){var u=n.newUrl.split("#");u[0].indexOf("ui=v3")==-1&&(u[0]=u[0]+"?ui=v3",u[1]=u[1].replace("ui=v3&",""),n.newUrl=u.join("#"))}window.location.href=n.newUrl;return}t=x(),CT.utils.showActiveCurrMenu(),window.location.href.indexOf("international")>-1&&(t.intl="y")}!t||t&&!t.isPopped?r(CT.settings.routes.cleanURLParams(t)):(t=x(),s(t)),dataLayer=CT.settings.GATagManager,dataLayer[0]["From-Location"]=t.from,dataLayer[0]["To-Location"]=t.to,dataLayer[0]["Travel-Dates"]=t.depart_date+(t.return_date?"|"+t.return_date:""),dataLayer[0]["People-No"]=t.adults+"|"+t.childs+"|"+t.infants,dataLayer[0]["Date-Search"]=moment().format("DD/MM/YYYY"),dataLayer[0]["Day-Search"]=moment().format("dddd"),dataLayer[0].Product="Air",dataLayer[0].Device="Desktop",dataLayer[0]["Travel-Type"]=t["intl"]=="n"?"Domestic":"International",CT.utils.helperFunctions.storeUserReferer(),CT.widgets.placeholder.parseDomTree(this.$el)}catch(a){}}var l=window.history&&"pushState"in window.history;CT.subscribe("results.old",function(e,t){var n=e.url?e.url:_.serialize(e);CT.settings.routes.navigate(v(e)+n,{trigger:!1}),$(".resultContainer").hide(),$("#ResultContainer_"+t).css("display","block").trigger("results_scroll"),document.title=CT.cache[t].titles.resultList}),CT.subscribe("url.update",function(e){var n=CT.settings.routes;CT.utils.helperFunctions.getSEMParams(window.location.search.substring(1),e);var r=n.cleanURLParams($.extend({},e));r=n.cleanURLParams($.extend({},e),["ver","type","trip_type","srpDepartDate","srpReturnDate"]),r=n.cleanURLParams(r,function(){_.each(this,function(e,t,n){/origin|destination/.test(t)&&delete n[t]})});var i=new t,s=(new Date).getTime();if(CT.settings[CT.app].filterApplied){var o=i.get("filter_applied");if(o&&o.length>0){var u=_.filter(o,function(e,t){return e.from===r.from&&e.to===r.to});u.length>0&&s-u[0].timestamp<864e5&&$.extend(r,u[0])}}var a=_.serialize(r),f;if(window.isMarketingPage===!0){var l=window.location;window.location.href="http://"+l.hostname+"/flights"+v(r)+a}else if($.browser.msie&&parseInt($.browser.version,10)<=8){var l=window.location,c="http://"+l.host+l.pathname+v(r)+a;c=n.__fix(n.getPathname(c)),window.location.href==c?window.location.reload():window.location.assign(c)}else if($.browser.msie&&$.browser.version=="9.0"&&window.location.hash==unescape("#"+v(r)+a))window.location.reload();else if(navigator.userAgent.indexOf("iPad")!=-1){var l=window.location;window.location.href="http://"+l.hostname+"/flights"+v(r)+a}else{if(!CT.settings[CT.app].runVmoTesting||!r.intl||r.intl!=="y")return n.navigate(v(r)+a,e);var l=window.location,c="http://"+l.hostname+m(r)+a;window.location.href=c}}),CT.subscribe("url.update.filters",function(e){CT.settings.routes.navigate(v(e)+_.serialize(e),{trigger:!1,replace:!0})}),CT.subscribe("viewFlags.update",function(e){CT.cache[CT.settings.currentTab].flags=$.extend(!0,CT.cache[CT.settings.currentTab].flags,e)}),$.isReady?g():$(g);var N={"":["home",b],"/ar":["home",b],"/?:params":["home",b],"/ar?:params":["home",b],"/local":["home",b],"/results?:params":["search",T],"/international/results?:params":["search",T]};window.isMarketingPage===!0&&(N[window.location.pathname]=["home",b]);var C=CT.settings.routes=(new e((window.CT.langUrlPrefix?window.CT.langUrlPrefix:"")+"/flights")).add(N)});try{if(_cleartrip["air.home"]) _cleartrip["air.home"]()	} catch(e){_cleartrip.alert({ fileName : "air.home" + ".min.js", error : e })};(function(){
	try{
		var _l = function(){
			var baseLink = window.hotelBaseLink || window.airBaseLink || window.staticBaseLink || "";
			CT.getScript(baseLink+(CT.langUrlPrefix||'')+'/javascripts/_' + window.language + '/search/air.results.min' + window.air_results_min_js_ver + '.js', function(){
				if(window.location.href.indexOf('results') !== -1) CT.fire('assets_loaded'); //results page
			})
		}
		/*CT.getScript('/javascripts/search/air.home.min' + window.air_home_min_js_ver + '.js', function(){
			
		})*/
		if(typeof $ === 'undefined' || typeof CT === 'undefined') throw "CTScriptException"
		if(window.location.href.indexOf('results') == -1) CT.fire('assets_loaded'); // home page
		!window.ct_settings_dlEnabled ? CT.getScript('/javascripts/_' + window.language + '/widgets/loadingBar.js', _l) : _l();
	} catch(e){
		_cleartrip.alert(e)
	}
})();